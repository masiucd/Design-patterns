(()=>{"use strict";var t,n=function(){function t(t,n,e){this.teacher=t,this.courses=n,this.students=e}return t.prototype.render=function(){this.teacher.init(),this.courses.init(),this.students.init()},t}(),e=function(){function t(t,n,e,i){this.parentElement=t,this.dataList=n,this.title=e,this.subTitles=i}return t.prototype.clickHandler=function(t){document.querySelectorAll("tr").forEach((function(n){return n.addEventListener("click",(function(){t(parseInt(n.dataset.id,10)),sessionStorage.setItem("user",String(n.dataset.id))}))}))},t.prototype.render=function(){var t='\n    <div class="table-wrapper wrapper-'+this.title+'">\n    <table class="'+this.title+'">\n        <caption>'+this.title+"</caption>\n        <thead>\n          "+this.subTitles.map((function(t){return"<th>"+t+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+this.dataList.map((function(t){var n=t.displayInfo();return'\n                <tr data-id="'+t.id+'">\n                '+Object.keys(n).map((function(t){return"<td>"+n[t]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    ";this.parentElement.innerHTML=t},t.prototype.renderRawHtml=function(){return'\n    <div class="table-wrapper wrapper-'+this.title+'">\n    <table>\n        <caption>'+this.title+"</caption>\n        <thead>\n          "+this.subTitles.map((function(t){return"<th>"+t+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+this.dataList.map((function(t){var n=t.displayInfo();return'\n                <tr data-id="'+t.id+'">\n                '+Object.keys(n).map((function(t){return"<td>"+n[t]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    "},t.prototype.mount=function(t){t.innerHTML=this.renderRawHtml()},t.prototype.init=function(){this.render()},t}(),i=function(){function t(t,n,e,i){this.id=t,this.title=n,this.description=e,this.duration=i,this.courseMediator=null}return t.prototype.displayInfo=function(){return{title:this.title,duration:this.duration}},t}(),o=function(){return[new i(1,"math","math is wonderful","6h"),new i(2,"history","history is good for you","3h"),new i(3,"swedish","without swedish you will face some serious problems","2h"),new i(4,"english","the global language, learn it NOW!!!","5h")]},r=function(){function t(t){this.parentElement=t,this.coursesView=new e(this.parentElement,o(),"Courses",["title","duration"])}return t.prototype.init=function(){this.coursesView.init()},t}(),s=function(t,n,e,i,o){this.id=t,this.firstName=n,this.lastName=e,this.email=i,this.age=o},a=(t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)},function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=function(t){function n(n,e,i,o,r){var s=t.call(this,n,e,i,o,r)||this;return s.subjects=[],s}return a(n,t),n.prototype.displayInfo=function(){return{name:this.firstName+"-"+this.lastName,email:this.email,age:""+this.age}},n}(s),u=function(){function t(t){this.parentElement=t,this.teachersView=new e(this.parentElement,[new c(1,"Frank","Smith","frank@io.com",43),new c(2,"Logan","Jonsson","logan@io.com",47),new c(3,"Mia","Greger","mia@io.com",41),new c(4,"Boris","Rooney","frank@io.com",53)],"Teachers",["name","email","age"])}return t.prototype.init=function(){this.teachersView.init()},t}(),l=function(){function t(){this.students={}}return t.prototype.registerStudent=function(t){this.students[t.firstName]=t,t.studentMediator=this},t.prototype.send=function(t,n,e){},t}(),d=(function(){function t(){this.courses={}}t.prototype.registerStudent=function(t){this.courses[t.title]=t,t.courseMediator=this},t.prototype.send=function(t,n,e){}}(),function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),h=function(t){function n(n,e,i,o,r){var s=t.call(this,n,e,i,o,r)||this;return s.studentMediator=null,s}return d(n,t),n.prototype.displayInfo=function(){return{name:this.firstName+"-"+this.lastName,email:this.email,age:""+this.age}},n}(s),p=new l,f=function(){return[new h(1,"Frank","Mellberg","frank@isObject.com",21),new h(2,"Rio","Ferdinand","rio@isObject.com",25),new h(3,"Nemanja","Vidic","nemanja@isObject.com",32),new h(4,"Fredrik","ljungberg","fredrik@isObject.com",32),new h(5,"Lotta","Schelin","lotta@isObject.com",21),new h(6,"Stina","Olofsson","sina@isObject.com",21)]},m=function(){function t(t,n,i,o,r){this.parentElement=t,this.list=n,this.data=i,this.title=o,this.subTitles=r,this.listView=new e(this.parentElement,this.list,this.title,this.subTitles)}return t.prototype.render=function(){var t,n=this,e=document.querySelector(".modal");e.classList.add("show-modal");var i='\n    <div class="modal-container">\n      '+this.listView.renderRawHtml()+'\n      <button class="close-modal">\n        ‚ùå\n      </button>\n    </div>\n    ';e.innerHTML=i,null===(t=document.querySelector(".close-modal"))||void 0===t||t.addEventListener("click",(function(){e.classList.remove("show-modal")})),console.log(this.listView);var o=document.querySelectorAll(".modal tbody tr").forEach((function(t){console.log(t.dataset.id===String(n.data.id)),console.log("tr.dataset.id",t.dataset.id)}));console.log("trs",o)},t}(),y=function(){function t(t){this.parentElement=t,this.studentsView=new e(this.parentElement,f(),"Students",["name","email","age"])}return t.prototype.handleClickStudent=function(){this.studentsView.clickHandler((function(t){var n=f().find((function(n){return n.id===t})),e=o(),i=document.querySelector(".modal-list");new m(i,e,n,"courses",["title","duration"]).render()}))},t.prototype.init=function(){this.studentsView.init(),this.handleClickStudent(),function(){for(var t=0,n=f();t<n.length;t++){var e=n[t];p.registerStudent(e)}}(),console.log("studentMediator",p)},t}();new n(new u(document.getElementById("teacher")),new r(document.getElementById("course")),new y(document.getElementById("student"))).render()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvYXBwLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212YzIuMC92aWV3cy9saXN0LXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9jb3Vyc2UudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL2NvdXJzZS50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvbW9kZWxzL1BlcnNvbi50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvbW9kZWxzL3RlYWNoZXIudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3RlYWNoZXIudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9tZWRpYXRvci50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvbW9kZWxzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL3ZpZXdzL21vZGFsLXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsidGVhY2hlciIsImNvdXJzZXMiLCJzdHVkZW50cyIsInRoaXMiLCJyZW5kZXIiLCJpbml0IiwicGFyZW50RWxlbWVudCIsImRhdGFMaXN0IiwidGl0bGUiLCJzdWJUaXRsZXMiLCJjbGlja0hhbmRsZXIiLCJzdWJzY3JpYmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInRyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhcnNlSW50IiwiZGF0YXNldCIsImlkIiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwiU3RyaW5nIiwiaHRtbCIsIm1hcCIsInQiLCJqb2luIiwiZGF0YSIsImRpc3BsYXlJbmZvIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsImlubmVySFRNTCIsInJlbmRlclJhd0h0bWwiLCJtb3VudCIsImVsZW1lbnQiLCJkZXNjcmlwdGlvbiIsImR1cmF0aW9uIiwiY291cnNlTWVkaWF0b3IiLCJsb2FkQ291cnNlcyIsIkNvdXJzZSIsImNvdXJzZXNWaWV3IiwiTGlzdFZpZXciLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwiYWdlIiwic3ViamVjdHMiLCJuYW1lIiwiUGVyc29uIiwidGVhY2hlcnNWaWV3IiwiVGVhY2hlciIsInJlZ2lzdGVyU3R1ZGVudCIsInN0dWRlbnQiLCJzdHVkZW50TWVkaWF0b3IiLCJzZW5kIiwibWVzc2FnZSIsImZyb20iLCJ0byIsImNvdXJzZSIsIlN0dWRlbnRNZWRpYXRvciIsImxvYWRTdHVkZW50cyIsIlN0dWRlbnQiLCJsaXN0IiwibGlzdFZpZXciLCJtb2RhbFdyYXBwZXIiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiY29uc29sZSIsImxvZyIsInRycyIsInN0dWRlbnRzVmlldyIsImhhbmRsZUNsaWNrU3R1ZGVudCIsImZpbmQiLCJtb2RhbCIsInJlZ2lzdGVyQWxsU3R1ZGVudHMiLCJBcHAiLCJUZWFjaGVyQ29udHJvbGxlciIsImdldEVsZW1lbnRCeUlkIiwiQ291cnNlQ29udHJvbGxlciIsIlN0dWRlbnRDb250cm9sbGVyIl0sIm1hcHBpbmdzIjoibUJBSUEsSSxFQUFBLGFBSUUsV0FBWUEsRUFBNEJDLEVBQTJCQyxHQUNqRUMsS0FBS0gsUUFBVUEsRUFDZkcsS0FB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LEVBQWtCdEUsU0FBU29FLGVBQWUsYUFDOUM1RSxVIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRlYWNoZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vdGVhY2hlclwiXG5pbXBvcnQgeyBDb3Vyc2VDb250cm9sbGVyIH0gZnJvbSBcIi4vY291cnNlXCJcbmltcG9ydCB7IFN0dWRlbnRDb250cm9sbGVyIH0gZnJvbSBcIi4vc3R1ZGVudFwiXG5cbmV4cG9ydCBjbGFzcyBBcHAge1xuICB0ZWFjaGVyOiBUZWFjaGVyQ29udHJvbGxlclxuICBjb3Vyc2VzOiBDb3Vyc2VDb250cm9sbGVyXG4gIHN0dWRlbnRzOiBTdHVkZW50Q29udHJvbGxlclxuICBjb25zdHJ1Y3Rvcih0ZWFjaGVyOiBUZWFjaGVyQ29udHJvbGxlciwgY291cnNlczogQ291cnNlQ29udHJvbGxlciwgc3R1ZGVudHM6IFN0dWRlbnRDb250cm9sbGVyKSB7XG4gICAgdGhpcy50ZWFjaGVyID0gdGVhY2hlclxuICAgIHRoaXMuY291cnNlcyA9IGNvdXJzZXNcbiAgICB0aGlzLnN0dWRlbnRzID0gc3R1ZGVudHNcbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICB0aGlzLnRlYWNoZXIuaW5pdCgpXG4gICAgdGhpcy5jb3Vyc2VzLmluaXQoKVxuICAgIHRoaXMuc3R1ZGVudHMuaW5pdCgpXG4gIH1cbn1cbiIsImltcG9ydCB7IENvdXJzZSB9IGZyb20gXCIuLi8uLi9tdmMvbW9kZWxzL2NvdXJzZS1tb2RlbFwiXG5pbXBvcnQgeyBUZWFjaGVyIH0gZnJvbSBcIi4uL21vZGVscy90ZWFjaGVyXCJcblxuZXhwb3J0IGNsYXNzIExpc3RWaWV3PFQ+IHtcbiAgcGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnRcbiAgZGF0YUxpc3Q6IEFycmF5PFQ+XG4gIHRpdGxlOiBzdHJpbmdcbiAgc3ViVGl0bGVzOiBzdHJpbmdbXVxuICBjb25zdHJ1Y3RvcihcbiAgICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudCxcbiAgICBkYXRhTGlzdDogQXJyYXk8VD4sXG4gICAgdGl0bGU6IHN0cmluZyxcbiAgICBzdWJUaXRsZXM6IHN0cmluZ1tdXG4gICkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YUxpc3RcbiAgICB0aGlzLnRpdGxlID0gdGl0bGVcbiAgICB0aGlzLnN1YlRpdGxlcyA9IHN1YlRpdGxlc1xuICB9XG5cbiAgY2xpY2tIYW5kbGVyKHN1YnNjcmliZXI6IEZ1bmN0aW9uKSB7XG4gICAgY29uc3QgdHJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInRyXCIpXG4gICAgdHJzLmZvckVhY2godHIgPT5cbiAgICAgIHRyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHN1YnNjcmliZXIocGFyc2VJbnQodHIuZGF0YXNldC5pZCEsIDEwKSlcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInVzZXJcIiwgU3RyaW5nKHRyLmRhdGFzZXQuaWQpKVxuICAgICAgfSlcbiAgICApXG4gIH1cblxuICBwcml2YXRlIHJlbmRlcigpOiB2b2lkIHtcbiAgICBjb25zdCBodG1sID0gYFxuICAgIDxkaXYgY2xhc3M9XCJ0YWJsZS13cmFwcGVyIHdyYXBwZXItJHt0aGlzLnRpdGxlfVwiPlxuICAgIDx0YWJsZSBjbGFzcz1cIiR7dGhpcy50aXRsZX1cIj5cbiAgICAgICAgPGNhcHRpb24+JHt0aGlzLnRpdGxlfTwvY2FwdGlvbj5cbiAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICR7dGhpcy5zdWJUaXRsZXMubWFwKHQgPT4gYDx0aD4ke3R9PC90aD5gKS5qb2luKFwiXCIpfVxuICAgICAgICA8L3RoZWFkPlxuICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgJHsodGhpcy5kYXRhTGlzdCBhcyBBcnJheTxhbnk+KVxuICAgICAgICAgICAgLm1hcCgoZGF0YTogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlJbmZvID0gZGF0YS5kaXNwbGF5SW5mbygpIGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgICA8dHIgZGF0YS1pZD1cIiR7ZGF0YS5pZH1cIj5cbiAgICAgICAgICAgICAgICAke09iamVjdC5rZXlzKGRpc3BsYXlJbmZvKVxuICAgICAgICAgICAgICAgICAgLm1hcChrZXkgPT4gYDx0ZD4ke2Rpc3BsYXlJbmZvW2tleV19PC90ZD5gKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICBgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgIDwvdGJvZHk+XG4gICAgICA8L3RhYmxlPlxuICAgIDwvZGl2PlxuICAgIGBcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbFxuICB9XG5cbiAgcmVuZGVyUmF3SHRtbCgpOiBzdHJpbmcge1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cInRhYmxlLXdyYXBwZXIgd3JhcHBlci0ke3RoaXMudGl0bGV9XCI+XG4gICAgPHRhYmxlPlxuICAgICAgICA8Y2FwdGlvbj4ke3RoaXMudGl0bGV9PC9jYXB0aW9uPlxuICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgJHt0aGlzLnN1YlRpdGxlcy5tYXAodCA9PiBgPHRoPiR7dH08L3RoPmApLmpvaW4oXCJcIil9XG4gICAgICAgIDwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAkeyh0aGlzLmRhdGFMaXN0IGFzIEFycmF5PGFueT4pXG4gICAgICAgICAgICAubWFwKChkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGlzcGxheUluZm8gPSBkYXRhLmRpc3BsYXlJbmZvKCkgYXMgeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxuICAgICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICAgIDx0ciBkYXRhLWlkPVwiJHtkYXRhLmlkfVwiPlxuICAgICAgICAgICAgICAgICR7T2JqZWN0LmtleXMoZGlzcGxheUluZm8pXG4gICAgICAgICAgICAgICAgICAubWFwKGtleSA9PiBgPHRkPiR7ZGlzcGxheUluZm9ba2V5XX08L3RkPmApXG4gICAgICAgICAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgIGBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgICAgPC90Ym9keT5cbiAgICAgIDwvdGFibGU+XG4gICAgPC9kaXY+XG4gICAgYFxuICAgIHJldHVybiBodG1sXG4gIH1cblxuICBtb3VudChlbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gdGhpcy5yZW5kZXJSYXdIdG1sKClcbiAgfVxuXG4gIGluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5yZW5kZXIoKVxuICB9XG59XG4iLCJpbXBvcnQgeyBDb3Vyc2VNZWRpYXRvciB9IGZyb20gXCIuL21lZGlhdG9yXCJcbmltcG9ydCB7IERpc3BsYXlJbmZvIH0gZnJvbSBcIi4uL3R5cGVzXCJcblxuZXhwb3J0IGNsYXNzIENvdXJzZSB7XG4gIGlkOiBudW1iZXJcbiAgdGl0bGU6IHN0cmluZ1xuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gIGR1cmF0aW9uOiBzdHJpbmdcbiAgY291cnNlTWVkaWF0b3I6IG51bGwgfCBDb3Vyc2VNZWRpYXRvclxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCB0aXRsZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBkdXJhdGlvbjogc3RyaW5nKSB7XG4gICAgdGhpcy5pZCA9IGlkXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uXG4gICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uXG4gICAgdGhpcy5jb3Vyc2VNZWRpYXRvciA9IG51bGxcbiAgfVxuXG4gIGRpc3BsYXlJbmZvKCk6IERpc3BsYXlJbmZvIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXG4gICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbixcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGxvYWRDb3Vyc2VzID0gKCk6IENvdXJzZVtdID0+IFtcbiAgbmV3IENvdXJzZSgxLCBcIm1hdGhcIiwgXCJtYXRoIGlzIHdvbmRlcmZ1bFwiLCBcIjZoXCIpLFxuICBuZXcgQ291cnNlKDIsIFwiaGlzdG9yeVwiLCBcImhpc3RvcnkgaXMgZ29vZCBmb3IgeW91XCIsIFwiM2hcIiksXG4gIG5ldyBDb3Vyc2UoMywgXCJzd2VkaXNoXCIsIFwid2l0aG91dCBzd2VkaXNoIHlvdSB3aWxsIGZhY2Ugc29tZSBzZXJpb3VzIHByb2JsZW1zXCIsIFwiMmhcIiksXG4gIG5ldyBDb3Vyc2UoNCwgXCJlbmdsaXNoXCIsIFwidGhlIGdsb2JhbCBsYW5ndWFnZSwgbGVhcm4gaXQgTk9XISEhXCIsIFwiNWhcIiksXG5dXG4iLCJpbXBvcnQgeyBMaXN0VmlldyB9IGZyb20gXCIuLi92aWV3cy9saXN0LXZpZXdcIlxuaW1wb3J0IHsgQ291cnNlLCBsb2FkQ291cnNlcyB9IGZyb20gXCIuLi9tb2RlbHMvY291cnNlXCJcblxuZXhwb3J0IGNsYXNzIENvdXJzZUNvbnRyb2xsZXIge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBjb3Vyc2VzVmlldzogTGlzdFZpZXc8Q291cnNlPlxuICBjb25zdHJ1Y3RvcihwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudCkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLmNvdXJzZXNWaWV3ID0gbmV3IExpc3RWaWV3KHRoaXMucGFyZW50RWxlbWVudCwgbG9hZENvdXJzZXMoKSwgXCJDb3Vyc2VzXCIsIFtcbiAgICAgIFwidGl0bGVcIixcbiAgICAgIFwiZHVyYXRpb25cIixcbiAgICBdKVxuICB9XG5cbiAgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmNvdXJzZXNWaWV3LmluaXQoKVxuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgUGVyc29uIHtcbiAgaWQ6IG51bWJlclxuICBmaXJzdE5hbWU6IHN0cmluZ1xuICBsYXN0TmFtZTogc3RyaW5nXG4gIGVtYWlsOiBzdHJpbmdcbiAgYWdlOiBudW1iZXJcbiAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgZmlyc3ROYW1lOiBzdHJpbmcsIGxhc3ROYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIGFnZTogbnVtYmVyKSB7XG4gICAgdGhpcy5pZCA9IGlkXG4gICAgdGhpcy5maXJzdE5hbWUgPSBmaXJzdE5hbWVcbiAgICB0aGlzLmxhc3ROYW1lID0gbGFzdE5hbWVcbiAgICB0aGlzLmVtYWlsID0gZW1haWxcbiAgICB0aGlzLmFnZSA9IGFnZVxuICB9XG59XG4iLCJpbXBvcnQgeyBQZXJzb24gfSBmcm9tIFwiLi9QZXJzb25cIlxuaW1wb3J0IHsgU3ViamVjdCwgVGVhY2hlclN0dWRlbnRDb25zdHJ1Y3QgfSBmcm9tIFwiLi4vdHlwZXNcIlxuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSBcIm5hbm9pZFwiXG5cbmV4cG9ydCBjbGFzcyBUZWFjaGVyIGV4dGVuZHMgUGVyc29uIGltcGxlbWVudHMgVGVhY2hlclN0dWRlbnRDb25zdHJ1Y3Qge1xuICBzdWJqZWN0czogU3ViamVjdFtdXG4gIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIGZpcnN0TmFtZTogc3RyaW5nLCBsYXN0TmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBhZ2U6IG51bWJlcikge1xuICAgIHN1cGVyKGlkLCBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCwgYWdlKVxuICAgIHRoaXMuc3ViamVjdHMgPSBbXVxuICB9XG5cbiAgZGlzcGxheUluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGAke3RoaXMuZmlyc3ROYW1lfS0ke3RoaXMubGFzdE5hbWV9YCxcbiAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLFxuICAgICAgYWdlOiBgJHt0aGlzLmFnZX1gLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgbG9hZFRlYWNoZXJzID0gKCkgPT4gW1xuICBuZXcgVGVhY2hlcigxLCBcIkZyYW5rXCIsIFwiU21pdGhcIiwgXCJmcmFua0Bpby5jb21cIiwgNDMpLFxuICBuZXcgVGVhY2hlcigyLCBcIkxvZ2FuXCIsIFwiSm9uc3NvblwiLCBcImxvZ2FuQGlvLmNvbVwiLCA0NyksXG4gIG5ldyBUZWFjaGVyKDMsIFwiTWlhXCIsIFwiR3JlZ2VyXCIsIFwibWlhQGlvLmNvbVwiLCA0MSksXG4gIG5ldyBUZWFjaGVyKDQsIFwiQm9yaXNcIiwgXCJSb29uZXlcIiwgXCJmcmFua0Bpby5jb21cIiwgNTMpLFxuXVxuIiwiaW1wb3J0IHsgTGlzdFZpZXcgfSBmcm9tIFwiLi4vdmlld3MvbGlzdC12aWV3XCJcbmltcG9ydCB7IGxvYWRUZWFjaGVycywgVGVhY2hlciB9IGZyb20gXCIuLi9tb2RlbHMvdGVhY2hlclwiXG5cbmV4cG9ydCBjbGFzcyBUZWFjaGVyQ29udHJvbGxlciB7XG4gIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50XG4gIHRlYWNoZXJzVmlldzogTGlzdFZpZXc8VGVhY2hlcj5cbiAgY29uc3RydWN0b3IocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50XG4gICAgdGhpcy50ZWFjaGVyc1ZpZXcgPSBuZXcgTGlzdFZpZXcodGhpcy5wYXJlbnRFbGVtZW50LCBsb2FkVGVhY2hlcnMoKSwgXCJUZWFjaGVyc1wiLCBbXG4gICAgICBcIm5hbWVcIixcbiAgICAgIFwiZW1haWxcIixcbiAgICAgIFwiYWdlXCIsXG4gICAgXSlcbiAgfVxuXG4gIGluaXQoKTogdm9pZCB7XG4gICAgdGhpcy50ZWFjaGVyc1ZpZXcuaW5pdCgpXG4gIH1cbn1cbiIsImltcG9ydCB7IENvdXJzZSB9IGZyb20gXCIuL2NvdXJzZVwiXG5pbXBvcnQgeyBTdHVkZW50IH0gZnJvbSBcIi4vc3R1ZGVudFwiXG5cbmNsYXNzIFN0dWRlbnRNZWRpYXRvciB7XG4gIHN0dWRlbnRzOiBSZWNvcmQ8c3RyaW5nLCBTdHVkZW50PlxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0dWRlbnRzID0ge31cbiAgfVxuXG4gIHJlZ2lzdGVyU3R1ZGVudChzdHVkZW50OiBTdHVkZW50KSB7XG4gICAgdGhpcy5zdHVkZW50c1tzdHVkZW50LmZpcnN0TmFtZV0gPSBzdHVkZW50XG4gICAgc3R1ZGVudC5zdHVkZW50TWVkaWF0b3IgPSB0aGlzXG4gIH1cblxuICBzZW5kKG1lc3NhZ2U6IHN0cmluZywgZnJvbTogQ291cnNlIHwgU3R1ZGVudCwgdG86IENvdXJzZSB8IFN0dWRlbnQpIHtcbiAgICAvL1xuICB9XG59XG5jbGFzcyBDb3Vyc2VNZWRpYXRvciB7XG4gIGNvdXJzZXM6IFJlY29yZDxzdHJpbmcsIENvdXJzZT5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb3Vyc2VzID0ge31cbiAgfVxuXG4gIHJlZ2lzdGVyU3R1ZGVudChjb3Vyc2U6IENvdXJzZSkge1xuICAgIHRoaXMuY291cnNlc1tjb3Vyc2UudGl0bGVdID0gY291cnNlXG4gICAgY291cnNlLmNvdXJzZU1lZGlhdG9yID0gdGhpc1xuICB9XG5cbiAgc2VuZChtZXNzYWdlOiBzdHJpbmcsIGZyb206IENvdXJzZSB8IFN0dWRlbnQsIHRvOiBDb3Vyc2UgfCBTdHVkZW50KSB7XG4gICAgLy9cbiAgfVxufVxuXG5leHBvcnQgeyBTdHVkZW50TWVkaWF0b3IsIENvdXJzZU1lZGlhdG9yIH1cbiIsImltcG9ydCB7IFN0dWRlbnRNZWRpYXRvciB9IGZyb20gXCIuL21lZGlhdG9yXCJcbmltcG9ydCB7IFBlcnNvbiB9IGZyb20gXCIuL1BlcnNvblwiXG5cbmNsYXNzIFN0dWRlbnQgZXh0ZW5kcyBQZXJzb24ge1xuICBzdHVkZW50TWVkaWF0b3I6IG51bGwgfCBTdHVkZW50TWVkaWF0b3JcbiAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgZmlyc3ROYW1lOiBzdHJpbmcsIGxhc3ROYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIGFnZTogbnVtYmVyKSB7XG4gICAgc3VwZXIoaWQsIGZpcnN0TmFtZSwgbGFzdE5hbWUsIGVtYWlsLCBhZ2UpXG4gICAgdGhpcy5zdHVkZW50TWVkaWF0b3IgPSBudWxsXG4gIH1cbiAgZGlzcGxheUluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGAke3RoaXMuZmlyc3ROYW1lfS0ke3RoaXMubGFzdE5hbWV9YCxcbiAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLFxuICAgICAgYWdlOiBgJHt0aGlzLmFnZX1gLFxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBzdHVkZW50TWVkaWF0b3IgPSBuZXcgU3R1ZGVudE1lZGlhdG9yKClcblxuY29uc3QgbG9hZFN0dWRlbnRzID0gKCkgPT4gW1xuICBuZXcgU3R1ZGVudCgxLCBcIkZyYW5rXCIsIFwiTWVsbGJlcmdcIiwgXCJmcmFua0Bpc09iamVjdC5jb21cIiwgMjEpLFxuICBuZXcgU3R1ZGVudCgyLCBcIlJpb1wiLCBcIkZlcmRpbmFuZFwiLCBcInJpb0Bpc09iamVjdC5jb21cIiwgMjUpLFxuICBuZXcgU3R1ZGVudCgzLCBcIk5lbWFuamFcIiwgXCJWaWRpY1wiLCBcIm5lbWFuamFAaXNPYmplY3QuY29tXCIsIDMyKSxcbiAgbmV3IFN0dWRlbnQoNCwgXCJGcmVkcmlrXCIsIFwibGp1bmdiZXJnXCIsIFwiZnJlZHJpa0Bpc09iamVjdC5jb21cIiwgMzIpLFxuICBuZXcgU3R1ZGVudCg1LCBcIkxvdHRhXCIsIFwiU2NoZWxpblwiLCBcImxvdHRhQGlzT2JqZWN0LmNvbVwiLCAyMSksXG4gIG5ldyBTdHVkZW50KDYsIFwiU3RpbmFcIiwgXCJPbG9mc3NvblwiLCBcInNpbmFAaXNPYmplY3QuY29tXCIsIDIxKSxcbl1cblxuY29uc3QgcmVnaXN0ZXJBbGxTdHVkZW50cyA9ICgpOiB2b2lkID0+IHtcbiAgZm9yIChsZXQgc3R1ZGVudCBvZiBsb2FkU3R1ZGVudHMoKSkge1xuICAgIHN0dWRlbnRNZWRpYXRvci5yZWdpc3RlclN0dWRlbnQoc3R1ZGVudClcbiAgfVxufVxuXG5leHBvcnQgeyBTdHVkZW50LCBsb2FkU3R1ZGVudHMsIHN0dWRlbnRNZWRpYXRvciwgcmVnaXN0ZXJBbGxTdHVkZW50cyB9XG4iLCJpbXBvcnQgeyBTdHVkZW50IH0gZnJvbSBcIi4uL21vZGVscy9zdHVkZW50XCJcbmltcG9ydCB7IFRlYWNoZXIgfSBmcm9tIFwiLi4vbW9kZWxzL3RlYWNoZXJcIlxuaW1wb3J0IHsgTGlzdFZpZXcgfSBmcm9tIFwiLi9saXN0LXZpZXdcIlxuXG5leHBvcnQgY2xhc3MgTW9kYWxWaWV3PFQsIFM+IHtcbiAgcGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnRcbiAgbGlzdDogQXJyYXk8YW55PlxuICBkYXRhOiBTdHVkZW50IHwgVGVhY2hlclxuICB0aXRsZTogc3RyaW5nXG4gIGxpc3RWaWV3OiBMaXN0VmlldzxUPlxuICBzdWJUaXRsZXM6IHN0cmluZ1tdXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LFxuICAgIGxpc3Q6IGFueSxcbiAgICBkYXRhOiBTdHVkZW50IHwgVGVhY2hlcixcbiAgICB0aXRsZTogc3RyaW5nLFxuICAgIHN1YlRpdGxlczogc3RyaW5nW11cbiAgKSB7XG4gICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudFxuICAgIHRoaXMubGlzdCA9IGxpc3RcbiAgICB0aGlzLmRhdGEgPSBkYXRhXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlXG4gICAgdGhpcy5zdWJUaXRsZXMgPSBzdWJUaXRsZXNcbiAgICB0aGlzLmxpc3RWaWV3ID0gbmV3IExpc3RWaWV3KHRoaXMucGFyZW50RWxlbWVudCwgdGhpcy5saXN0LCB0aGlzLnRpdGxlLCB0aGlzLnN1YlRpdGxlcylcbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICBjb25zdCBtb2RhbFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpIGFzIEhUTUxETGlzdEVsZW1lbnRcbiAgICBtb2RhbFdyYXBwZXIuY2xhc3NMaXN0LmFkZChcInNob3ctbW9kYWxcIilcblxuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRhaW5lclwiPlxuICAgICAgJHt0aGlzLmxpc3RWaWV3LnJlbmRlclJhd0h0bWwoKX1cbiAgICAgIDxidXR0b24gY2xhc3M9XCJjbG9zZS1tb2RhbFwiPlxuICAgICAgICDinYxcbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICAgIGBcblxuICAgIG1vZGFsV3JhcHBlci5pbm5lckhUTUwgPSBodG1sXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jbG9zZS1tb2RhbFwiKT8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIG1vZGFsV3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKFwic2hvdy1tb2RhbFwiKVxuICAgIH0pXG4gICAgY29uc29sZS5sb2codGhpcy5saXN0VmlldylcbiAgICAvLyBjb25zb2xlLmxvZyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpKVxuICAgIGNvbnN0IHRycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWwgdGJvZHkgdHJcIikuZm9yRWFjaCgodHI6IGFueSkgPT4ge1xuICAgICAgY29uc29sZS5sb2codHIuZGF0YXNldC5pZCA9PT0gU3RyaW5nKHRoaXMuZGF0YS5pZCkpXG4gICAgICBjb25zb2xlLmxvZyhcInRyLmRhdGFzZXQuaWRcIiwgdHIuZGF0YXNldC5pZClcbiAgICB9KVxuICAgIGNvbnNvbGUubG9nKFwidHJzXCIsIHRycylcbiAgICAvLyBjb25zb2xlLmxvZyhcInRyc1wiLCB0cnMpXG4gICAgLy8gY29uc3QgeHMgPSBBcnJheS5mcm9tKHRycylcbiAgfVxufVxuIiwiaW1wb3J0IHsgbG9hZFN0dWRlbnRzLCBTdHVkZW50LCByZWdpc3RlckFsbFN0dWRlbnRzLCBzdHVkZW50TWVkaWF0b3IgfSBmcm9tIFwiLi4vbW9kZWxzL3N0dWRlbnRcIlxuaW1wb3J0IHsgTGlzdFZpZXcgfSBmcm9tIFwiLi4vdmlld3MvbGlzdC12aWV3XCJcbmltcG9ydCB7IE1vZGFsVmlldyBhcyBDb3Vyc2VzTW9kYWxWaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL21vZGFsLXZpZXdcIlxuaW1wb3J0IHsgbG9hZENvdXJzZXMgfSBmcm9tIFwiLi4vbW9kZWxzL2NvdXJzZVwiXG5cbmV4cG9ydCBjbGFzcyBTdHVkZW50Q29udHJvbGxlciB7XG4gIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50XG4gIHN0dWRlbnRzVmlldzogTGlzdFZpZXc8U3R1ZGVudD5cbiAgY29uc3RydWN0b3IocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50XG4gICAgdGhpcy5zdHVkZW50c1ZpZXcgPSBuZXcgTGlzdFZpZXcodGhpcy5wYXJlbnRFbGVtZW50LCBsb2FkU3R1ZGVudHMoKSwgXCJTdHVkZW50c1wiLCBbXG4gICAgICBcIm5hbWVcIixcbiAgICAgIFwiZW1haWxcIixcbiAgICAgIFwiYWdlXCIsXG4gICAgXSlcbiAgfVxuXG4gIGhhbmRsZUNsaWNrU3R1ZGVudCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0dWRlbnRzVmlldy5jbGlja0hhbmRsZXIoKGlkOiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IHN0dWRlbnQgPSBsb2FkU3R1ZGVudHMoKS5maW5kKHN0dWRlbnQgPT4gc3R1ZGVudC5pZCA9PT0gaWQpXG4gICAgICBjb25zdCBkYXRhID0gc3R1ZGVudCEgYXMgU3R1ZGVudFxuICAgICAgY29uc3QgY291cnNlcyA9IGxvYWRDb3Vyc2VzKClcbiAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1saXN0XCIpIGFzIEhUTUxEaXZFbGVtZW50XG4gICAgICBuZXcgQ291cnNlc01vZGFsVmlldzxhbnlbXSwgU3R1ZGVudD4obW9kYWwsIGNvdXJzZXMsIGRhdGEsIFwiY291cnNlc1wiLCBbXG4gICAgICAgIFwidGl0bGVcIixcbiAgICAgICAgXCJkdXJhdGlvblwiLFxuICAgICAgXSkucmVuZGVyKClcbiAgICB9KVxuICB9XG5cbiAgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0dWRlbnRzVmlldy5pbml0KClcbiAgICB0aGlzLmhhbmRsZUNsaWNrU3R1ZGVudCgpXG4gICAgcmVnaXN0ZXJBbGxTdHVkZW50cygpXG4gICAgY29uc29sZS5sb2coXCJzdHVkZW50TWVkaWF0b3JcIiwgc3R1ZGVudE1lZGlhdG9yKVxuICB9XG59XG4iLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvYXBwXCJcbmltcG9ydCB7IENvdXJzZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvY291cnNlXCJcbmltcG9ydCB7IFRlYWNoZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3RlYWNoZXJcIlxuaW1wb3J0IHsgU3R1ZGVudENvbnRyb2xsZXIgfSBmcm9tIFwiLi9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvc3R1ZGVudFwiXG47KCgpID0+IHtcbiAgY29uc3QgY3JlYXRlRWxlbWVudCA9ICh0YWc6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpOiBIVE1MRWxlbWVudCA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKVxuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpXG4gICAgcmV0dXJuIGVsZW1lbnRcbiAgfVxuICBuZXcgQXBwKFxuICAgIG5ldyBUZWFjaGVyQ29udHJvbGxlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlYWNoZXJcIikgYXMgSFRNTERpdkVsZW1lbnQpLFxuICAgIG5ldyBDb3Vyc2VDb250cm9sbGVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY291cnNlXCIpIGFzIEhUTUxEaXZFbGVtZW50KSxcbiAgICBuZXcgU3R1ZGVudENvbnRyb2xsZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdHVkZW50XCIpIGFzIEhUTUxEaXZFbGVtZW50KVxuICApLnJlbmRlcigpXG59KSgpXG4iXSwic291cmNlUm9vdCI6IiJ9