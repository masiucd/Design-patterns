(()=>{"use strict";var t=function(){return(t=Object.assign||function(t){for(var e,o=1,i=arguments.length;o<i;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},e=function(){function e(){this.backlogs=[],this.backlogs=[{id:1,task:"go out with the dog",completed:!1},{id:2,task:"done homework",completed:!0},{id:3,task:"go out for a run",completed:!0},{id:4,task:"cook some food",completed:!1}]}return e.prototype.bindBacklogListChanged=function(t){console.log("fn in model",t())},e.prototype.addBacklog=function(t){var e={id:this.backlogs.length+1,task:t,completed:!1};return this.backlogs.push(e),this.backlogs},e.prototype.editBacklog=function(e,o,i){return void 0===o&&(o=""),void 0===i&&(i=!1),this.backlogs=this.backlogs.map((function(n){return n.id===e?t(t({},n),{task:o,completed:i}):n})),this.backlogs},e.prototype.toggleBacklog=function(e){return this.backlogs=this.backlogs.map((function(o){return o.id===e?t(t({},o),{completed:!o.completed}):o})),this.backlogs},e.prototype.removeBacklog=function(t){return this.backlogs=this.backlogs.filter((function(e){return e.id!==t})),this.backlogs},Object.defineProperty(e.prototype,"allBacklogs",{get:function(){return this.backlogs},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.backlogs.length},enumerable:!1,configurable:!0}),e.prototype.findBacklog=function(t){return this.backlogs.find((function(e){return e.id===t}))},e}(),o=function(){function t(){this.app=this.getElement("#root"),this.wrapper=this.createElement("div","wrapper"),this.title=this.createElement("h1","main-title"),this.title.textContent="BackLogList List",this.form=this.createElement("form","backlog-form"),this.input=this.createElement("input","add-input"),this.input.type="text",this.input.placeholder="enter a new backlog to the backlog...",this.submitButton=this.createElement("button","add-btn"),this.submitButton.innerText="submit",this.backLogList=this.createElement("ul","backlog-list"),this.form.append(this.input,this.submitButton),this.wrapper.append(this.title,this.form,this.backLogList),this.app.append(this.wrapper)}return t.prototype.createElement=function(t,e){void 0===e&&(e="");var o=document.createElement(t);return e&&o.classList.add(e),o},t.prototype.getElement=function(t){return document.querySelector(t)},Object.defineProperty(t.prototype,"_getBacklogText",{get:function(){return this.input.value},enumerable:!1,configurable:!0}),t.prototype._clearInput=function(){this.input.value=""},t.prototype.renderBacklogItems=function(t){for(var e=this;this.backLogList.firstChild;)this.backLogList.removeChild(this.backLogList.firstChild);if(0===t.length){var o=this.createElement("p","no-backlogs-message");o.innerText="No backlogs!",this.backLogList.append(o)}else t.forEach((function(t){var o,i=e.createElement("li","item");i.id=String(t.id);var n=e.createElement("input","toggle-box");n.type="checkbox",n.checked=t.completed;var l=e.createElement("span","text-for-backlog");l.innerText=t.task,t.completed?i.classList.add("checked"):i.classList.remove("checked");var a=e.createElement("button","remove-btn");a.textContent="Delete "+(null===(o=t.task)||void 0===o?void 0:o.slice(0,5))+"...",i.append(n,l,a),e.backLogList.append(i)}))},t.prototype.bindAddBacklog=function(t){var e=this;this.form.addEventListener("submit",(function(o){o.preventDefault(),console.log("submitted"),t(e._getBacklogText),console.log(e._getBacklogText),e._clearInput()}))},t.prototype.bindToggleBacklog=function(t){},t.prototype.bindDeleteBacklog=function(t){},t.prototype.bindEditBacklog=function(t){},t}();new function(t,e){var o=this;this.updateBacklogList=function(t){o.view.renderBacklogItems(t)},this.handleAddBacklog=function(t){o.model.addBacklog(t),console.log(o.model.allBacklogs)},this.handleEditBacklog=function(t,e,i){o.model.editBacklog(t,e,i)},this.handleToggleBacklog=function(t){o.handleToggleBacklog(t)},this.handleDelete=function(t){o.handleDelete(t)},this.model=t,this.view=e,this.model.bindBacklogListChanged(this.updateBacklogList),this.view.bindAddBacklog(this.handleAddBacklog),this.view.bindDeleteBacklog(this.handleDelete),this.view.bindEditBacklog(this.handleEditBacklog),this.view.bindToggleBacklog(this.handleToggleBacklog),this.updateBacklogList(this.model.backlogs)}(new e,new o)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMvY29udHJvbGxlcnMvYmFja2xvZy1jb250cm9sbGVyLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212Yy9tb2RlbHMvYmFja2xvZy1tb2RlbC50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMvdmlld3MvYmFja2xvZy12aWV3LnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbImJhY2tsb2dzIiwidGhpcyIsImlkIiwidGFzayIsImNvbXBsZXRlZCIsImJpbmRCYWNrbG9nTGlzdENoYW5nZWQiLCJmbiIsImNvbnNvbGUiLCJsb2ciLCJhZGRCYWNrbG9nIiwidGFza1RpdGxlIiwiYmFja2xvZyIsImxlbmd0aCIsInB1c2giLCJlZGl0QmFja2xvZyIsImJhY2tsb2dJZCIsIm1hcCIsInRvZG8iLCJ0b2dnbGVCYWNrbG9nIiwicmVtb3ZlQmFja2xvZyIsImZpbHRlciIsImZpbmRCYWNrbG9nIiwiZmluZCIsImFwcCIsImdldEVsZW1lbnQiLCJ3cmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsInRpdGxlIiwidGV4dENvbnRlbnQiLCJmb3JtIiwiaW5wdXQiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJzdWJtaXRCdXR0b24iLCJpbm5lclRleHQiLCJiYWNrTG9nTGlzdCIsImFwcGVuZCIsInRhZyIsImNsYXNzTmFtZSIsImVsZW1lbnQiLCJkb2N1bWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsInZhbHVlIiwiX2NsZWFySW5wdXQiLCJyZW5kZXJCYWNrbG9nSXRlbXMiLCJiYWNrbG9nSXRlbXMiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJwIiwiZm9yRWFjaCIsIml0ZW0iLCJsaSIsIlN0cmluZyIsImNoZWNrYm94IiwiY2hlY2tlZCIsInNwYW4iLCJyZW1vdmUiLCJkZWxldGVCdG4iLCJzbGljZSIsImJpbmRBZGRCYWNrbG9nIiwiaGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiX2dldEJhY2tsb2dUZXh0IiwiYmluZFRvZ2dsZUJhY2tsb2ciLCJiaW5kRGVsZXRlQmFja2xvZyIsImJpbmRFZGl0QmFja2xvZyIsIm1vZGVsIiwidmlldyIsInVwZGF0ZUJhY2tsb2dMaXN0IiwibGlzdCIsImhhbmRsZUFkZEJhY2tsb2ciLCJhbGxCYWNrbG9ncyIsImhhbmRsZUVkaXRCYWNrbG9nIiwiaGFuZGxlVG9nZ2xlQmFja2xvZyIsImhhbmRsZURlbGV0ZSIsIkJhY2tsb2dNb2RlbCIsIkJhY2tsb2dWaWV3Il0sIm1hcHBpbmdzIjoibUJBR0EsSSwrTUNHQSxhQUVFLGFBREEsS0FBQUEsU0FBMEIsR0FFeEJDLEtBQUtELFNBQVcsQ0FDZCxDQUFFRSxHQUFJLEVBQUdDLEtBQU0sc0JBQXVCQyxXQUFXLEdBQ2pELENBQUVGLEdBQUksRUFBR0MsS0FBTSxnQkFBaUJDLFdBQVcsR0FDM0MsQ0FBRUYsR0FBSSxFQUFHQyxLQUFNLG1CQUFvQkMsV0FBVyxHQUM5QyxDQUFFRixHQUFJLEVBQUdDLEtBQU0saUJBQWtCQyxXQUFXLElBaURsRCxPQTdDRSxZQUFBQyx1QkFBQSxTQUF1QkMsR0FDckJDLFFBQVFDLElBQUksY0FBZUYsTUFHN0IsWUFBQUcsV0FBQSxTQUFXQyxHQUNULElBQU1DLEVBQXVCLENBQzNCVCxHQUFJRCxLQUFLRCxTQUFTWSxPQUFTLEVBQzNCVCxLQUFNTyxFQUNOTixXQUFXLEdBR2IsT0FEQUgsS0FBS0QsU0FBU2EsS0FBS0YsR0FDWlYsS0FBS0QsVUFHZCxZQUFBYyxZQUFBLFNBQ0VDLEVBQ0FaLEVBQ0FDLEdBS0EsWUFOQSxJQUFBRCxNQUFBLFNBQ0EsSUFBQUMsT0FBQSxHQUVBSCxLQUFLRCxTQUFXQyxLQUFLRCxTQUFTZ0IsS0FBSSxTQUFBQyxHQUNoQyxPQUFBQSxFQUFLZixLQUFP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QkFBa0JwRSxLQUFLOEUsY0FDakM5RSxLQUFLdUUsS0FBS0YsZ0JBQWdCckUsS0FBSzRFLG1CQUMvQjVFLEtBQUt1RSxLQUFLSixrQkFBa0JuRSxLQUFLNkUscUJBRWpDN0UsS0FBS3dFLGtCQUFrQnhFLEtBQUtzRSxNQUFNdkUsVUdOeEIsQ0FBc0IsSUFBSWdGLEVBQWdCLElBQUlDLEkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFja2xvZ0l0ZW0sIEJhY2tsb2dNb2RlbCB9IGZyb20gXCIuLi9tb2RlbHMvYmFja2xvZy1tb2RlbFwiXG5pbXBvcnQgeyBCYWNrbG9nVmlldyB9IGZyb20gXCIuLi92aWV3cy9iYWNrbG9nLXZpZXdcIlxuXG5leHBvcnQgY2xhc3MgQmFja2xvZ0NvbnRyb2xsZXIge1xuICBtb2RlbDogQmFja2xvZ01vZGVsXG4gIHZpZXc6IEJhY2tsb2dWaWV3XG4gIGNvbnN0cnVjdG9yKG1vZGVsOiBCYWNrbG9nTW9kZWwsIHZpZXc6IEJhY2tsb2dWaWV3KSB7XG4gICAgdGhpcy5tb2RlbCA9IG1vZGVsXG4gICAgdGhpcy52aWV3ID0gdmlld1xuXG4gICAgdGhpcy5tb2RlbC5iaW5kQmFja2xvZ0xpc3RDaGFuZ2VkKHRoaXMudXBkYXRlQmFja2xvZ0xpc3QpXG5cbiAgICB0aGlzLnZpZXcuYmluZEFkZEJhY2tsb2codGhpcy5oYW5kbGVBZGRCYWNrbG9nKVxuICAgIHRoaXMudmlldy5iaW5kRGVsZXRlQmFja2xvZyh0aGlzLmhhbmRsZURlbGV0ZSlcbiAgICB0aGlzLnZpZXcuYmluZEVkaXRCYWNrbG9nKHRoaXMuaGFuZGxlRWRpdEJhY2tsb2cpXG4gICAgdGhpcy52aWV3LmJpbmRUb2dnbGVCYWNrbG9nKHRoaXMuaGFuZGxlVG9nZ2xlQmFja2xvZylcblxuICAgIHRoaXMudXBkYXRlQmFja2xvZ0xpc3QodGhpcy5tb2RlbC5iYWNrbG9ncylcbiAgfVxuXG4gIHVwZGF0ZUJhY2tsb2dMaXN0ID0gKGxpc3Q6IEJhY2tsb2dJdGVtW10pID0+IHtcbiAgICB0aGlzLnZpZXcucmVuZGVyQmFja2xvZ0l0ZW1zKGxpc3QpXG4gIH1cblxuICBoYW5kbGVBZGRCYWNrbG9nID0gKHRhc2tUaXRsZTogc3RyaW5nKSA9PiB7XG4gICAgdGhpcy5tb2RlbC5hZGRCYWNrbG9nKHRhc2tUaXRsZSlcbiAgICBjb25zb2xlLmxvZyh0aGlzLm1vZGVsLmFsbEJhY2tsb2dzKVxuICB9XG4gIGhhbmRsZUVkaXRCYWNrbG9nID0gKGJhY2tsb2dJZDogbnVtYmVyLCB0YXNrOiBzdHJpbmcsIGNvbXBsZXRlZDogYm9vbGVhbikgPT4ge1xuICAgIHRoaXMubW9kZWwuZWRpdEJhY2tsb2coYmFja2xvZ0lkLCB0YXNrLCBjb21wbGV0ZWQpXG4gIH1cbiAgaGFuZGxlVG9nZ2xlQmFja2xvZyA9IChpZDogbnVtYmVyKSA9PiB7XG4gICAgdGhpcy5oYW5kbGVUb2dnbGVCYWNrbG9nKGlkKVxuICB9XG4gIGhhbmRsZURlbGV0ZSA9IChpZDogbnVtYmVyKSA9PiB7XG4gICAgdGhpcy5oYW5kbGVEZWxldGUoaWQpXG4gIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgQmFja2xvZ0l0ZW0ge1xuICBpZDogbnVtYmVyXG4gIHRhc2s6IHN0cmluZ1xuICBjb21wbGV0ZWQ6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGNsYXNzIEJhY2tsb2dNb2RlbCB7XG4gIGJhY2tsb2dzOiBCYWNrbG9nSXRlbVtdID0gW11cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5iYWNrbG9ncyA9IFtcbiAgICAgIHsgaWQ6IDEsIHRhc2s6IFwiZ28gb3V0IHdpdGggdGhlIGRvZ1wiLCBjb21wbGV0ZWQ6IGZhbHNlIH0sXG4gICAgICB7IGlkOiAyLCB0YXNrOiBcImRvbmUgaG9tZXdvcmtcIiwgY29tcGxldGVkOiB0cnVlIH0sXG4gICAgICB7IGlkOiAzLCB0YXNrOiBcImdvIG91dCBmb3IgYSBydW5cIiwgY29tcGxldGVkOiB0cnVlIH0sXG4gICAgICB7IGlkOiA0LCB0YXNrOiBcImNvb2sgc29tZSBmb29kXCIsIGNvbXBsZXRlZDogZmFsc2UgfSxcbiAgICBdXG4gIH1cblxuICBiaW5kQmFja2xvZ0xpc3RDaGFuZ2VkKGZuOiBhbnkpIHtcbiAgICBjb25zb2xlLmxvZyhcImZuIGluIG1vZGVsXCIsIGZuKCkpXG4gIH1cblxuICBhZGRCYWNrbG9nKHRhc2tUaXRsZTogc3RyaW5nKSB7XG4gICAgY29uc3QgYmFja2xvZzogQmFja2xvZ0l0ZW0gPSB7XG4gICAgICBpZDogdGhpcy5iYWNrbG9ncy5sZW5ndGggKyAxLFxuICAgICAgdGFzazogdGFza1RpdGxlLFxuICAgICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICB9XG4gICAgdGhpcy5iYWNrbG9ncy5wdXNoKGJhY2tsb2cpXG4gICAgcmV0dXJuIHRoaXMuYmFja2xvZ3NcbiAgfVxuXG4gIGVkaXRCYWNrbG9nKFxuICAgIGJhY2tsb2dJZDogbnVtYmVyLFxuICAgIHRhc2s6IHN0cmluZyA9IFwiXCIsXG4gICAgY29tcGxldGVkOiBib29sZWFuID0gZmFsc2VcbiAgKSB7XG4gICAgdGhpcy5iYWNrbG9ncyA9IHRoaXMuYmFja2xvZ3MubWFwKHRvZG8gPT5cbiAgICAgIHRvZG8uaWQgPT09IGJhY2tsb2dJZCA/IHsgLi4udG9kbywgdGFzaywgY29tcGxldGVkIH0gOiB0b2RvXG4gICAgKVxuICAgIHJldHVybiB0aGlzLmJhY2tsb2dzXG4gIH1cblxuICB0b2dnbGVCYWNrbG9nKGJhY2tsb2dJZDogbnVtYmVyKSB7XG4gICAgdGhpcy5iYWNrbG9ncyA9IHRoaXMuYmFja2xvZ3MubWFwKHRvZG8gPT5cbiAgICAgIHRvZG8uaWQgPT09IGJhY2tsb2dJZCA/IHsgLi4udG9kbywgY29tcGxldGVkOiAhdG9kby5jb21wbGV0ZWQgfSA6IHRvZG9cbiAgICApXG4gICAgcmV0dXJuIHRoaXMuYmFja2xvZ3NcbiAgfVxuICByZW1vdmVCYWNrbG9nKGJhY2tsb2dJZDogbnVtYmVyKSB7XG4gICAgdGhpcy5iYWNrbG9ncyA9IHRoaXMuYmFja2xvZ3MuZmlsdGVyKHRvZG8gPT4gdG9kby5pZCAhPT0gYmFja2xvZ0lkKVxuICAgIHJldHVybiB0aGlzLmJhY2tsb2dzXG4gIH1cblxuICBnZXQgYWxsQmFja2xvZ3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmFja2xvZ3NcbiAgfVxuICBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5iYWNrbG9ncy5sZW5ndGhcbiAgfVxuICBmaW5kQmFja2xvZyhiYWNrbG9nSWQ6IG51bWJlcikge1xuICAgIHJldHVybiB0aGlzLmJhY2tsb2dzLmZpbmQodG9kbyA9PiB0b2RvLmlkID09PSBiYWNrbG9nSWQpXG4gIH1cbn1cbiIsImltcG9ydCB7IEJhY2tsb2dJdGVtIH0gZnJvbSBcIi4uL21vZGVscy9iYWNrbG9nLW1vZGVsXCJcblxuZXhwb3J0IGNsYXNzIEJhY2tsb2dWaWV3IHtcbiAgYXBwOiBIVE1MRGl2RWxlbWVudFxuICB3cmFwcGVyOiBIVE1MRGl2RWxlbWVudFxuICB0aXRsZTogSFRNTEhlYWRFbGVtZW50XG4gIGZvcm06IEhUTUxGb3JtRWxlbWVudFxuICBpbnB1dDogSFRNTElucHV0RWxlbWVudFxuICBzdWJtaXRCdXR0b246IEhUTUxCdXR0b25FbGVtZW50XG4gIGJhY2tMb2dMaXN0OiBIVE1MVUxpc3RFbGVtZW50XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gcm9vdFxuICAgIHRoaXMuYXBwID0gdGhpcy5nZXRFbGVtZW50KFwiI3Jvb3RcIikgYXMgSFRNTERpdkVsZW1lbnRcbiAgICB0aGlzLndyYXBwZXIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJ3cmFwcGVyXCIpIGFzIEhUTUxEaXZFbGVtZW50XG5cbiAgICB0aGlzLnRpdGxlID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiaDFcIiwgXCJtYWluLXRpdGxlXCIpIGFzIEhUTUxIZWFkRWxlbWVudFxuICAgIHRoaXMudGl0bGUudGV4dENvbnRlbnQgPSBcIkJhY2tMb2dMaXN0IExpc3RcIlxuXG4gICAgdGhpcy5mb3JtID0gdGhpcy5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLCBcImJhY2tsb2ctZm9ybVwiKSBhcyBIVE1MRm9ybUVsZW1lbnRcblxuICAgIHRoaXMuaW5wdXQgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBcImFkZC1pbnB1dFwiKSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgdGhpcy5pbnB1dC50eXBlID0gXCJ0ZXh0XCJcbiAgICB0aGlzLmlucHV0LnBsYWNlaG9sZGVyID0gXCJlbnRlciBhIG5ldyBiYWNrbG9nIHRvIHRoZSBiYWNrbG9nLi4uXCJcblxuICAgIHRoaXMuc3VibWl0QnV0dG9uID0gdGhpcy5jcmVhdGVFbGVtZW50KFxuICAgICAgXCJidXR0b25cIixcbiAgICAgIFwiYWRkLWJ0blwiXG4gICAgKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxuICAgIHRoaXMuc3VibWl0QnV0dG9uLmlubmVyVGV4dCA9IFwic3VibWl0XCJcblxuICAgIHRoaXMuYmFja0xvZ0xpc3QgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBcInVsXCIsXG4gICAgICBcImJhY2tsb2ctbGlzdFwiXG4gICAgKSBhcyBIVE1MVUxpc3RFbGVtZW50XG5cbiAgICB0aGlzLmZvcm0uYXBwZW5kKHRoaXMuaW5wdXQsIHRoaXMuc3VibWl0QnV0dG9uKVxuXG4gICAgdGhpcy53cmFwcGVyLmFwcGVuZCh0aGlzLnRpdGxlLCB0aGlzLmZvcm0sIHRoaXMuYmFja0xvZ0xpc3QpXG5cbiAgICB0aGlzLmFwcC5hcHBlbmQodGhpcy53cmFwcGVyKVxuICB9XG5cbiAgY3JlYXRlRWxlbWVudCh0YWc6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcgPSBcIlwiKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKVxuICAgIGlmIChjbGFzc05hbWUpIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpXG5cbiAgICByZXR1cm4gZWxlbWVudFxuICB9XG5cbiAgZ2V0RWxlbWVudChzZWxlY3Rvcjogc3RyaW5nKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG5cbiAgICByZXR1cm4gZWxlbWVudFxuICB9XG5cbiAgcHJpdmF0ZSBnZXQgX2dldEJhY2tsb2dUZXh0KCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0LnZhbHVlXG4gIH1cblxuICBwcml2YXRlIF9jbGVhcklucHV0KCkge1xuICAgIHRoaXMuaW5wdXQudmFsdWUgPSBcIlwiXG4gIH1cblxuICByZW5kZXJCYWNrbG9nSXRlbXMoYmFja2xvZ0l0ZW1zOiBCYWNrbG9nSXRlbVtdKSB7XG4gICAgd2hpbGUgKHRoaXMuYmFja0xvZ0xpc3QuZmlyc3RDaGlsZCkge1xuICAgICAgdGhpcy5iYWNrTG9nTGlzdC5yZW1vdmVDaGlsZCh0aGlzLmJhY2tMb2dMaXN0LmZpcnN0Q2hpbGQpXG4gICAgfVxuXG4gICAgaWYgKGJhY2tsb2dJdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IHAgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJwXCIsIFwibm8tYmFja2xvZ3MtbWVzc2FnZVwiKVxuICAgICAgcC5pbm5lclRleHQgPSBcIk5vIGJhY2tsb2dzIVwiXG4gICAgICB0aGlzLmJhY2tMb2dMaXN0LmFwcGVuZChwKVxuICAgIH0gZWxzZSB7XG4gICAgICBiYWNrbG9nSXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgY29uc3QgbGkgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCBcIml0ZW1cIikgYXMgSFRNTExJRWxlbWVudFxuICAgICAgICBsaS5pZCA9IFN0cmluZyhpdGVtLmlkKVxuXG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gdGhpcy5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgIFwiaW5wdXRcIixcbiAgICAgICAgICBcInRvZ2dsZS1ib3hcIlxuICAgICAgICApIGFzIEhUTUxJbnB1dEVsZW1lbnRcbiAgICAgICAgY2hlY2tib3gudHlwZSA9IFwiY2hlY2tib3hcIlxuICAgICAgICBjaGVja2JveC5jaGVja2VkID0gaXRlbS5jb21wbGV0ZWRcblxuICAgICAgICBjb25zdCBzcGFuID0gdGhpcy5jcmVhdGVFbGVtZW50KFwic3BhblwiLCBcInRleHQtZm9yLWJhY2tsb2dcIilcbiAgICAgICAgc3Bhbi5pbm5lclRleHQgPSBpdGVtLnRhc2tcblxuICAgICAgICBpZiAoaXRlbS5jb21wbGV0ZWQpIHtcbiAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKFwiY2hlY2tlZFwiKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpLmNsYXNzTGlzdC5yZW1vdmUoXCJjaGVja2VkXCIpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkZWxldGVCdG4gPSB0aGlzLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgXCJidXR0b25cIixcbiAgICAgICAgICBcInJlbW92ZS1idG5cIlxuICAgICAgICApIGFzIEhUTUxCdXR0b25FbGVtZW50XG4gICAgICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9IGBEZWxldGUgJHtpdGVtLnRhc2s/LnNsaWNlKDAsIDUpfS4uLmBcblxuICAgICAgICBsaS5hcHBlbmQoY2hlY2tib3gsIHNwYW4sIGRlbGV0ZUJ0bilcblxuICAgICAgICB0aGlzLmJhY2tMb2dMaXN0LmFwcGVuZChsaSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYmluZEFkZEJhY2tsb2coaGFuZGxlcjogRnVuY3Rpb24pIHtcbiAgICB0aGlzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBjb25zb2xlLmxvZyhcInN1Ym1pdHRlZFwiKVxuICAgICAgaGFuZGxlcih0aGlzLl9nZXRCYWNrbG9nVGV4dClcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuX2dldEJhY2tsb2dUZXh0KVxuICAgICAgdGhpcy5fY2xlYXJJbnB1dCgpXG4gICAgfSlcbiAgfVxuXG4gIGJpbmRUb2dnbGVCYWNrbG9nKGhhbmRsZXI6IChpZDogbnVtYmVyKSA9PiB2b2lkKSB7fVxuICBiaW5kRGVsZXRlQmFja2xvZyhoYW5kbGVyOiAoaWQ6IG51bWJlcikgPT4gdm9pZCkge31cbiAgYmluZEVkaXRCYWNrbG9nKFxuICAgIGhhbmRsZXI6IChiYWNrbG9nSWQ6IG51bWJlciwgdGFzazogc3RyaW5nLCBjb21wbGV0ZWQ6IGJvb2xlYW4pID0+IHZvaWRcbiAgKSB7fVxufVxuIiwiaW1wb3J0IHsgQmFja2xvZ0NvbnRyb2xsZXIgfSBmcm9tIFwiLi9wYXR0ZXJucy9tdmMvY29udHJvbGxlcnMvYmFja2xvZy1jb250cm9sbGVyXCJcbmltcG9ydCB7IEJhY2tsb2dNb2RlbCB9IGZyb20gXCIuL3BhdHRlcm5zL212Yy9tb2RlbHMvYmFja2xvZy1tb2RlbFwiXG5pbXBvcnQgeyBCYWNrbG9nVmlldyB9IGZyb20gXCIuL3BhdHRlcm5zL212Yy92aWV3cy9iYWNrbG9nLXZpZXdcIlxuOygoKSA9PiB7XG4gIC8vIGNvbnN0IHJvb3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJvb3RcIikgYXMgSFRNTERpdkVsZW1lbnRcbiAgLy8gY29uc3QgdG9kb0xpc3QgPSBuZXcgVG9kb0xpc3QoKVxuICAvLyBjb25zdCBsaXN0ID0gdG9kb0xpc3QuYWxsVG9kb3NcbiAgLy8gY29uc3QgdG9kb1ZpZXcgPSBuZXcgVG9kb1ZpZXcobGlzdClcbiAgLy8gY29uc3QgdG9kb0NvbnRyb2xsZXIgPSBuZXcgVG9kb0NvbnRyb2xsZXIodG9kb0xpc3QsIHRvZG9WaWV3KVxuICAvLyB0b2RvQ29udHJvbGxlci5oYW5kbGVNb3VudChyb290KVxuXG4gIGNvbnN0IGFwcCA9IG5ldyBCYWNrbG9nQ29udHJvbGxlcihuZXcgQmFja2xvZ01vZGVsKCksIG5ldyBCYWNrbG9nVmlldygpKVxufSkoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==