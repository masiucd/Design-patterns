(()=>{"use strict";var t=function(){function t(t,e,n){this.teacher=t,this.courses=e,this.students=n}return t.prototype.render=function(){this.teacher.init(),this.courses.init(),this.students.init()},t}(),e=function(){function t(t,e,n,i){this.parentElement=t,this.dataList=e,this.title=n,this.subTitles=i}return t.prototype.clickHandler=function(t){var e,n=this.parentElement.getAttribute("id");console.log(n),console.log("hello world"),console.log(t),console.log(document.querySelectorAll("tr")),null===(e=document.querySelector(".table-wrapper table"))||void 0===e||e.firstChild,document.querySelectorAll("tr").forEach((function(e){return e.addEventListener("click",(function(){console.log(e.dataset.id),t(e.dataset.id)}))}))},t.prototype.render=function(){var t='\n    <div class="table-wrapper wrapper-'+this.title+'">\n    <table>\n        <caption>'+this.title+"</caption>\n        <thead>\n          "+this.subTitles.map((function(t){return"<th>"+t+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+this.dataList.map((function(t){var e=t.displayInfo();return'\n                <tr data-id="'+t.id+'">\n                '+Object.keys(e).map((function(t){return"<td>"+e[t]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    ";this.parentElement.innerHTML=t},t.prototype.init=function(){this.render()},t}();let n=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let i=63&n[t];e+=i<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i<63?"_":"-"}return e};var i,o=function(){function t(t,e,n,i){this.id=t,this.title=e,this.description=n,this.duration=i}return t.prototype.displayInfo=function(){return{title:this.title,duration:this.duration}},t}(),r=function(){function t(t){this.parentElement=t,this.coursesView=new e(this.parentElement,[new o(n(),"math","math is wonderful","6h"),new o(n(),"history","history is good for you","3h"),new o(n(),"swedish","without swedish you will face some serious problems","2h"),new o(n(),"english","the global language, learn it NOW!!!","5h")],"Courses",["title","duration"])}return t.prototype.init=function(){this.coursesView.init()},t}(),s=function(t,e,n,i,o){this.id=t,this.firstName=e,this.lastName=n,this.email=i,this.age=o},a=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e,n,i,o,r){var s=t.call(this,e,n,i,o,r)||this;return s.subjects=[],s}return a(e,t),e.prototype.displayInfo=function(){return{name:this.firstName+"-"+this.lastName,email:this.email,age:""+this.age}},e}(s),u=function(){function t(t){this.parentElement=t,this.teachersView=new e(this.parentElement,[new c(n(),"Frank","Smith","frank@io.com",43),new c(n(),"Logan","Jonsson","logan@io.com",47),new c(n(),"Mia","Greger","mia@io.com",41),new c(n(),"Boris","Rooney","frank@io.com",53)],"Teachers",["name","email","age"])}return t.prototype.init=function(){this.teachersView.init()},t}(),l=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),h=function(t){function e(e,n,i,o,r){return t.call(this,e,n,i,o,r)||this}return l(e,t),e.prototype.displayInfo=function(){return{name:this.firstName+"-"+this.lastName,email:this.email,age:""+this.age}},e}(s),d=function(){return[new h(n(),"Frank","Mellberg","frank@isObject.com",21),new h(n(),"Rio","Ferdinand","rio@isObject.com",25),new h(n(),"Nemanja","Vidic","nemanja@isObject.com",32),new h(n(),"Fredrik","ljungberg","fredrik@isObject.com",32),new h(n(),"Lotta","Schelin","lotta@isObject.com",21),new h(n(),"Stina","Olofsson","sina@isObject.com",21)]},p=function(){function t(t,e){this.parentElement=t,this.data=e}return t.prototype.render=function(){var t,e=this,n='\n      <p id="apa">'+this.data+"</p>\n    ";null===(t=document.getElementById("apa"))||void 0===t||t.addEventListener("click",(function(){console.log(e,"student has been clicked")})),this.parentElement.insertAdjacentHTML("beforeend",n)},t}(),f=function(){function t(t){this.parentElement=t,this.studentsView=new e(this.parentElement,d(),"Students",["name","email","age"])}return t.prototype.handleAddStudent=function(){var t=this;this.studentsView.clickHandler((function(e){var n=d().find((function(t){return t.id===e})),i=(null==n?void 0:n.firstName)+" - "+(null==n?void 0:n.lastName);new p(t.parentElement,i).render()}))},t.prototype.init=function(){this.studentsView.init(),this.handleAddStudent()},t}();new t(new u(document.getElementById("teacher")),new r(document.getElementById("course")),new f(document.getElementById("student"))).render()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvYXBwLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212YzIuMC92aWV3cy9saXN0LXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9ub2RlX21vZHVsZXMvbmFub2lkL2luZGV4LnByb2QuanMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9jb3Vyc2UudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL2NvdXJzZS50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvbW9kZWxzL1BlcnNvbi50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvbW9kZWxzL3RlYWNoZXIudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3RlYWNoZXIudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9zdHVkZW50LnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212YzIuMC92aWV3cy9pdGVtLXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsidGVhY2hlciIsImNvdXJzZXMiLCJzdHVkZW50cyIsInRoaXMiLCJyZW5kZXIiLCJpbml0IiwicGFyZW50RWxlbWVudCIsImRhdGFMaXN0IiwidGl0bGUiLCJzdWJUaXRsZXMiLCJjbGlja0hhbmRsZXIiLCJzdWJzY3JpYmVyIiwicGFyZW50RWxlbWVudElkIiwiZ2V0QXR0cmlidXRlIiwiY29uc29sZSIsImxvZyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsInF1ZXJ5U2VsZWN0b3IiLCJmaXJzdENoaWxkIiwiZm9yRWFjaCIsInRyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRhdGFzZXQiLCJpZCIsImh0bWwiLCJtYXAiLCJ0Iiwiam9pbiIsImRhdGEiLCJkaXNwbGF5SW5mbyIsIk9iamVjdCIsImtleXMiLCJrZXkiLCJpbm5lckhUTUwiLCJuYW5vaWQiLCJzaXplIiwiYnl0ZXMiLCJjcnlwdG8iLCJnZXRSYW5kb21WYWx1ZXMiLCJVaW50OEFycmF5IiwiYnl0ZSIsInRvU3RyaW5nIiwidG9VcHBlckNhc2UiLCJkZXNjcmlwdGlvbiIsImR1cmF0aW9uIiwiY291cnNlc1ZpZXciLCJMaXN0VmlldyIsIkNvdXJzZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJhZ2UiLCJzdWJqZWN0cyIsIm5hbWUiLCJQZXJzb24iLCJ0ZWFjaGVyc1ZpZXciLCJUZWFjaGVyIiwibG9hZFN0dWRlbnRzIiwiU3R1ZGVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwic3R1ZGVudHNWaWV3IiwiaGFuZGxlQWRkU3R1ZGVudCIsInN0dWRlbnQiLCJmaW5kIiwiSXRlbSIsIkFwcCIsIlRlYWNoZXJDb250cm9sbGVyIiwiQ291cnNlQ29udHJvbGxlciIsIlN0dWRlbnRDb250cm9sbGVyIl0sIm1hcHBpbmdzIjoibUJBSUEsaUJBSUUsV0FBWUEsRUFBNEJDLEVBQTJCQyxHQUNqRUMsS0FBS0gsUUFBVUEsRUFDZkcsS0FBS0YsUUFBVUEsRUFDZkUsS0FBS0QsU0FBV0EsRUFRcEIsT0FMRSxZQUFBRSxPQUFBLFdBQ0VELEtBQUtILFFBQVFLLE9BQ2JGLEtBQUtGLFFBQVFJLE9BQ2JGLEtBQUtELFNBQVNHLFFBRWxCLEVBZkEsR0NEQSxhQUtFLFdBQ0VDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBRUFOLEtBQUtHLGNBQWdCQSxFQUNyQkgsS0FBS0ksU0FBV0EsRUFDaEJKLEtBQUtLLE1BQVFBLEVBQ2JMLEtBQUtNLFVBQVlBLEVBbURyQixPQWhERSxZQUFBQyxhQUFBLFNBQWFDLEcsTUFDTEMsRUFBa0JULEtBQUtHLGNBQWNPLGFBQWEsTUFDeERDLFFBQVFDLElBQUlILEdBQ1pFLFFBQVFDLElBQUksZUFDWkQsUUFBUUMsSUFBSUosR0FDWkcsUUFBUUMsSUFBSUMsU0FBU0MsaUJBQWlCLE9BQ3NCLFFBQWpELEVBQUdELFNBQVNFLGNBQWMsK0JBQXVCLFNBQUVDLFdBQ2xESCxTQUFTQyxpQkFBaUIsTUFDbENHLFNBQVEsU0FBQUMsR0FDVixPQUFBQSxFQUFHQyxpQkFBaUIsU0FBUyxXQUMzQlIsUUFBUUMsSUFBSU0sRUFBR0UsUUFBUUMsSUFDdkJiLEVBQVdVLEVBQUdFLFFBQVFDLFdBS3BCLFlBQUFwQixPQUFSLFdBQ0UsSUFBTXFCLEVBQU8sMkNBQ3VCdEIsS0FBS0ssTUFBSyxxQ0FFL0JMLEtBQUtLLE1BQUssMENBRWpCTCxLQUFLTSxVQUFVaUIsS0FBSSxTQUFBQyxHQUFLLGFBQU9BLEVBQUMsV0FBU0MsS0FBSyxJQUFHLGtEQUdoRHpCLEtBQUtJLFNBQ0xtQixLQUFJLFNBQUNHLEdBQ0osSUFBTUMsRUFBY0QsRUFBS0MsY0FDekIsTUFBTyxrQ0FDVUQsRUFBS0wsR0FBRSx1QkFDcEJPLE9BQU9DLEtBQUtGLEdBQ1hKLEtBQUksU0FBQU8sR0FBTyxhQUFPSCxFQUFZRyxHQUFJLFdBQ2xDTCxLQUFLLElBQUcseUNBSWRBLEtBQUssSUFBRyx1REFNakJ6QixLQUFLRyxjQUFjNEIsVUFBWVQsR0FHakMsWUFBQXBCLEtBQUEsV0FDRUYsS0FBS0MsVUFFVCxFQWpFQSxHQytCQSxJQTRDSStCLEVBQVMsQ0FBQ0MsRUFBTyxNQUNuQixJQUFJWixFQUFLLEdBQ0xhLEVBQVFDLE9BQU9DLGdCQUFnQixJQUFJQyxXQUFXSixJQUdsRCxLQUFPQSxLQUFRLENBTWIsSUFBSUssRUFBcUIsR0FBZEosRUFBTUQsR0FHZlosR0FGRWlCLEVBQU8sR0FFSEEsRUFBS0MsU0FBUyxJQUNYRCxFQUFPLElBRVRBLEVBQU8sSUFBSUMsU0FBUyxJQUFJQyxjQUN0QkYsRUFBTyxHQUNWLElBRUEsSUFHVixPQUFPakIsR0NuR1QsSSxFQUFBLGFBS0UsV0FBWUEsRUFBWWhCLEVBQWVvQyxFQUFxQkMsR0FDMUQxQyxLQUFLcUIsR0FBS0EsRUFDVnJCLEtBQUtLLE1BQVFBLEVBQ2JMLEtBQUt5QyxZQUFjQSxFQUNuQnpDLEtBQUswQyxTQUFXQSxFQVFwQixPQU5FLFlBQUFmLFlBQUEsV0FDRSxNQUFPLENBQ0x0QixNQUFPTCxLQUFLSyxNQUNacUMsU0FBVTFDLEtBQUswQyxXQUdyQixFQWpCQSxHQ0FBLGFBR0UsV0FBWXZDLEdBQ1ZILEtBQUtHLGNBQWdCQSxFQUNyQkgsS0FBSzJDLFlBQWMsSUFBSUMsRUFBUzVDLEtBQUtHLGNEY1IsQ0FDL0IsSUFBSTBDLEVBQU9iLElBQVUsT0FBUSxvQkFBcUIsTUFDbEQsSUFBSWEsRUFBT2IsSUFBVSxVQUFXLDBCQUEyQixNQUMzRCxJQUFJYSxFQUFPYixJQUFVLFVBQVcsc0RBQXVELE1BQ3ZGLElBQUlhLEVBQU9iLElBQVUsVUFBVyx1Q0FBd0MsT0NsQkgsVUFBVyxDQUM1RSxRQUNBLGFBT04sT0FIRSxZQUFBOUIsS0FBQSxXQUNFRixLQUFLMkMsWUFBWXpDLFFBRXJCLEVBZEEsR0NIQSxFQU1FLFNBQVltQixFQUFZeUIsRUFBbUJDLEVBQWtCQyxFQUFlQyxHQUMxRWpELEtBQUtxQixHQUFLQSxFQUNWckIsS0FBSzhDLFVBQVlBLEVBQ2pCOUMsS0FBSytDLFNBQVdBLEVBQ2hCL0MsS0FBS2dELE1BQVFBLEVBQ2JoRCxLQUFLaUQsSUFBTUEsRywwVUNQZixjQUVFLFdBQVk1QixFQUFZeUIsRUFBbUJDLEVBQWtCQyxFQUFlQyxHQUE1RSxNQUNFLFlBQU01QixFQUFJeUIsRUFBV0MsRUFBVUMsRUFBT0MsSUFBSSxLLE9BQzFDLEVBQUtDLFNBQVcsRyxFQVVwQixPQWQ2QixPQU8zQixZQUFBdkIsWUFBQSxXQUNFLE1BQU8sQ0FDTHdCLEtBQVNuRCxLQUFLOEMsVUFBUyxJQUFJOUMsS0FBSytDLFNBQ2hDQyxNQUFPaEQsS0FBS2dELE1BQ1pDLElBQUssR0FBR2pELEtBQUtpRCxNQUduQixFQWRBLENBQTZCRyxHQ0Q3QixhQUdFLFdBQVlqRCxHQUNWSCxLQUFLRyxjQUFnQkEsRUFDckJILEtBQUtxRCxhQUFlLElBQUlULEVBQVM1QyxLQUFLRyxjRFlSLENBQ2hDLElBQUltRCxFQUFRdEIsSUFBVSxRQUFTLFFBQVMsZUFBZ0IsSUFDeEQsSUFBSXNCLEVBQVF0QixJQUFVLFFBQVMsVUFBVyxlQUFnQixJQUMxRCxJQUFJc0IsRUFBUXRCLElBQVUsTUFBTyxTQUFVLGFBQWMsSUFDckQsSUFBSXNCLEVBQVF0QixJQUFVLFFBQVMsU0FBVSxlQUFnQixLQ2hCYyxXQUFZLENBQy9FLE9BQ0EsUUFDQSxRQU9OLE9BSEUsWUFBQTlCLEtBQUEsV0FDRUYsS0FBS3FELGFBQWFuRCxRQUV0QixFQWZBLEcsaVdDQ0EsY0FDRSxXQUFZbUIsRUFBWXlCLEVBQW1CQyxFQUFrQkMsRUFBZUMsRyxPQUMxRSxZQUFNNUIsRUFBSXlCLEVBQVdDLEVBQVVDLEVBQU9DLElBQUksS0FTOUMsT0FYNkIsT0FJM0IsWUFBQXRCLFlBQUEsV0FDRSxNQUFPLENBQ0x3QixLQUFTbkQsS0FBSzhDLFVBQVMsSUFBSTlDLEtBQUsrQyxTQUNoQ0MsTUFBT2hELEtBQUtnRCxNQUNaQyxJQUFLLEdBQUdqRCxLQUFLaUQsTUFHbkIsRUFYQSxDQUE2QkcsR0FhaEJHLEVBQWUsV0FBTSxPQUNoQyxJQUFJQyxFQUFReEIsSUFBVSxRQUFTLFdBQVkscUJBQXNCLElBQ2pFLElBQUl3QixFQUFReEIsSUFBVSxNQUFPLFlBQWEsbUJBQW9CLElBQzlELElBQUl3QixFQUFReEIsSUFBVSxVQUFXLFFBQVMsdUJBQXdCLElBQ2xFLElBQUl3QixFQUFReEIsSUFBVSxVQUFXLFlBQWEsdUJBQXdCLElBQ3RFLElBQUl3QixFQUFReEIsSUFBVSxRQUFTLFVBQVcscUJBQXNCLElBQ2hFLElBQUl3QixFQUFReEIsSUFBVSxRQUFTLFdBQVksb0JBQXFCLE1DdkJsRSxhQUdFLFdBQVk3QixFQUErQnVCLEdBQ3pDMUIsS0FBS0csY0FBZ0JBLEVBQ3JCSCxLQUFLMEIsS0FBT0EsRUFZaEIsT0FURSxZQUFBekIsT0FBQSxlLEVBQUEsT0FDUXFCLEVBQU8sdUJBQ0d0QixLQUFLMEIsS0FBSSxhQUVLLFFBQTlCLEVBQUFiLFNBQVM0QyxlQUFlLGNBQU0sU0FBRXRDLGlCQUFpQixTQUFTLFdBQ3hEUixRQUFRQyxJQUFJLEVBQU0sK0JBRXBCWixLQUFLRyxjQUFjdUQsbUJBQW1CLFlBQWFwQyxJQUV2RCxFQWpCQSxHQ0lBLGFBR0UsV0FBWW5CLEdBQ1ZILEtBQUtHLGNBQWdCQSxFQUNyQkgsS0FBSzJELGFBQWUsSUFBSWYsRUFBUzVDLEtBQUtHLGNBQWVvRCxJQUFnQixXQUFZLENBQy9FLE9BQ0EsUUFDQSxRQWlCTixPQWJFLFlBQUFLLGlCQUFBLHNCQUNFNUQsS0FBSzJELGFBQWFwRCxjQUFhLFNBQUNjLEdBQzlCLElBQU13QyxFQUFVTixJQUFlTyxNQUFLLFNBQUFELEdBQVcsT0FBQUEsRUFBUXhDLEtBQU9BLEtBQ3hESyxHQUFVbUMsYUFBTyxFQUFQQSxFQUFTZixXQUFTLE9BQU1lLGFBQU8sRUFBUEEsRUFBU2QsVUFDMUIsSUFBSWdCLEVBQUssRUFBSzVELGNBQWV1QixHQUNyQ3pCLGFBSW5CLFlBQUFDLEtBQUEsV0FDRUYsS0FBSzJELGFBQWF6RCxPQUNsQkYsS0FBSzRELG9CQUVULEVBekJBLEdDTUUsSUFBSUksRUFDRixJQUFJQyxFQUFrQnBELFNBQVM0QyxlQUFlLFlBQzlDLElBQUlTLEVBQWlCckQsU0FBUzRDLGVBQWUsV0FDN0MsSUFBSVUsRUFBa0J0RCxTQUFTNEMsZUFBZSxhQUM5Q3hELFUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGVhY2hlckNvbnRyb2xsZXIgfSBmcm9tIFwiLi90ZWFjaGVyXCJcbmltcG9ydCB7IENvdXJzZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb3Vyc2VcIlxuaW1wb3J0IHsgU3R1ZGVudENvbnRyb2xsZXIgfSBmcm9tIFwiLi9zdHVkZW50XCJcblxuZXhwb3J0IGNsYXNzIEFwcCB7XG4gIHRlYWNoZXI6IFRlYWNoZXJDb250cm9sbGVyXG4gIGNvdXJzZXM6IENvdXJzZUNvbnRyb2xsZXJcbiAgc3R1ZGVudHM6IFN0dWRlbnRDb250cm9sbGVyXG4gIGNvbnN0cnVjdG9yKHRlYWNoZXI6IFRlYWNoZXJDb250cm9sbGVyLCBjb3Vyc2VzOiBDb3Vyc2VDb250cm9sbGVyLCBzdHVkZW50czogU3R1ZGVudENvbnRyb2xsZXIpIHtcbiAgICB0aGlzLnRlYWNoZXIgPSB0ZWFjaGVyXG4gICAgdGhpcy5jb3Vyc2VzID0gY291cnNlc1xuICAgIHRoaXMuc3R1ZGVudHMgPSBzdHVkZW50c1xuICB9XG5cbiAgcmVuZGVyKCk6IHZvaWQge1xuICAgIHRoaXMudGVhY2hlci5pbml0KClcbiAgICB0aGlzLmNvdXJzZXMuaW5pdCgpXG4gICAgdGhpcy5zdHVkZW50cy5pbml0KClcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ291cnNlIH0gZnJvbSBcIi4uLy4uL212Yy9tb2RlbHMvY291cnNlLW1vZGVsXCJcbmltcG9ydCB7IFRlYWNoZXIgfSBmcm9tIFwiLi4vbW9kZWxzL3RlYWNoZXJcIlxuXG5leHBvcnQgY2xhc3MgTGlzdFZpZXcge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBkYXRhTGlzdDogQXJyYXk8YW55PlxuICB0aXRsZTogc3RyaW5nXG4gIHN1YlRpdGxlczogc3RyaW5nW11cbiAgY29uc3RydWN0b3IoXG4gICAgcGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQsXG4gICAgZGF0YUxpc3Q6IEFycmF5PGFueT4sXG4gICAgdGl0bGU6IHN0cmluZyxcbiAgICBzdWJUaXRsZXM6IHN0cmluZ1tdXG4gICkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YUxpc3RcbiAgICB0aGlzLnRpdGxlID0gdGl0bGVcbiAgICB0aGlzLnN1YlRpdGxlcyA9IHN1YlRpdGxlc1xuICB9XG5cbiAgY2xpY2tIYW5kbGVyKHN1YnNjcmliZXI6IEZ1bmN0aW9uKSB7XG4gICAgY29uc3QgcGFyZW50RWxlbWVudElkID0gdGhpcy5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcImlkXCIpXG4gICAgY29uc29sZS5sb2cocGFyZW50RWxlbWVudElkKVxuICAgIGNvbnNvbGUubG9nKFwiaGVsbG8gd29ybGRcIilcbiAgICBjb25zb2xlLmxvZyhzdWJzY3JpYmVyKVxuICAgIGNvbnNvbGUubG9nKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0clwiKSlcbiAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFibGUtd3JhcHBlciB0YWJsZVwiKT8uZmlyc3RDaGlsZFxuICAgIGNvbnN0IHRycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0clwiKVxuICAgIHRycy5mb3JFYWNoKHRyID0+XG4gICAgICB0ci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyh0ci5kYXRhc2V0LmlkKVxuICAgICAgICBzdWJzY3JpYmVyKHRyLmRhdGFzZXQuaWQpXG4gICAgICB9KVxuICAgIClcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyKCk6IHZvaWQge1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cInRhYmxlLXdyYXBwZXIgd3JhcHBlci0ke3RoaXMudGl0bGV9XCI+XG4gICAgPHRhYmxlPlxuICAgICAgICA8Y2FwdGlvbj4ke3RoaXMudGl0bGV9PC9jYXB0aW9uPlxuICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgJHt0aGlzLnN1YlRpdGxlcy5tYXAodCA9PiBgPHRoPiR7dH08L3RoPmApLmpvaW4oXCJcIil9XG4gICAgICAgIDwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAkeyh0aGlzLmRhdGFMaXN0IGFzIEFycmF5PGFueT4pXG4gICAgICAgICAgICAubWFwKChkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGlzcGxheUluZm8gPSBkYXRhLmRpc3BsYXlJbmZvKCkgYXMgeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxuICAgICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICAgIDx0ciBkYXRhLWlkPVwiJHtkYXRhLmlkfVwiPlxuICAgICAgICAgICAgICAgICR7T2JqZWN0LmtleXMoZGlzcGxheUluZm8pXG4gICAgICAgICAgICAgICAgICAubWFwKGtleSA9PiBgPHRkPiR7ZGlzcGxheUluZm9ba2V5XX08L3RkPmApXG4gICAgICAgICAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgIGBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgICAgPC90Ym9keT5cbiAgICAgIDwvdGFibGU+XG4gICAgPC9kaXY+XG4gICAgYFxuICAgIC8vIHRoaXMucGFyZW50RWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmViZWdpblwiLCBodG1sKVxuICAgIHRoaXMucGFyZW50RWxlbWVudC5pbm5lckhUTUwgPSBodG1sXG4gIH1cblxuICBpbml0KCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyKClcbiAgfVxufVxuIiwiLy8gVGhpcyBmaWxlIHJlcGxhY2VzIGBpbmRleC5qc2AgaW4gYnVuZGxlcnMgbGlrZSB3ZWJwYWNrIG9yIFJvbGx1cCxcbi8vIGFjY29yZGluZyB0byBgYnJvd3NlcmAgY29uZmlnIGluIGBwYWNrYWdlLmpzb25gLlxuXG5pbXBvcnQgeyB1cmxBbHBoYWJldCB9IGZyb20gJy4vdXJsLWFscGhhYmV0L2luZGV4LmpzJ1xuXG5pZiAoZmFsc2UpIHtcbiAgLy8gQWxsIGJ1bmRsZXJzIHdpbGwgcmVtb3ZlIHRoaXMgYmxvY2sgaW4gdGhlIHByb2R1Y3Rpb24gYnVuZGxlLlxuICBpZiAoXG4gICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJyAmJlxuICAgIHR5cGVvZiBjcnlwdG8gPT09ICd1bmRlZmluZWQnXG4gICkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdSZWFjdCBOYXRpdmUgZG9lcyBub3QgaGF2ZSBhIGJ1aWx0LWluIHNlY3VyZSByYW5kb20gZ2VuZXJhdG9yLiAnICtcbiAgICAgICAgJ0lmIHlvdSBkb27igJl0IG5lZWQgdW5wcmVkaWN0YWJsZSBJRHMgdXNlIGBuYW5vaWQvbm9uLXNlY3VyZWAuICcgK1xuICAgICAgICAnRm9yIHNlY3VyZSBJRHMsIGltcG9ydCBgcmVhY3QtbmF0aXZlLWdldC1yYW5kb20tdmFsdWVzYCAnICtcbiAgICAgICAgJ2JlZm9yZSBOYW5vIElELiBJZiB5b3UgdXNlIEV4cG8sIGluc3RhbGwgYGV4cG8tcmFuZG9tYCAnICtcbiAgICAgICAgJ2FuZCB1c2UgYG5hbm9pZC9hc3luY2AuJ1xuICAgIClcbiAgfVxuICBpZiAodHlwZW9mIG1zQ3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY3J5cHRvID09PSAndW5kZWZpbmVkJykge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdJbXBvcnQgZmlsZSB3aXRoIGBpZiAoIXdpbmRvdy5jcnlwdG8pIHdpbmRvdy5jcnlwdG8gPSB3aW5kb3cubXNDcnlwdG9gJyArXG4gICAgICAgICcgYmVmb3JlIGltcG9ydGluZyBOYW5vIElEIHRvIGZpeCBJRSAxMSBzdXBwb3J0J1xuICAgIClcbiAgfVxuICBpZiAodHlwZW9mIGNyeXB0byA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnWW91ciBicm93c2VyIGRvZXMgbm90IGhhdmUgc2VjdXJlIHJhbmRvbSBnZW5lcmF0b3IuICcgK1xuICAgICAgICAnSWYgeW91IGRvbuKAmXQgbmVlZCB1bnByZWRpY3RhYmxlIElEcywgeW91IGNhbiB1c2UgbmFub2lkL25vbi1zZWN1cmUuJ1xuICAgIClcbiAgfVxufVxuXG5sZXQgcmFuZG9tID0gYnl0ZXMgPT4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheShieXRlcykpXG5cbmxldCBjdXN0b21SYW5kb20gPSAoYWxwaGFiZXQsIHNpemUsIGdldFJhbmRvbSkgPT4ge1xuICAvLyBGaXJzdCwgYSBiaXRtYXNrIGlzIG5lY2Vzc2FyeSB0byBnZW5lcmF0ZSB0aGUgSUQuIFRoZSBiaXRtYXNrIG1ha2VzIGJ5dGVzXG4gIC8vIHZhbHVlcyBjbG9zZXIgdG8gdGhlIGFscGhhYmV0IHNpemUuIFRoZSBiaXRtYXNrIGNhbGN1bGF0ZXMgdGhlIGNsb3Nlc3RcbiAgLy8gYDJeMzEgLSAxYCBudW1iZXIsIHdoaWNoIGV4Y2VlZHMgdGhlIGFscGhhYmV0IHNpemUuXG4gIC8vIEZvciBleGFtcGxlLCB0aGUgYml0bWFzayBmb3IgdGhlIGFscGhhYmV0IHNpemUgMzAgaXMgMzEgKDAwMDExMTExKS5cbiAgLy8gYE1hdGguY2x6MzJgIGlzIG5vdCB1c2VkLCBiZWNhdXNlIGl0IGlzIG5vdCBhdmFpbGFibGUgaW4gYnJvd3NlcnMuXG4gIGxldCBtYXNrID0gKDIgPDwgKE1hdGgubG9nKGFscGhhYmV0Lmxlbmd0aCAtIDEpIC8gTWF0aC5MTjIpKSAtIDFcbiAgLy8gVGhvdWdoLCB0aGUgYml0bWFzayBzb2x1dGlvbiBpcyBub3QgcGVyZmVjdCBzaW5jZSB0aGUgYnl0ZXMgZXhjZWVkaW5nXG4gIC8vIHRoZSBhbHBoYWJldCBzaXplIGFyZSByZWZ1c2VkLiBUaGVyZWZvcmUsIHRvIHJlbGlhYmx5IGdlbmVyYXRlIHRoZSBJRCxcbiAgLy8gdGhlIHJhbmRvbSBieXRlcyByZWR1bmRhbmN5IGhhcyB0byBiZSBzYXRpc2ZpZWQuXG5cbiAgLy8gTm90ZTogZXZlcnkgaGFyZHdhcmUgcmFuZG9tIGdlbmVyYXRvciBjYWxsIGlzIHBlcmZvcm1hbmNlIGV4cGVuc2l2ZSxcbiAgLy8gYmVjYXVzZSB0aGUgc3lzdGVtIGNhbGwgZm9yIGVudHJvcHkgY29sbGVjdGlvbiB0YWtlcyBhIGxvdCBvZiB0aW1lLlxuICAvLyBTbywgdG8gYXZvaWQgYWRkaXRpb25hbCBzeXN0ZW0gY2FsbHMsIGV4dHJhIGJ5dGVzIGFyZSByZXF1ZXN0ZWQgaW4gYWR2YW5jZS5cblxuICAvLyBOZXh0LCBhIHN0ZXAgZGV0ZXJtaW5lcyBob3cgbWFueSByYW5kb20gYnl0ZXMgdG8gZ2VuZXJhdGUuXG4gIC8vIFRoZSBudW1iZXIgb2YgcmFuZG9tIGJ5dGVzIGdldHMgZGVjaWRlZCB1cG9uIHRoZSBJRCBzaXplLCBtYXNrLFxuICAvLyBhbHBoYWJldCBzaXplLCBhbmQgbWFnaWMgbnVtYmVyIDEuNiAodXNpbmcgMS42IHBlYWtzIGF0IHBlcmZvcm1hbmNlXG4gIC8vIGFjY29yZGluZyB0byBiZW5jaG1hcmtzKS5cblxuICAvLyBgLX5mID0+IE1hdGguY2VpbChmKWAgaWYgZiBpcyBhIGZsb2F0XG4gIC8vIGAtfmkgPT4gaSArIDFgIGlmIGkgaXMgYW4gaW50ZWdlclxuICBsZXQgc3RlcCA9IC1+KCgxLjYgKiBtYXNrICogc2l6ZSkgLyBhbHBoYWJldC5sZW5ndGgpXG5cbiAgcmV0dXJuICgpID0+IHtcbiAgICBsZXQgaWQgPSAnJ1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBsZXQgYnl0ZXMgPSBnZXRSYW5kb20oc3RlcClcbiAgICAgIC8vIEEgY29tcGFjdCBhbHRlcm5hdGl2ZSBmb3IgYGZvciAodmFyIGkgPSAwOyBpIDwgc3RlcDsgaSsrKWAuXG4gICAgICBsZXQgaiA9IHN0ZXBcbiAgICAgIHdoaWxlIChqLS0pIHtcbiAgICAgICAgLy8gQWRkaW5nIGB8fCAnJ2AgcmVmdXNlcyBhIHJhbmRvbSBieXRlIHRoYXQgZXhjZWVkcyB0aGUgYWxwaGFiZXQgc2l6ZS5cbiAgICAgICAgaWQgKz0gYWxwaGFiZXRbYnl0ZXNbal0gJiBtYXNrXSB8fCAnJ1xuICAgICAgICAvLyBgaWQubGVuZ3RoICsgMSA9PT0gc2l6ZWAgaXMgYSBtb3JlIGNvbXBhY3Qgb3B0aW9uLlxuICAgICAgICBpZiAoaWQubGVuZ3RoID09PSArc2l6ZSkgcmV0dXJuIGlkXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmxldCBjdXN0b21BbHBoYWJldCA9IChhbHBoYWJldCwgc2l6ZSkgPT4gY3VzdG9tUmFuZG9tKGFscGhhYmV0LCBzaXplLCByYW5kb20pXG5cbmxldCBuYW5vaWQgPSAoc2l6ZSA9IDIxKSA9PiB7XG4gIGxldCBpZCA9ICcnXG4gIGxldCBieXRlcyA9IGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobmV3IFVpbnQ4QXJyYXkoc2l6ZSkpXG5cbiAgLy8gQSBjb21wYWN0IGFsdGVybmF0aXZlIGZvciBgZm9yICh2YXIgaSA9IDA7IGkgPCBzdGVwOyBpKyspYC5cbiAgd2hpbGUgKHNpemUtLSkge1xuICAgIC8vIEl0IGlzIGluY29ycmVjdCB0byB1c2UgYnl0ZXMgZXhjZWVkaW5nIHRoZSBhbHBoYWJldCBzaXplLlxuICAgIC8vIFRoZSBmb2xsb3dpbmcgbWFzayByZWR1Y2VzIHRoZSByYW5kb20gYnl0ZSBpbiB0aGUgMC0yNTUgdmFsdWVcbiAgICAvLyByYW5nZSB0byB0aGUgMC02MyB2YWx1ZSByYW5nZS4gVGhlcmVmb3JlLCBhZGRpbmcgaGFja3MsIHN1Y2hcbiAgICAvLyBhcyBlbXB0eSBzdHJpbmcgZmFsbGJhY2sgb3IgbWFnaWMgbnVtYmVycywgaXMgdW5uZWNjZXNzYXJ5IGJlY2F1c2VcbiAgICAvLyB0aGUgYml0bWFzayB0cmltcyBieXRlcyBkb3duIHRvIHRoZSBhbHBoYWJldCBzaXplLlxuICAgIGxldCBieXRlID0gYnl0ZXNbc2l6ZV0gJiA2M1xuICAgIGlmIChieXRlIDwgMzYpIHtcbiAgICAgIC8vIGAwLTlhLXpgXG4gICAgICBpZCArPSBieXRlLnRvU3RyaW5nKDM2KVxuICAgIH0gZWxzZSBpZiAoYnl0ZSA8IDYyKSB7XG4gICAgICAvLyBgQS1aYFxuICAgICAgaWQgKz0gKGJ5dGUgLSAyNikudG9TdHJpbmcoMzYpLnRvVXBwZXJDYXNlKClcbiAgICB9IGVsc2UgaWYgKGJ5dGUgPCA2Mykge1xuICAgICAgaWQgKz0gJ18nXG4gICAgfSBlbHNlIHtcbiAgICAgIGlkICs9ICctJ1xuICAgIH1cbiAgfVxuICByZXR1cm4gaWRcbn1cblxuZXhwb3J0IHsgbmFub2lkLCBjdXN0b21BbHBoYWJldCwgY3VzdG9tUmFuZG9tLCB1cmxBbHBoYWJldCwgcmFuZG9tIH1cbiIsImltcG9ydCB7IG5hbm9pZCB9IGZyb20gXCJuYW5vaWRcIlxuaW1wb3J0IHsgRGlzcGxheUluZm8gfSBmcm9tIFwiLi4vdHlwZXNcIlxuXG5leHBvcnQgY2xhc3MgQ291cnNlIHtcbiAgaWQ6IHN0cmluZ1xuICB0aXRsZTogc3RyaW5nXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgZHVyYXRpb246IHN0cmluZ1xuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBkdXJhdGlvbjogc3RyaW5nKSB7XG4gICAgdGhpcy5pZCA9IGlkXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uXG4gICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uXG4gIH1cbiAgZGlzcGxheUluZm8oKTogRGlzcGxheUluZm8ge1xuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogdGhpcy50aXRsZSxcbiAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgbG9hZENvdXJzZXMgPSAoKSA9PiBbXG4gIG5ldyBDb3Vyc2UobmFub2lkKCksIFwibWF0aFwiLCBcIm1hdGggaXMgd29uZGVyZnVsXCIsIFwiNmhcIiksXG4gIG5ldyBDb3Vyc2UobmFub2lkKCksIFwiaGlzdG9yeVwiLCBcImhpc3RvcnkgaXMgZ29vZCBmb3IgeW91XCIsIFwiM2hcIiksXG4gIG5ldyBDb3Vyc2UobmFub2lkKCksIFwic3dlZGlzaFwiLCBcIndpdGhvdXQgc3dlZGlzaCB5b3Ugd2lsbCBmYWNlIHNvbWUgc2VyaW91cyBwcm9ibGVtc1wiLCBcIjJoXCIpLFxuICBuZXcgQ291cnNlKG5hbm9pZCgpLCBcImVuZ2xpc2hcIiwgXCJ0aGUgZ2xvYmFsIGxhbmd1YWdlLCBsZWFybiBpdCBOT1chISFcIiwgXCI1aFwiKSxcbl1cbiIsImltcG9ydCB7IExpc3RWaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL2xpc3Qtdmlld1wiXG5pbXBvcnQgeyBsb2FkQ291cnNlcyB9IGZyb20gXCIuLi9tb2RlbHMvY291cnNlXCJcblxuZXhwb3J0IGNsYXNzIENvdXJzZUNvbnRyb2xsZXIge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBjb3Vyc2VzVmlldzogTGlzdFZpZXdcbiAgY29uc3RydWN0b3IocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50XG4gICAgdGhpcy5jb3Vyc2VzVmlldyA9IG5ldyBMaXN0Vmlldyh0aGlzLnBhcmVudEVsZW1lbnQsIGxvYWRDb3Vyc2VzKCksIFwiQ291cnNlc1wiLCBbXG4gICAgICBcInRpdGxlXCIsXG4gICAgICBcImR1cmF0aW9uXCIsXG4gICAgXSlcbiAgfVxuXG4gIGluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5jb3Vyc2VzVmlldy5pbml0KClcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFBlcnNvbiB7XG4gIGlkOiBzdHJpbmdcbiAgZmlyc3ROYW1lOiBzdHJpbmdcbiAgbGFzdE5hbWU6IHN0cmluZ1xuICBlbWFpbDogc3RyaW5nXG4gIGFnZTogbnVtYmVyXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIGZpcnN0TmFtZTogc3RyaW5nLCBsYXN0TmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBhZ2U6IG51bWJlcikge1xuICAgIHRoaXMuaWQgPSBpZFxuICAgIHRoaXMuZmlyc3ROYW1lID0gZmlyc3ROYW1lXG4gICAgdGhpcy5sYXN0TmFtZSA9IGxhc3ROYW1lXG4gICAgdGhpcy5lbWFpbCA9IGVtYWlsXG4gICAgdGhpcy5hZ2UgPSBhZ2VcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGVyc29uIH0gZnJvbSBcIi4vUGVyc29uXCJcbmltcG9ydCB7IFN1YmplY3QsIFRlYWNoZXJTdHVkZW50Q29uc3RydWN0IH0gZnJvbSBcIi4uL3R5cGVzXCJcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gXCJuYW5vaWRcIlxuXG5leHBvcnQgY2xhc3MgVGVhY2hlciBleHRlbmRzIFBlcnNvbiBpbXBsZW1lbnRzIFRlYWNoZXJTdHVkZW50Q29uc3RydWN0IHtcbiAgc3ViamVjdHM6IFN1YmplY3RbXVxuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgYWdlOiBudW1iZXIpIHtcbiAgICBzdXBlcihpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIGFnZSlcbiAgICB0aGlzLnN1YmplY3RzID0gW11cbiAgfVxuXG4gIGRpc3BsYXlJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHt0aGlzLmZpcnN0TmFtZX0tJHt0aGlzLmxhc3ROYW1lfWAsXG4gICAgICBlbWFpbDogdGhpcy5lbWFpbCxcbiAgICAgIGFnZTogYCR7dGhpcy5hZ2V9YCxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGxvYWRUZWFjaGVycyA9ICgpID0+IFtcbiAgbmV3IFRlYWNoZXIobmFub2lkKCksIFwiRnJhbmtcIiwgXCJTbWl0aFwiLCBcImZyYW5rQGlvLmNvbVwiLCA0MyksXG4gIG5ldyBUZWFjaGVyKG5hbm9pZCgpLCBcIkxvZ2FuXCIsIFwiSm9uc3NvblwiLCBcImxvZ2FuQGlvLmNvbVwiLCA0NyksXG4gIG5ldyBUZWFjaGVyKG5hbm9pZCgpLCBcIk1pYVwiLCBcIkdyZWdlclwiLCBcIm1pYUBpby5jb21cIiwgNDEpLFxuICBuZXcgVGVhY2hlcihuYW5vaWQoKSwgXCJCb3Jpc1wiLCBcIlJvb25leVwiLCBcImZyYW5rQGlvLmNvbVwiLCA1MyksXG5dXG4iLCJpbXBvcnQgeyBMaXN0VmlldyB9IGZyb20gXCIuLi92aWV3cy9saXN0LXZpZXdcIlxuaW1wb3J0IHsgbG9hZFRlYWNoZXJzIH0gZnJvbSBcIi4uL21vZGVscy90ZWFjaGVyXCJcblxuZXhwb3J0IGNsYXNzIFRlYWNoZXJDb250cm9sbGVyIHtcbiAgcGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnRcbiAgdGVhY2hlcnNWaWV3OiBMaXN0Vmlld1xuICBjb25zdHJ1Y3RvcihwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudCkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLnRlYWNoZXJzVmlldyA9IG5ldyBMaXN0Vmlldyh0aGlzLnBhcmVudEVsZW1lbnQsIGxvYWRUZWFjaGVycygpLCBcIlRlYWNoZXJzXCIsIFtcbiAgICAgIFwibmFtZVwiLFxuICAgICAgXCJlbWFpbFwiLFxuICAgICAgXCJhZ2VcIixcbiAgICBdKVxuICB9XG5cbiAgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnRlYWNoZXJzVmlldy5pbml0KClcbiAgfVxufVxuIiwiaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tIFwibG9kYXNoXCJcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gXCJuYW5vaWRcIlxuaW1wb3J0IHsgUGVyc29uIH0gZnJvbSBcIi4vUGVyc29uXCJcblxuZXhwb3J0IGNsYXNzIFN0dWRlbnQgZXh0ZW5kcyBQZXJzb24ge1xuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgYWdlOiBudW1iZXIpIHtcbiAgICBzdXBlcihpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIGFnZSlcbiAgfVxuICBkaXNwbGF5SW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogYCR7dGhpcy5maXJzdE5hbWV9LSR7dGhpcy5sYXN0TmFtZX1gLFxuICAgICAgZW1haWw6IHRoaXMuZW1haWwsXG4gICAgICBhZ2U6IGAke3RoaXMuYWdlfWAsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsb2FkU3R1ZGVudHMgPSAoKSA9PiBbXG4gIG5ldyBTdHVkZW50KG5hbm9pZCgpLCBcIkZyYW5rXCIsIFwiTWVsbGJlcmdcIiwgXCJmcmFua0Bpc09iamVjdC5jb21cIiwgMjEpLFxuICBuZXcgU3R1ZGVudChuYW5vaWQoKSwgXCJSaW9cIiwgXCJGZXJkaW5hbmRcIiwgXCJyaW9AaXNPYmplY3QuY29tXCIsIDI1KSxcbiAgbmV3IFN0dWRlbnQobmFub2lkKCksIFwiTmVtYW5qYVwiLCBcIlZpZGljXCIsIFwibmVtYW5qYUBpc09iamVjdC5jb21cIiwgMzIpLFxuICBuZXcgU3R1ZGVudChuYW5vaWQoKSwgXCJGcmVkcmlrXCIsIFwibGp1bmdiZXJnXCIsIFwiZnJlZHJpa0Bpc09iamVjdC5jb21cIiwgMzIpLFxuICBuZXcgU3R1ZGVudChuYW5vaWQoKSwgXCJMb3R0YVwiLCBcIlNjaGVsaW5cIiwgXCJsb3R0YUBpc09iamVjdC5jb21cIiwgMjEpLFxuICBuZXcgU3R1ZGVudChuYW5vaWQoKSwgXCJTdGluYVwiLCBcIk9sb2Zzc29uXCIsIFwic2luYUBpc09iamVjdC5jb21cIiwgMjEpLFxuXVxuIiwiZXhwb3J0IGNsYXNzIEl0ZW0ge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBkYXRhOiBzdHJpbmdcbiAgY29uc3RydWN0b3IocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQsIGRhdGE6IHN0cmluZykge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLmRhdGEgPSBkYXRhXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICAgIDxwIGlkPVwiYXBhXCI+JHt0aGlzLmRhdGF9PC9wPlxuICAgIGBcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwYVwiKT8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMsIFwic3R1ZGVudCBoYXMgYmVlbiBjbGlja2VkXCIpXG4gICAgfSlcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIGh0bWwpXG4gIH1cbn1cbiIsImltcG9ydCB7IGxvYWRTdHVkZW50cyB9IGZyb20gXCIuLi9tb2RlbHMvc3R1ZGVudFwiXG5pbXBvcnQgeyBJdGVtIH0gZnJvbSBcIi4uL3ZpZXdzL2l0ZW0tdmlld1wiXG5pbXBvcnQgeyBMaXN0VmlldyB9IGZyb20gXCIuLi92aWV3cy9saXN0LXZpZXdcIlxuXG5leHBvcnQgY2xhc3MgU3R1ZGVudENvbnRyb2xsZXIge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBzdHVkZW50c1ZpZXc6IExpc3RWaWV3XG4gIGNvbnN0cnVjdG9yKHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudFxuICAgIHRoaXMuc3R1ZGVudHNWaWV3ID0gbmV3IExpc3RWaWV3KHRoaXMucGFyZW50RWxlbWVudCwgbG9hZFN0dWRlbnRzKCksIFwiU3R1ZGVudHNcIiwgW1xuICAgICAgXCJuYW1lXCIsXG4gICAgICBcImVtYWlsXCIsXG4gICAgICBcImFnZVwiLFxuICAgIF0pXG4gIH1cblxuICBoYW5kbGVBZGRTdHVkZW50KCkge1xuICAgIHRoaXMuc3R1ZGVudHNWaWV3LmNsaWNrSGFuZGxlcigoaWQ6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3Qgc3R1ZGVudCA9IGxvYWRTdHVkZW50cygpLmZpbmQoc3R1ZGVudCA9PiBzdHVkZW50LmlkID09PSBpZClcbiAgICAgIGNvbnN0IGRhdGEgPSBgJHtzdHVkZW50Py5maXJzdE5hbWV9IC0gJHtzdHVkZW50Py5sYXN0TmFtZX1gXG4gICAgICBjb25zdCBuZXdTdHVkZW50SXRlbSA9IG5ldyBJdGVtKHRoaXMucGFyZW50RWxlbWVudCwgZGF0YSlcbiAgICAgIG5ld1N0dWRlbnRJdGVtLnJlbmRlcigpXG4gICAgfSlcbiAgfVxuXG4gIGluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5zdHVkZW50c1ZpZXcuaW5pdCgpXG4gICAgdGhpcy5oYW5kbGVBZGRTdHVkZW50KClcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL2FwcFwiXG5pbXBvcnQgeyBDb3Vyc2VDb250cm9sbGVyIH0gZnJvbSBcIi4vcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL2NvdXJzZVwiXG5pbXBvcnQgeyBUZWFjaGVyQ29udHJvbGxlciB9IGZyb20gXCIuL3BhdHRlcm5zL212YzIuMC9jb250cm9sbGVycy90ZWFjaGVyXCJcbmltcG9ydCB7IFN0dWRlbnRDb250cm9sbGVyIH0gZnJvbSBcIi4vcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3N0dWRlbnRcIlxuOygoKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZUVsZW1lbnQgPSAodGFnOiBzdHJpbmcsIGNsYXNzTmFtZTogc3RyaW5nKTogSFRNTEVsZW1lbnQgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZylcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKVxuICAgIHJldHVybiBlbGVtZW50XG4gIH1cbiAgbmV3IEFwcChcbiAgICBuZXcgVGVhY2hlckNvbnRyb2xsZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZWFjaGVyXCIpIGFzIEhUTUxEaXZFbGVtZW50KSxcbiAgICBuZXcgQ291cnNlQ29udHJvbGxlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvdXJzZVwiKSBhcyBIVE1MRGl2RWxlbWVudCksXG4gICAgbmV3IFN0dWRlbnRDb250cm9sbGVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3R1ZGVudFwiKSBhcyBIVE1MRGl2RWxlbWVudClcbiAgKS5yZW5kZXIoKVxufSkoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==