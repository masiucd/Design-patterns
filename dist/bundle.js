(()=>{"use strict";var t,n=function(){function t(t,n,e){this.teacher=t,this.students=n,this.admin=e}return t.prototype.render=function(){this.teacher.init(),this.admin.init(),this.students.init()},t}(),e=function(){function t(t,n,e,i,o){this.parentElement=t,this.dataList=n,this.title=e,this.subTitles=i,this.type=o}return t.prototype.clickHandler=function(t){document.querySelectorAll("tr").forEach((function(n){return n.addEventListener("click",(function(){"student"===n.id.split("-")[0]&&t(parseInt(n.dataset.id,10))}))}))},t.prototype.render=function(){var t=this,n='\n    <div class="table-wrapper wrapper-'+this.title+'">\n    <table class="'+this.title+'">\n        <caption>'+this.title+"</caption>\n        <thead>\n          "+this.subTitles.map((function(t){return"<th>"+t+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+this.dataList.map((function(n){var e=n.displayInfo();return'\n                <tr data-id="'+n.id+'" id="'+("student"===t.type?"student-"+n.id:"course"===t.type?"course-"+n.id:"teacher-"+n.id)+'">\n                '+Object.keys(e).map((function(t){return'<td data-info="'+e[t]+'">'+e[t]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    ";this.parentElement.innerHTML=n},t.prototype.renderRawHtml=function(){return'\n    <div class="table-wrapper wrapper-'+this.title+'">\n    <table>\n        <caption>'+this.title+"</caption>\n        <thead>\n          "+this.subTitles.map((function(t){return"<th>"+t+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+this.dataList.map((function(t){var n=t.displayInfo();return'\n                <tr data-id="'+t.id+'">\n                '+Object.keys(n).map((function(t){return"<td>"+n[t]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    "},t.prototype.mount=function(t){t.innerHTML=this.renderRawHtml()},t.prototype.init=function(){this.render()},t}(),i=function(t,n,e,i,o){this.id=t,this.firstName=n,this.lastName=e,this.email=i,this.age=o},o=(t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)},function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=function(t){function n(n,e,i,o,r){var s=t.call(this,n,e,i,o,r)||this;return s.subjects=[],s}return o(n,t),n.prototype.displayInfo=function(){return{name:this.firstName+"-"+this.lastName,email:this.email,age:""+this.age}},n}(i),s=function(){function t(t){this.parentElement=t,this.teachersView=new e(this.parentElement,[new r(1,"Frank","Smith","frank@io.com",43),new r(2,"Logan","Jonsson","logan@io.com",47),new r(3,"Mia","Greger","mia@io.com",41),new r(4,"Boris","Rooney","frank@io.com",53)],"Teachers",["name","email","age"],"teacher")}return t.prototype.init=function(){this.teachersView.init()},t}(),a=function(){function t(){this.id=1,this.name="Alfred",this.slug="I am the boss üí∞!!!",this.isAdmin=!0}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.receive=function(t,n){var e="Student "+n.firstName+" "+t;return console.log(e),e},t}(),u=function(){return new a},c=function(){function t(){this.students={},this.admin=u()}return t.prototype.registerStudent=function(t){this.students[t.firstName]=t,t.adminMediator=this},t.prototype.send=function(t,n,e,i){var o=this;e&&i?(e.receive(t,n),null==i||i.receive(t,n)):Object.keys(this.students).forEach((function(e){o.students[e]!==n&&o.students[e].receive(t,n)}))},t}(),d=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),l=function(t){function n(n,e,i,o,r){var s=t.call(this,n,e,i,o,r)||this;return s.adminMediator=null,s}return d(n,t),n.prototype.displayInfo=function(){return{name:this.firstName+"-"+this.lastName,email:this.email,age:""+this.age}},n.prototype.send=function(t,n,e){var i;null===(i=this.adminMediator)||void 0===i||i.send(t,this,n,e)},n.prototype.receive=function(t,n){return t+" - from "+n},n}(i),h=new c,p=function(){return[new l(1,"Frank","Mellberg","frank@io.com",21),new l(2,"Rio","Ferdinand","rio@io.com",25),new l(3,"Nemanja","Vidic","nemanja@io.com",32),new l(4,"Fredrik","ljungberg","fredrik@io.com",32)]},f=function(){function t(t,n,i,o,r){this.parentElement=t,this.list=n,this.data=i,this.title=o,this.subTitles=r,this.listView=new e(this.parentElement,this.list,this.title,this.subTitles,"student"),this.confirmationText="",this.admin=u()}return t.prototype.updateText=function(t){console.log("TEXT",t),this.confirmationText=t},t.prototype.render=function(){var t,n=this,e=document.querySelector(".modal");e.classList.add("show-modal");var i='\n    <div class="modal-container">\n      '+this.listView.renderRawHtml()+"\n      "+this.confirmationText+'\n      <button class="close-modal">\n        ‚ùå\n      </button>\n    </div>\n    ';e.innerHTML=i,null===(t=document.querySelector(".close-modal"))||void 0===t||t.addEventListener("click",(function(){e.classList.remove("show-modal"),e.innerHTML=""})),document.querySelectorAll(".modal tbody tr").forEach((function(t){t.addEventListener("click",(function(t){if("send"in n.data){var e="You have now been registered to the "+t.target.innerText+" Course";n.data.send(e,n.data,n.admin),n.updateText(e),n.updateHtml()}}))}))},t.prototype.updateHtml=function(){this.render()},t}(),m=function(){function t(t,n,e,i){this.id=t,this.title=n,this.description=e,this.duration=i}return t.prototype.displayInfo=function(){return{title:this.title,duration:this.duration}},t}(),y=function(){function t(t){this.parentElement=t,this.studentsView=new e(this.parentElement,p(),"Students",["name","email","age"],"student")}return t.prototype.handleClickStudent=function(){this.studentsView.clickHandler((function(t){var n=p().find((function(n){return n.id===t})),e=[new m(1,"math","math is wonderful","6h"),new m(2,"history","history is good for you","3h"),new m(3,"swedish","without swedish you will face some serious problems","2h"),new m(4,"english","the global language, learn it NOW!!!","5h")],i=document.querySelector(".modal-list");new f(i,e,n,"courses",["title","duration"]).render()}))},t.prototype.handleShowProfile=function(){},t.prototype.init=function(){this.studentsView.init(),this.handleClickStudent(),function(){for(var t=0,n=p();t<n.length;t++){var e=n[t];h.registerStudent(e)}}(),this.handleShowProfile()},t}(),w=function(){function t(t){this.parentElement=t,this.admin=u()}return t.prototype.render=function(){var t;console.log("admin",this.admin,this.parentElement);var n='\n      <div class="admin-wrapper wrapper-'+this.admin.name+'">\n        <button id="admin-profile-btn" class="button">Admin Profile</button>\n\n        <div class="admin-content">\n          <h3> Mr Admin '+this.admin.name+"</h3>\n          <p>"+this.admin.slug+"</p>\n        </div>\n\n      </div>\n    ";this.parentElement.innerHTML=n;var e=document.querySelector(".admin-content");null===(t=document.getElementById("admin-profile-btn"))||void 0===t||t.addEventListener("click",(function(){e.classList.toggle("show-admin-content")}))},t}(),v=function(){function t(t){this.parentElement=t,this.adminView=new w(this.parentElement)}return t.prototype.init=function(){this.adminView.render()},t}();new n(new s(document.getElementById("teacher")),new y(document.getElementById("student")),new v(document.getElementById("admin"))).render()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvYXBwLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212YzIuMC92aWV3cy9saXN0LXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9QZXJzb24udHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy90ZWFjaGVyLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212YzIuMC9jb250cm9sbGVycy90ZWFjaGVyLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212YzIuMC9tb2RlbHMvYWRtaW4udHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9tZWRpYXRvci50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvbW9kZWxzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL3ZpZXdzL21vZGFsLXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9jb3Vyc2UudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL3ZpZXdzL2FkbWluLXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL2FkbWluLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbInRlYWNoZXIiLCJzdHVkZW50cyIsImFkbWluIiwidGhpcyIsInJlbmRlciIsImluaXQiLCJwYXJlbnRFbGVtZW50IiwiZGF0YUxpc3QiLCJ0aXRsZSIsInN1YlRpdGxlcyIsInR5cGUiLCJjbGlja0hhbmRsZXIiLCJzdWJzY3JpYmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInRyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImlkIiwic3BsaXQiLCJwYXJzZUludCIsImRhdGFzZXQiLCJodG1sIiwibWFwIiwidCIsImpvaW4iLCJkYXRhIiwiZGlzcGxheUluZm8iLCJPYmplY3QiLCJrZXlzIiwia2V5IiwiaW5uZXJIVE1MIiwicmVuZGVyUmF3SHRtbCIsIm1vdW50IiwiZWxlbWVudCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJhZ2UiLCJzdWJqZWN0cyIsIm5hbWUiLCJQZXJzb24iLCJ0ZWFjaGVyc1ZpZXciLCJMaXN0VmlldyIsIlRlYWNoZXIiLCJzbHVnIiwiaXNBZG1pbiIsImdldEluc3RhbmNlIiwiQWRtaW4iLCJpbnN0YW5jZSIsInJlY2VpdmUiLCJtZXNzYWdlIiwiZnJvbSIsInN0dWRlbnRSZWdpc3RyZWRGb3JDb3Vyc2VNZXNzYWdlIiwiY29uc29sZSIsImxvZyIsImxvYWRBZG1pbiIsInJlZ2lzdGVyU3R1ZGVudCIsInN0dWRlbnQiLCJhZG1pbk1lZGlhdG9yIiwic2VuZCIsInRvIiwiQWRtaW5NZWRpYXRvciIsImxvYWRTdHVkZW50cyIsIlN0dWRlbnQiLCJsaXN0IiwibGlzdFZpZXciLCJjb25maXJtYXRpb25UZXh0IiwidXBkYXRlVGV4dCIsInRleHQiLCJtb2RhbFdyYXBwZXIiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZXZlbnQiLCJ0YXJnZXQiLCJpbm5lclRleHQiLCJ1cGRhdGVIdG1sIiwiZGVzY3JpcHRpb24iLCJkdXJhdGlvbiIsInN0dWRlbnRzVmlldyIsImhhbmRsZUNsaWNrU3R1ZGVudCIsImZpbmQiLCJjb3Vyc2VzIiwiQ291cnNlIiwibW9kYWwiLCJoYW5kbGVTaG93UHJvZmlsZSIsInJlZ2lzdGVyQWxsU3R1ZGVudHMiLCJhZG1pbkNvbnRlbnQiLCJnZXRFbGVtZW50QnlJZCIsInRvZ2dsZSIsImFkbWluVmlldyIsIkFkbWluVmlldyIsIkFwcCIsIlRlYWNoZXJDb250cm9sbGVyIiwiU3R1ZGVudENvbnRyb2xsZXIiLCJBZG1pbkNvbnRyb2xsZXIiXSwibWFwcGluZ3MiOiJtQkFLQSxJLEVBQUEsYUFJRSxXQUFZQSxFQUE0QkMsRUFBNkJDLEdBQ25FQyxLQUFLSCxRQUFVQSxFQUNmRyxLQUFLRixTQUFXQSxFQUNoQkUsS0FBS0QsTUFBUUEsRUFRakIsT0FMRSxZQUFBRSxPQUFBLFdBQ0VELEtBQUtILFFBQVFLLE9BQ2JGLEtBQUtELE1BQU1HLE9BQ1hGLEtBQUtGLFNBQVNJLFFBRWxCLEVBZkEsR0NGQSxhQU1FLFdBQ0VDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEVBQ0FDLEdBRUFQLEtBQUtHLGNBQWdCQSxFQUNyQkgsS0FBS0ksU0FBV0EsRUFDaEJKLEtBQUtLLE1BQVFBLEVBQ2JMLEtBQUtNLFVBQVlBLEVBQ2pCTixLQUFLTyxLQUFPQSxFQXFGaEIsT0FsRkUsWUFBQUMsYUFBQSxTQUFhQyxHQUNDQyxTQUFTQyxpQkFBaUIsTUFDbENDLFNBQVEsU0FBQUMsR0FDVixPQUFBQSxFQUFHQyxpQkFBaUIsU0FBUyxXQUVkLFlBREVELEVBQUdFLEdBQUdDLE1BQU0sS0FBSSxJQUU3QlAsRUFBV1EsU0FBU0osRUFBR0ssUUFBUUgsR0FBSyxZQU9wQyxZQUFBZCxPQUFSLHNCQUNRa0IsRUFBTywyQ0FDdUJuQixLQUFLSyxNQUFLLHlCQUM5QkwsS0FBS0ssTUFBSyx3QkFDWEwsS0FBS0ssTUFBSywwQ0FFakJMLEtBQUtNLFVBQVVjLEtBQUksU0FBQUMsR0FBSyxhQUFPQSxFQUFDLFdBQVNDLEtBQUssSUFBRyxrREFHaER0QixLQUFLSSxTQUNMZ0IsS0FBSSxTQUFDRyxHQUNKLElBQU1DLEVBQWNELEVBQUtDLGNBQ3pCLE1BQU8sa0NBQ1VELEVBQUtSLEdBQUUsVUFDUixZQUFkLEVBQUtSLEtBQ0QsV0FBV2dCLEVBQUtSLEdBQ0YsV0FBZCxFQUFLUixLQUNMLFVBQVVnQixFQUFLUixHQUNmLFdBQVdRLEVBQUtSLElBQUksdUJBRXRCVSxPQUFPQyxLQUFLRixHQUNYSixLQUFJLFNBQUFPLEdBQU8sd0JBQWtCSCxFQUFZRyxHQUFJLEtBQUtILEVBQVlHLEdBQUksV0FDbEVMLEtBQUssSUFBRyx5Q0FJZEEsS0FBSyxJQUFHLHVEQUtqQnRCLEtBQUtHLGNBQWN5QixVQUFZVCxHQUdqQyxZQUFBVSxjQUFBLFdBeUJFLE1BeEJhLDJDQUN1QjdCLEtBQUtLLE1BQUsscUNBRS9CTCxLQUFLSyxNQUFLLDBDQUVqQkwsS0FBS00sVUFBVWMsS0FBSSxTQUFBQyxHQUFLLGFBQU9BLEVBQUMsV0FBU0MsS0FBSyxJQUFHLGtEQUdoRHRCLEtBQUtJLFNBQ0xnQixLQUFJLFNBQUNHLEdBQ0osSUFBTUMsRUFBY0QsRUFBS0MsY0FDekIsTUFBTyxrQ0FDVUQsRUFBS1IsR0FBRSx1QkFDcEJVLE9BQU9DLEtBQUtGLEdBQ1hKLEtBQUksU0FBQU8sR0FBTyxhQUFPSCxFQUFZRyxHQUFJLFdBQ2xDTCxLQUFLLElBQUcseUNBSWRBLEtBQUssSUFBRyx3REFRbkIsWUFBQVEsTUFBQSxTQUFNQyxHQUNKQSxFQUFRSCxVQUFZNUIsS0FBSzZCLGlCQUczQixZQUFBM0IsS0FBQSxXQUNFRixLQUFLQyxVQUVULEVBdEdBLEdDSEEsRUFNRSxTQUFZYyxFQUFZaUIsRUFBbUJDLEVBQWtCQyxFQUFlQyxHQUMxRW5DLEtBQUtlLEdBQUtBLEVBQ1ZmLEtBQUtnQyxVQUFZQSxFQUNqQmhDLEtBQUtpQyxTQUFXQSxFQUNoQmpDLEtBQUtrQyxNQUFRQSxFQUNibEMsS0FBS21DLElBQU1BLEcsMFVDUGYsY0FFRSxXQUFZcEIsRUFBWWlCLEVBQW1CQyxFQUFrQkMsRUFBZUMsR0FBNUUsTUFDRSxZQUFNcEIsRUFBSWlCLEVBQVdDLEVBQVVDLEVBQU9DLElBQUksSyxPQUMxQyxFQUFLQyxTQUFXLEcsRUFVcEIsT0FkNkIsT0FPM0IsWUFBQVosWUFBQSxXQUNFLE1BQU8sQ0FDTGEsS0FBU3JDLEtBQUtnQyxVQUFTLElBQUloQyxLQUFLaUMsU0FDaENDLE1BQU9sQyxLQUFLa0MsTUFDWkMsSUFBSyxHQUFHbkMsS0FBS21DLE1BR25CLEVBZEEsQ0FBNkJHLEdDRDdCLGFBR0UsV0FBWW5DLEdBQ1ZILEtBQUtHLGNBQWdCQSxFQUNyQkgsS0FBS3VDLGFBQWUsSUFBSUMsRUFDdEJ4QyxLQUFLRyxjRFd1QixDQUNoQyxJQUFJc0MsRUFBUSxFQUFHLFFBQVMsUUFBUyxlQUFnQixJQUNqRCxJQUFJQSxFQUFRLEVBQUcsUUFBUyxVQUFXLGVBQWdCLElBQ25ELElBQUlBLEVBQVEsRUFBRyxNQUFPLFNBQVUsYUFBYyxJQUM5QyxJQUFJQSxFQUFRLEVBQUcsUUFBUyxTQUFVLGVBQWdCLEtDYjlDLFdBQ0EsQ0FBQyxPQUFRLFFBQVMsT0FDbEIsV0FPTixPQUhFLFlBQUF2QyxLQUFBLFdBQ0VGLEtBQUt1QyxhQUFhckMsUUFFdEIsRUFqQkEsR0NBQSxhQU1FLGFBQ0VGLEtBQUtlLEdBQUssRUFDVmYsS0FBS3FDLEtBQU8sU0FDWnJDLEtBQUswQyxLQUFPLHNCQUNaMUMsS0FBSzJDLFNBQVUsRUFhbkIsT0FYUyxFQUFBQyxZQUFQLFdBSUUsT0FIS0MsRUFBTUMsV0FDVEQsRUFBTUMsU0FBVyxJQUFJRCxHQUVoQkEsRUFBTUMsVUFFZixZQUFBQyxRQUFBLFNBQVFDLEVBQWlCQyxHQUN2QixJQUFNQyxFQUFtQyxXQUFXRCxFQUFLakIsVUFBUyxJQUFJZ0IsRUFFdEUsT0FEQUcsUUFBUUMsSUFBSUYsR0FDTEEsR0FFWCxFQXZCQSxHQXlCTUcsRUFBWSxXQUFNLFdBQUlSLEdDeEI1QixhQUdFLGFBQ0U3QyxLQUFLRixTQUFXLEdBQ2hCRSxLQUFLRCxNQUFRc0QsSUFtQmpCLE9BakJFLFlBQUFDLGdCQUFBLFNBQWdCQyxHQUNkdkQsS0FBS0YsU0FBU3lELEVBQVF2QixXQUFhdUIsRUFDbkNBLEVBQVFDLGNBQWdCeEQsTUFHMUIsWUFBQXlELEtBQUEsU0FBS1QsRUFBaUJDLEVBQWVTLEVBQWMzRCxHQUFuRCxXQUNNMkQsR0FBTTNELEdBQ1IyRCxFQUFHWCxRQUFRQyxFQUFTQyxHQUNwQmxELFdBQU9nRCxRQUFRQyxFQUFTQyxJQUV4QnhCLE9BQU9DLEtBQUsxQixLQUFLRixVQUFVYyxTQUFRLFNBQUFlLEdBQzdCLEVBQUs3QixTQUFTNkIsS0FBU3NCLEdBQ3pCLEVBQUtuRCxTQUFTNkIsR0FBS29CLFFBQVFDLEVBQVNDLE9BSzlDLEVBeEJBLEcsaVdDQUEsY0FFRSxXQUFZbEMsRUFBWWlCLEVBQW1CQyxFQUFrQkMsRUFBZUMsR0FBNUUsTUFDRSxZQUFNcEIsRUFBSWlCLEVBQVdDLEVBQVVDLEVBQU9DLElBQUksSyxPQUMxQyxFQUFLcUIsY0FBZ0IsSyxFQWV6QixPQW5Cc0IsT0FNcEIsWUFBQWhDLFlBQUEsV0FDRSxNQUFPLENBQ0xhLEtBQVNyQyxLQUFLZ0MsVUFBUyxJQUFJaEMsS0FBS2lDLFNBQ2hDQyxNQUFPbEMsS0FBS2tDLE1BQ1pDLElBQUssR0FBR25DLEtBQUttQyxNQUdqQixZQUFBc0IsS0FBQSxTQUFLVCxFQUFpQlUsRUFBYzNELEcsTUFDaEIsUUFBbEIsRUFBQUMsS0FBS3dELHFCQUFhLFNBQUVDLEtBQUtULEVBQVNoRCxLQUFNMEQsRUFBSTNELElBRTlDLFlBQUFnRCxRQUFBLFNBQVFDLEVBQWlCQyxHQUN2QixPQUFVRCxFQUFPLFdBQVdDLEdBRWhDLEVBbkJBLENBQXNCWCxHQXFCaEJrQixFQUFnQixJQUFJRyxFQUVwQkMsRUFBZSxXQUFNLE9BQ3pCLElBQUlDLEVBQVEsRUFBRyxRQUFTLFdBQVksZUFBZ0IsSUFDcEQsSUFBSUEsRUFBUSxFQUFHLE1BQU8sWUFBYSxhQUFjLElBQ2pELElBQUlBLEVBQVEsRUFBRyxVQUFXLFFBQVMsaUJBQWtCLElBQ3JELElBQUlBLEVBQVEsRUFBRyxVQUFXLFlBQWEsaUJBQWtCLE1DMUIzRCxhQVVFLFdBQ0UxRCxFQUNBMkQsRUFDQXZDLEVBQ0FsQixFQUNBQyxHQUVBTixLQUFLRyxjQUFnQkEsRUFDckJILEtBQUs4RCxLQUFPQSxFQUNaOUQsS0FBS3VCLEtBQU9BLEVBQ1p2QixLQUFLSyxNQUFRQSxFQUNiTCxLQUFLTSxVQUFZQSxFQUNqQk4sS0FBSytELFNBQVcsSUFBSXZCLEVBQ2xCeEMsS0FBS0csY0FDTEgsS0FBSzhELEtBQ0w5RCxLQUFLSyxNQUNMTCxLQUFLTSxVQUNMLFdBRUZOLEtBQUtnRSxpQkFBbUIsR0FDeEJoRSxLQUFLRCxNQUFRc0QsSUEwQ2pCLE9BdkNFLFlBQUFZLFdBQUEsU0FBV0MsR0FDVGYsUUFBUUMsSUFBSSxPQUFRYyxHQUNwQmxFLEtBQUtnRSxpQkFBbUJFLEdBRzFCLFlBQUFqRSxPQUFBLGUsRUFBQSxPQUNRa0UsRUFBZXpELFNBQVMwRCxjQUFjLFVBQzVDRCxFQUFhRSxVQUFVQyxJQUFJLGNBRTNCLElBQU1uRCxFQUFPLDhDQUVUbkIsS0FBSytELFNBQVNsQyxnQkFBZSxXQUM3QjdCLEtBQUtnRSxpQkFBZ0IscUZBT3pCRyxFQUFhdkMsVUFBWVQsRUFDYSxRQUF0QyxFQUFBVCxTQUFTMEQsY0FBYyx1QkFBZSxTQUFFdEQsaUJBQWlCLFNBQVMsV0FDaEVxRCxFQUFhRSxVQUFVRSxPQUFPLGNBQzlCSixFQUFhdkMsVUFBWSxNQUczQmxCLFNBQVNDLGlCQUFpQixtQkFBbUJDLFNBQVEsU0FBQ0MsR0FDcERBLEVBQUdDLGlCQUFpQixTQUFTLFNBQUMwRCxHQUM1QixHQUFJLFNBQVUsRUFBS2pELEtBQU0sQ0FDdkIsSUFBTXlDLEVBQW1CLHVDQUF1Q1EsRUFBTUMsT0FBT0MsVUFBUyxVQUN0RixFQUFLbkQsS0FBS2tDLEtBQUtPLEVBQWtCLEVBQUt6QyxLQUFNLEVBQUt4QixPQUNqRCxFQUFLa0UsV0FBV0QsR0FDaEIsRUFBS1cscUJBS2IsWUFBQUEsV0FBQSxXQUNFM0UsS0FBS0MsVUFFVCxFQXhFQSxHQ0pBLGFBTUUsV0FBWWMsRUFBWVYsRUFBZXVFLEVBQXFCQyxHQUMxRDdFLEtBQUtlLEdBQUtBLEVBQ1ZmLEtBQUtLLE1BQVFBLEVBQ2JMLEtBQUs0RSxZQUFjQSxFQUNuQjVFLEtBQUs2RSxTQUFXQSxFQVNwQixPQU5FLFlBQUFyRCxZQUFBLFdBQ0UsTUFBTyxDQUNMbkIsTUFBT0wsS0FBS0ssTUFDWndFLFNBQVU3RSxLQUFLNkUsV0FHckIsRUFuQkEsR0NLQSxhQUdFLFdBQVkxRSxHQUNWSCxLQUFLRyxjQUFnQkEsRUFDckJILEtBQUs4RSxhQUFlLElBQUl0QyxFQUN0QnhDLEtBQUtHLGNBQ0x5RCxJQUNBLFdBQ0EsQ0FBQyxPQUFRLFFBQVMsT0FDbEIsV0ErQk4sT0EzQkUsWUFBQW1CLG1CQUFBLFdBQ0UvRSxLQUFLOEUsYUFBYXRFLGNBQWEsU0FBQ08sR0FDOUIsSUFDTVEsRUFEVXFDLElBQWVvQixNQUFLLFNBQUF6QixHQUFXLE9BQUFBLEVBQVF4QyxLQUFPQSxLQUV4RGtFLEVERndCLENBQ2xDLElBQUlDLEVBQU8sRUFBRyxPQUFRLG9CQUFxQixNQUMzQyxJQUFJQSxFQUFPLEVBQUcsVUFBVywwQkFBMkIsTUFDcEQsSUFBSUEsRUFBTyxFQUFHLFVBQVcsc0RBQXVELE1BQ2hGLElBQUlBLEVBQU8sRUFBRyxVQUFXLHVDQUF3QyxPQ0R2REMsRUFBUXpFLFNBQVMwRCxjQUFjLGVBQ3JDLElBQUksRUFBd0JlLEVBQU9GLEVBQVMxRCxFQUFNLFVBQVcsQ0FBQyxRQUFTLGFBQWF0QixhQUl4RixZQUFBbUYsa0JBQUEsYUFVQSxZQUFBbEYsS0FBQSxXQUNFRixLQUFLOEUsYUFBYTVFLE9BQ2xCRixLQUFLK0UscUJIUm1CLFdBQzFCLElBQW9CLFVBQUFuQixJQUFBLGVBQWdCLENBQS9CLElBQUlMLEVBQU8sS0FDZEMsRUFBY0YsZ0JBQWdCQyxJR085QjhCLEdBQ0FyRixLQUFLb0YscUJBR1QsRUF6Q0EsR0NKQSxhQUdFLFdBQVlqRixHQUNWSCxLQUFLRyxjQUFnQkEsRUFDckJILEtBQUtELE1BQVFzRCxJQXVCakIsT0FwQkUsWUFBQXBELE9BQUEsVyxNQUNFa0QsUUFBUUMsSUFBSSxRQUFTcEQsS0FBS0QsTUFBT0MsS0FBS0csZUFDdEMsSUFBTWdCLEVBQU8sNkNBQ3lCbkIsS0FBS0QsTUFBTXNDLEtBQUksb0pBSS9CckMsS0FBS0QsTUFBTXNDLEtBQUksdUJBQzFCckMsS0FBS0QsTUFBTTJDLEtBQUksNkNBSzFCMUMsS0FBS0csY0FBY3lCLFVBQVlULEVBRS9CLElBQU1tRSxFQUFlNUUsU0FBUzBELGNBQWMsa0JBQ0EsUUFBNUMsRUFBQTFELFNBQVM2RSxlQUFlLDRCQUFvQixTQUFFekUsaUJBQWlCLFNBQVMsV0FDdEV3RSxFQUFhakIsVUFBVW1CLE9BQU8sMEJBR3BDLEVBNUJBLEdDQUEsYUFHRSxXQUFZckYsR0FDVkgsS0FBS0csY0FBZ0JBLEVBQ3JCSCxLQUFLeUYsVUFBWSxJQUFJQyxFQUFVMUYsS0FBS0csZUFNeEMsT0FIRSxZQUFBRCxLQUFBLFdBQ0VGLEtBQUt5RixVQUFVeEYsVUFFbkIsRUFYQSxHQ0dFLElBQUkwRixFQUNGLElBQUlDLEVBQWtCbEYsU0FBUzZFLGVBQWUsWUFDOUMsSUFBSU0sRUFBa0JuRixTQUFTNkUsZUFBZSxZQUM5QyxJQUFJTyxFQUFnQnBGLFNBQVM2RSxlQUFlLFdBQzVDdEYsVSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZWFjaGVyQ29udHJvbGxlciB9IGZyb20gXCIuL3RlYWNoZXJcIlxuaW1wb3J0IHsgQ291cnNlQ29udHJvbGxlciB9IGZyb20gXCIuL2NvdXJzZVwiXG5pbXBvcnQgeyBTdHVkZW50Q29udHJvbGxlciB9IGZyb20gXCIuL3N0dWRlbnRcIlxuaW1wb3J0IHsgQWRtaW5Db250cm9sbGVyIH0gZnJvbSBcIi4vYWRtaW5cIlxuXG5leHBvcnQgY2xhc3MgQXBwIHtcbiAgdGVhY2hlcjogVGVhY2hlckNvbnRyb2xsZXJcbiAgc3R1ZGVudHM6IFN0dWRlbnRDb250cm9sbGVyXG4gIGFkbWluOiBBZG1pbkNvbnRyb2xsZXJcbiAgY29uc3RydWN0b3IodGVhY2hlcjogVGVhY2hlckNvbnRyb2xsZXIsIHN0dWRlbnRzOiBTdHVkZW50Q29udHJvbGxlciwgYWRtaW46IEFkbWluQ29udHJvbGxlcikge1xuICAgIHRoaXMudGVhY2hlciA9IHRlYWNoZXJcbiAgICB0aGlzLnN0dWRlbnRzID0gc3R1ZGVudHNcbiAgICB0aGlzLmFkbWluID0gYWRtaW5cbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICB0aGlzLnRlYWNoZXIuaW5pdCgpXG4gICAgdGhpcy5hZG1pbi5pbml0KClcbiAgICB0aGlzLnN0dWRlbnRzLmluaXQoKVxuICB9XG59XG4iLCJpbXBvcnQgeyBDb3Vyc2UgfSBmcm9tIFwiLi4vLi4vbXZjL21vZGVscy9jb3Vyc2UtbW9kZWxcIlxuaW1wb3J0IHsgVGVhY2hlciB9IGZyb20gXCIuLi9tb2RlbHMvdGVhY2hlclwiXG5pbXBvcnQgeyBXaGF0TW9kZWxUeXBlIH0gZnJvbSBcIi4uL3R5cGVzXCJcbmV4cG9ydCBjbGFzcyBMaXN0VmlldzxUPiB7XG4gIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50XG4gIGRhdGFMaXN0OiBBcnJheTxUPlxuICB0aXRsZTogc3RyaW5nXG4gIHN1YlRpdGxlczogc3RyaW5nW11cbiAgdHlwZTogV2hhdE1vZGVsVHlwZSAvLyBzdHVkZW50IG9yZSB0ZWFjaGVyXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LFxuICAgIGRhdGFMaXN0OiBBcnJheTxUPixcbiAgICB0aXRsZTogc3RyaW5nLFxuICAgIHN1YlRpdGxlczogc3RyaW5nW10sXG4gICAgdHlwZTogV2hhdE1vZGVsVHlwZSxcbiAgKSB7XG4gICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudFxuICAgIHRoaXMuZGF0YUxpc3QgPSBkYXRhTGlzdFxuICAgIHRoaXMudGl0bGUgPSB0aXRsZVxuICAgIHRoaXMuc3ViVGl0bGVzID0gc3ViVGl0bGVzXG4gICAgdGhpcy50eXBlID0gdHlwZVxuICB9XG5cbiAgY2xpY2tIYW5kbGVyKHN1YnNjcmliZXI6IEZ1bmN0aW9uKSB7XG4gICAgY29uc3QgdHJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInRyXCIpXG4gICAgdHJzLmZvckVhY2godHIgPT5cbiAgICAgIHRyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFt0eXBlXSA9IHRyLmlkLnNwbGl0KFwiLVwiKVxuICAgICAgICBpZiAodHlwZSA9PT0gXCJzdHVkZW50XCIpIHtcbiAgICAgICAgICBzdWJzY3JpYmVyKHBhcnNlSW50KHRyLmRhdGFzZXQuaWQhLCAxMCkpXG4gICAgICAgIH1cbiAgICAgICAgLy8gc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInVzZXJcIiwgU3RyaW5nKHRyLmRhdGFzZXQuaWQpKVxuICAgICAgfSksXG4gICAgKVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXIoKTogdm9pZCB7XG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwidGFibGUtd3JhcHBlciB3cmFwcGVyLSR7dGhpcy50aXRsZX1cIj5cbiAgICA8dGFibGUgY2xhc3M9XCIke3RoaXMudGl0bGV9XCI+XG4gICAgICAgIDxjYXB0aW9uPiR7dGhpcy50aXRsZX08L2NhcHRpb24+XG4gICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAke3RoaXMuc3ViVGl0bGVzLm1hcCh0ID0+IGA8dGg+JHt0fTwvdGg+YCkuam9pbihcIlwiKX1cbiAgICAgICAgPC90aGVhZD5cbiAgICAgICAgPHRib2R5PlxuICAgICAgICAgICR7KHRoaXMuZGF0YUxpc3QgYXMgQXJyYXk8VD4pXG4gICAgICAgICAgICAubWFwKChkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGlzcGxheUluZm8gPSBkYXRhLmRpc3BsYXlJbmZvKCkgYXMgeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxuICAgICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICAgIDx0ciBkYXRhLWlkPVwiJHtkYXRhLmlkfVwiIGlkPVwiJHtcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPT09IFwic3R1ZGVudFwiXG4gICAgICAgICAgICAgICAgICA/IGBzdHVkZW50LSR7ZGF0YS5pZH1gXG4gICAgICAgICAgICAgICAgICA6IHRoaXMudHlwZSA9PT0gXCJjb3Vyc2VcIlxuICAgICAgICAgICAgICAgICAgPyBgY291cnNlLSR7ZGF0YS5pZH1gXG4gICAgICAgICAgICAgICAgICA6IGB0ZWFjaGVyLSR7ZGF0YS5pZH1gXG4gICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAke09iamVjdC5rZXlzKGRpc3BsYXlJbmZvKVxuICAgICAgICAgICAgICAgICAgLm1hcChrZXkgPT4gYDx0ZCBkYXRhLWluZm89XCIke2Rpc3BsYXlJbmZvW2tleV19XCI+JHtkaXNwbGF5SW5mb1trZXldfTwvdGQ+YClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgYFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICA8L3Rib2R5PlxuICAgICAgPC90YWJsZT5cbiAgICA8L2Rpdj5cbiAgICBgXG4gICAgdGhpcy5wYXJlbnRFbGVtZW50LmlubmVySFRNTCA9IGh0bWxcbiAgfVxuXG4gIHJlbmRlclJhd0h0bWwoKTogc3RyaW5nIHtcbiAgICBjb25zdCBodG1sID0gYFxuICAgIDxkaXYgY2xhc3M9XCJ0YWJsZS13cmFwcGVyIHdyYXBwZXItJHt0aGlzLnRpdGxlfVwiPlxuICAgIDx0YWJsZT5cbiAgICAgICAgPGNhcHRpb24+JHt0aGlzLnRpdGxlfTwvY2FwdGlvbj5cbiAgICAgICAgPHRoZWFkPlxuICAgICAgICAgICR7dGhpcy5zdWJUaXRsZXMubWFwKHQgPT4gYDx0aD4ke3R9PC90aD5gKS5qb2luKFwiXCIpfVxuICAgICAgICA8L3RoZWFkPlxuICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgJHsodGhpcy5kYXRhTGlzdCBhcyBBcnJheTxhbnk+KVxuICAgICAgICAgICAgLm1hcCgoZGF0YTogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlJbmZvID0gZGF0YS5kaXNwbGF5SW5mbygpIGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgICA8dHIgZGF0YS1pZD1cIiR7ZGF0YS5pZH1cIj5cbiAgICAgICAgICAgICAgICAke09iamVjdC5rZXlzKGRpc3BsYXlJbmZvKVxuICAgICAgICAgICAgICAgICAgLm1hcChrZXkgPT4gYDx0ZD4ke2Rpc3BsYXlJbmZvW2tleV19PC90ZD5gKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICBgXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgIDwvdGJvZHk+XG4gICAgICA8L3RhYmxlPlxuICAgIDwvZGl2PlxuICAgIGBcbiAgICByZXR1cm4gaHRtbFxuICB9XG5cbiAgbW91bnQoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IHRoaXMucmVuZGVyUmF3SHRtbCgpXG4gIH1cblxuICBpbml0KCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyKClcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFBlcnNvbiB7XG4gIGlkOiBudW1iZXJcbiAgZmlyc3ROYW1lOiBzdHJpbmdcbiAgbGFzdE5hbWU6IHN0cmluZ1xuICBlbWFpbDogc3RyaW5nXG4gIGFnZTogbnVtYmVyXG4gIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIGZpcnN0TmFtZTogc3RyaW5nLCBsYXN0TmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBhZ2U6IG51bWJlcikge1xuICAgIHRoaXMuaWQgPSBpZFxuICAgIHRoaXMuZmlyc3ROYW1lID0gZmlyc3ROYW1lXG4gICAgdGhpcy5sYXN0TmFtZSA9IGxhc3ROYW1lXG4gICAgdGhpcy5lbWFpbCA9IGVtYWlsXG4gICAgdGhpcy5hZ2UgPSBhZ2VcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGVyc29uIH0gZnJvbSBcIi4vUGVyc29uXCJcbmltcG9ydCB7IFN1YmplY3QsIFRlYWNoZXJTdHVkZW50Q29uc3RydWN0IH0gZnJvbSBcIi4uL3R5cGVzXCJcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gXCJuYW5vaWRcIlxuXG5leHBvcnQgY2xhc3MgVGVhY2hlciBleHRlbmRzIFBlcnNvbiBpbXBsZW1lbnRzIFRlYWNoZXJTdHVkZW50Q29uc3RydWN0IHtcbiAgc3ViamVjdHM6IFN1YmplY3RbXVxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgYWdlOiBudW1iZXIpIHtcbiAgICBzdXBlcihpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIGFnZSlcbiAgICB0aGlzLnN1YmplY3RzID0gW11cbiAgfVxuXG4gIGRpc3BsYXlJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHt0aGlzLmZpcnN0TmFtZX0tJHt0aGlzLmxhc3ROYW1lfWAsXG4gICAgICBlbWFpbDogdGhpcy5lbWFpbCxcbiAgICAgIGFnZTogYCR7dGhpcy5hZ2V9YCxcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGxvYWRUZWFjaGVycyA9ICgpID0+IFtcbiAgbmV3IFRlYWNoZXIoMSwgXCJGcmFua1wiLCBcIlNtaXRoXCIsIFwiZnJhbmtAaW8uY29tXCIsIDQzKSxcbiAgbmV3IFRlYWNoZXIoMiwgXCJMb2dhblwiLCBcIkpvbnNzb25cIiwgXCJsb2dhbkBpby5jb21cIiwgNDcpLFxuICBuZXcgVGVhY2hlcigzLCBcIk1pYVwiLCBcIkdyZWdlclwiLCBcIm1pYUBpby5jb21cIiwgNDEpLFxuICBuZXcgVGVhY2hlcig0LCBcIkJvcmlzXCIsIFwiUm9vbmV5XCIsIFwiZnJhbmtAaW8uY29tXCIsIDUzKSxcbl1cbiIsImltcG9ydCB7IExpc3RWaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL2xpc3Qtdmlld1wiXG5pbXBvcnQgeyBsb2FkVGVhY2hlcnMsIFRlYWNoZXIgfSBmcm9tIFwiLi4vbW9kZWxzL3RlYWNoZXJcIlxuXG5leHBvcnQgY2xhc3MgVGVhY2hlckNvbnRyb2xsZXIge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICB0ZWFjaGVyc1ZpZXc6IExpc3RWaWV3PFRlYWNoZXI+XG4gIGNvbnN0cnVjdG9yKHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudFxuICAgIHRoaXMudGVhY2hlcnNWaWV3ID0gbmV3IExpc3RWaWV3KFxuICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LFxuICAgICAgbG9hZFRlYWNoZXJzKCksXG4gICAgICBcIlRlYWNoZXJzXCIsXG4gICAgICBbXCJuYW1lXCIsIFwiZW1haWxcIiwgXCJhZ2VcIl0sXG4gICAgICBcInRlYWNoZXJcIixcbiAgICApXG4gIH1cblxuICBpbml0KCk6IHZvaWQge1xuICAgIHRoaXMudGVhY2hlcnNWaWV3LmluaXQoKVxuICB9XG59XG4iLCJpbXBvcnQgeyBDb3Vyc2UgfSBmcm9tIFwiLi9jb3Vyc2VcIlxuaW1wb3J0IHsgU3R1ZGVudCB9IGZyb20gXCIuL3N0dWRlbnRcIlxuXG5jbGFzcyBBZG1pbiB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBBZG1pblxuICBpZDogbnVtYmVyXG4gIG5hbWU6IHN0cmluZ1xuICBzbHVnOiBzdHJpbmdcbiAgaXNBZG1pbjogYm9vbGVhblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmlkID0gMVxuICAgIHRoaXMubmFtZSA9IFwiQWxmcmVkXCJcbiAgICB0aGlzLnNsdWcgPSBcIkkgYW0gdGhlIGJvc3Mg8J+SsCEhIVwiXG4gICAgdGhpcy5pc0FkbWluID0gdHJ1ZVxuICB9XG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICBpZiAoIUFkbWluLmluc3RhbmNlKSB7XG4gICAgICBBZG1pbi5pbnN0YW5jZSA9IG5ldyBBZG1pbigpXG4gICAgfVxuICAgIHJldHVybiBBZG1pbi5pbnN0YW5jZVxuICB9XG4gIHJlY2VpdmUobWVzc2FnZTogc3RyaW5nLCBmcm9tOiBTdHVkZW50KTogc3RyaW5nIHtcbiAgICBjb25zdCBzdHVkZW50UmVnaXN0cmVkRm9yQ291cnNlTWVzc2FnZSA9IGBTdHVkZW50ICR7ZnJvbS5maXJzdE5hbWV9ICR7bWVzc2FnZX1gXG4gICAgY29uc29sZS5sb2coc3R1ZGVudFJlZ2lzdHJlZEZvckNvdXJzZU1lc3NhZ2UpXG4gICAgcmV0dXJuIHN0dWRlbnRSZWdpc3RyZWRGb3JDb3Vyc2VNZXNzYWdlXG4gIH1cbn1cblxuY29uc3QgbG9hZEFkbWluID0gKCkgPT4gbmV3IEFkbWluKClcblxuZXhwb3J0IHsgQWRtaW4sIGxvYWRBZG1pbiB9XG4iLCJpbXBvcnQgeyBBZG1pbiwgbG9hZEFkbWluIH0gZnJvbSBcIi4vYWRtaW5cIlxuaW1wb3J0IHsgQ291cnNlIH0gZnJvbSBcIi4vY291cnNlXCJcbmltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi9zdHVkZW50XCJcblxuY2xhc3MgQWRtaW5NZWRpYXRvciB7XG4gIHN0dWRlbnRzOiBSZWNvcmQ8c3RyaW5nLCBTdHVkZW50PlxuICBhZG1pbjogQWRtaW5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdHVkZW50cyA9IHt9XG4gICAgdGhpcy5hZG1pbiA9IGxvYWRBZG1pbigpXG4gIH1cbiAgcmVnaXN0ZXJTdHVkZW50KHN0dWRlbnQ6IFN0dWRlbnQpIHtcbiAgICB0aGlzLnN0dWRlbnRzW3N0dWRlbnQuZmlyc3ROYW1lXSA9IHN0dWRlbnRcbiAgICBzdHVkZW50LmFkbWluTWVkaWF0b3IgPSB0aGlzXG4gIH1cblxuICBzZW5kKG1lc3NhZ2U6IHN0cmluZywgZnJvbTogU3R1ZGVudCwgdG8/OiBTdHVkZW50LCBhZG1pbj86IEFkbWluKSB7XG4gICAgaWYgKHRvICYmIGFkbWluKSB7XG4gICAgICB0by5yZWNlaXZlKG1lc3NhZ2UsIGZyb20pXG4gICAgICBhZG1pbj8ucmVjZWl2ZShtZXNzYWdlLCBmcm9tKVxuICAgIH0gZWxzZSB7XG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnN0dWRlbnRzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnN0dWRlbnRzW2tleV0gIT09IGZyb20pIHtcbiAgICAgICAgICB0aGlzLnN0dWRlbnRzW2tleV0ucmVjZWl2ZShtZXNzYWdlLCBmcm9tKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuXG4vLyBjbGFzcyBTdHVkZW50TWVkaWF0b3Ige1xuLy8gICBzdHVkZW50czogUmVjb3JkPHN0cmluZywgU3R1ZGVudD5cbi8vICAgY29uc3RydWN0b3IoKSB7XG4vLyAgICAgdGhpcy5zdHVkZW50cyA9IHt9XG4vLyAgIH1cblxuLy8gICByZWdpc3RlclN0dWRlbnQoc3R1ZGVudDogU3R1ZGVudCkge1xuLy8gICAgIHRoaXMuc3R1ZGVudHNbc3R1ZGVudC5maXJzdE5hbWVdID0gc3R1ZGVudFxuLy8gICAgIHN0dWRlbnQuYWRtaW5NZWRpYXRvciA9IHRoaXNcbi8vICAgfVxuXG4vLyAgIHNlbmQobWVzc2FnZTogc3RyaW5nLCBmcm9tOiBTdHVkZW50LCB0bz86IFN0dWRlbnQpIHtcbi8vICAgICBpZiAodG8pIHtcbi8vICAgICAgIHRvLnJlY2VpdmUobWVzc2FnZSwgZnJvbSlcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgT2JqZWN0LmtleXModGhpcy5zdHVkZW50cykuZm9yRWFjaChrZXkgPT4ge1xuLy8gICAgICAgICBpZiAodGhpcy5zdHVkZW50c1trZXldICE9PSBmcm9tKSB7XG4vLyAgICAgICAgICAgdGhpcy5zdHVkZW50c1trZXldLnJlY2VpdmUobWVzc2FnZSwgZnJvbSlcbi8vICAgICAgICAgfVxuLy8gICAgICAgfSlcbi8vICAgICB9XG4vLyAgIH1cbi8vIH1cbi8vIGNsYXNzIENvdXJzZU1lZGlhdG9yIHtcbi8vICAgY291cnNlczogUmVjb3JkPHN0cmluZywgQ291cnNlPlxuLy8gICBjb25zdHJ1Y3RvcigpIHtcbi8vICAgICB0aGlzLmNvdXJzZXMgPSB7fVxuLy8gICB9XG5cbi8vICAgcmVnaXN0ZXJDb3Vyc2UoY291cnNlOiBDb3Vyc2UpIHtcbi8vICAgICB0aGlzLmNvdXJzZXNbY291cnNlLnRpdGxlXSA9IGNvdXJzZVxuLy8gICAgIGNvdXJzZS5jb3Vyc2VNZWRpYXRvciA9IHRoaXNcbi8vICAgfVxuXG4vLyAgIHNlbmQobWVzc2FnZTogc3RyaW5nLCBmcm9tOiBDb3Vyc2UsIHRvPzogQ291cnNlKSB7XG4vLyAgICAgLy9cbi8vICAgfVxuLy8gfVxuXG5leHBvcnQgeyBBZG1pbk1lZGlhdG9yIH1cbiIsImltcG9ydCB7IEFkbWluIH0gZnJvbSBcIi4vYWRtaW5cIlxuaW1wb3J0IHsgQWRtaW5NZWRpYXRvciB9IGZyb20gXCIuL21lZGlhdG9yXCJcbmltcG9ydCB7IFBlcnNvbiB9IGZyb20gXCIuL1BlcnNvblwiXG5cbmNsYXNzIFN0dWRlbnQgZXh0ZW5kcyBQZXJzb24ge1xuICBhZG1pbk1lZGlhdG9yOiBudWxsIHwgQWRtaW5NZWRpYXRvclxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgYWdlOiBudW1iZXIpIHtcbiAgICBzdXBlcihpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwsIGFnZSlcbiAgICB0aGlzLmFkbWluTWVkaWF0b3IgPSBudWxsXG4gIH1cbiAgZGlzcGxheUluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGAke3RoaXMuZmlyc3ROYW1lfS0ke3RoaXMubGFzdE5hbWV9YCxcbiAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLFxuICAgICAgYWdlOiBgJHt0aGlzLmFnZX1gLFxuICAgIH1cbiAgfVxuICBzZW5kKG1lc3NhZ2U6IHN0cmluZywgdG8/OiBTdHVkZW50LCBhZG1pbj86IEFkbWluKSB7XG4gICAgdGhpcy5hZG1pbk1lZGlhdG9yPy5zZW5kKG1lc3NhZ2UsIHRoaXMsIHRvLCBhZG1pbilcbiAgfVxuICByZWNlaXZlKG1lc3NhZ2U6IHN0cmluZywgZnJvbTogU3R1ZGVudCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke21lc3NhZ2V9IC0gZnJvbSAke2Zyb219YFxuICB9XG59XG5cbmNvbnN0IGFkbWluTWVkaWF0b3IgPSBuZXcgQWRtaW5NZWRpYXRvcigpXG5cbmNvbnN0IGxvYWRTdHVkZW50cyA9ICgpID0+IFtcbiAgbmV3IFN0dWRlbnQoMSwgXCJGcmFua1wiLCBcIk1lbGxiZXJnXCIsIFwiZnJhbmtAaW8uY29tXCIsIDIxKSxcbiAgbmV3IFN0dWRlbnQoMiwgXCJSaW9cIiwgXCJGZXJkaW5hbmRcIiwgXCJyaW9AaW8uY29tXCIsIDI1KSxcbiAgbmV3IFN0dWRlbnQoMywgXCJOZW1hbmphXCIsIFwiVmlkaWNcIiwgXCJuZW1hbmphQGlvLmNvbVwiLCAzMiksXG4gIG5ldyBTdHVkZW50KDQsIFwiRnJlZHJpa1wiLCBcImxqdW5nYmVyZ1wiLCBcImZyZWRyaWtAaW8uY29tXCIsIDMyKSxcbl1cblxuY29uc3QgcmVnaXN0ZXJBbGxTdHVkZW50cyA9ICgpOiB2b2lkID0+IHtcbiAgZm9yIChsZXQgc3R1ZGVudCBvZiBsb2FkU3R1ZGVudHMoKSkge1xuICAgIGFkbWluTWVkaWF0b3IucmVnaXN0ZXJTdHVkZW50KHN0dWRlbnQpXG4gIH1cbn1cblxuZXhwb3J0IHsgU3R1ZGVudCwgbG9hZFN0dWRlbnRzLCBhZG1pbk1lZGlhdG9yLCByZWdpc3RlckFsbFN0dWRlbnRzIH1cbiIsImltcG9ydCB7IEFkbWluLCBsb2FkQWRtaW4gfSBmcm9tIFwiLi4vbW9kZWxzL2FkbWluXCJcbmltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi4vbW9kZWxzL3N0dWRlbnRcIlxuaW1wb3J0IHsgVGVhY2hlciB9IGZyb20gXCIuLi9tb2RlbHMvdGVhY2hlclwiXG5pbXBvcnQgeyBMaXN0VmlldyB9IGZyb20gXCIuL2xpc3Qtdmlld1wiXG5cbmV4cG9ydCBjbGFzcyBNb2RhbFZpZXc8VD4ge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBsaXN0OiBBcnJheTxhbnk+XG4gIGRhdGE6IFN0dWRlbnQgfCBUZWFjaGVyXG4gIHRpdGxlOiBzdHJpbmdcbiAgbGlzdFZpZXc6IExpc3RWaWV3PFQ+XG4gIHN1YlRpdGxlczogc3RyaW5nW11cbiAgY29uZmlybWF0aW9uVGV4dDogc3RyaW5nXG4gIGFkbWluOiBBZG1pblxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LFxuICAgIGxpc3Q6IGFueSxcbiAgICBkYXRhOiBTdHVkZW50IHwgVGVhY2hlcixcbiAgICB0aXRsZTogc3RyaW5nLFxuICAgIHN1YlRpdGxlczogc3RyaW5nW10sXG4gICkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLmxpc3QgPSBsaXN0XG4gICAgdGhpcy5kYXRhID0gZGF0YVxuICAgIHRoaXMudGl0bGUgPSB0aXRsZVxuICAgIHRoaXMuc3ViVGl0bGVzID0gc3ViVGl0bGVzXG4gICAgdGhpcy5saXN0VmlldyA9IG5ldyBMaXN0VmlldyhcbiAgICAgIHRoaXMucGFyZW50RWxlbWVudCxcbiAgICAgIHRoaXMubGlzdCxcbiAgICAgIHRoaXMudGl0bGUsXG4gICAgICB0aGlzLnN1YlRpdGxlcyxcbiAgICAgIFwic3R1ZGVudFwiLFxuICAgIClcbiAgICB0aGlzLmNvbmZpcm1hdGlvblRleHQgPSBcIlwiXG4gICAgdGhpcy5hZG1pbiA9IGxvYWRBZG1pbigpXG4gIH1cblxuICB1cGRhdGVUZXh0KHRleHQ6IHN0cmluZykge1xuICAgIGNvbnNvbGUubG9nKFwiVEVYVFwiLCB0ZXh0KVxuICAgIHRoaXMuY29uZmlybWF0aW9uVGV4dCA9IHRleHRcbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICBjb25zdCBtb2RhbFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpIGFzIEhUTUxETGlzdEVsZW1lbnRcbiAgICBtb2RhbFdyYXBwZXIuY2xhc3NMaXN0LmFkZChcInNob3ctbW9kYWxcIilcblxuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRhaW5lclwiPlxuICAgICAgJHt0aGlzLmxpc3RWaWV3LnJlbmRlclJhd0h0bWwoKX1cbiAgICAgICR7dGhpcy5jb25maXJtYXRpb25UZXh0fVxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImNsb3NlLW1vZGFsXCI+XG4gICAgICAgIOKdjFxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gICAgYFxuXG4gICAgbW9kYWxXcmFwcGVyLmlubmVySFRNTCA9IGh0bWxcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlLW1vZGFsXCIpPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgbW9kYWxXcmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LW1vZGFsXCIpXG4gICAgICBtb2RhbFdyYXBwZXIuaW5uZXJIVE1MID0gXCJcIlxuICAgIH0pXG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsIHRib2R5IHRyXCIpLmZvckVhY2goKHRyOiBhbnkpID0+IHtcbiAgICAgIHRyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoXCJzZW5kXCIgaW4gdGhpcy5kYXRhKSB7XG4gICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uVGV4dCA9IGBZb3UgaGF2ZSBub3cgYmVlbiByZWdpc3RlcmVkIHRvIHRoZSAke2V2ZW50LnRhcmdldC5pbm5lclRleHR9IENvdXJzZWBcbiAgICAgICAgICB0aGlzLmRhdGEuc2VuZChjb25maXJtYXRpb25UZXh0LCB0aGlzLmRhdGEsIHRoaXMuYWRtaW4pIC8vIHNlbmRpbmcgZnJvbSB0aGlzIHN0dWRlbnQsIHRvIGl0c2VsZiBhbmQgdG8gYWRtaW5cbiAgICAgICAgICB0aGlzLnVwZGF0ZVRleHQoY29uZmlybWF0aW9uVGV4dClcbiAgICAgICAgICB0aGlzLnVwZGF0ZUh0bWwoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cbiAgdXBkYXRlSHRtbCgpIHtcbiAgICB0aGlzLnJlbmRlcigpXG4gIH1cbn1cbiIsImltcG9ydCB7IERpc3BsYXlJbmZvIH0gZnJvbSBcIi4uL3R5cGVzXCJcbmNsYXNzIENvdXJzZSB7XG4gIGlkOiBudW1iZXJcbiAgdGl0bGU6IHN0cmluZ1xuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gIGR1cmF0aW9uOiBzdHJpbmdcblxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCB0aXRsZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBkdXJhdGlvbjogc3RyaW5nKSB7XG4gICAgdGhpcy5pZCA9IGlkXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uXG4gICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uXG4gIH1cblxuICBkaXNwbGF5SW5mbygpOiBEaXNwbGF5SW5mbyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLFxuICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb24sXG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGxvYWRDb3Vyc2VzID0gKCk6IENvdXJzZVtdID0+IFtcbiAgbmV3IENvdXJzZSgxLCBcIm1hdGhcIiwgXCJtYXRoIGlzIHdvbmRlcmZ1bFwiLCBcIjZoXCIpLFxuICBuZXcgQ291cnNlKDIsIFwiaGlzdG9yeVwiLCBcImhpc3RvcnkgaXMgZ29vZCBmb3IgeW91XCIsIFwiM2hcIiksXG4gIG5ldyBDb3Vyc2UoMywgXCJzd2VkaXNoXCIsIFwid2l0aG91dCBzd2VkaXNoIHlvdSB3aWxsIGZhY2Ugc29tZSBzZXJpb3VzIHByb2JsZW1zXCIsIFwiMmhcIiksXG4gIG5ldyBDb3Vyc2UoNCwgXCJlbmdsaXNoXCIsIFwidGhlIGdsb2JhbCBsYW5ndWFnZSwgbGVhcm4gaXQgTk9XISEhXCIsIFwiNWhcIiksXG5dXG5cbmV4cG9ydCB7IENvdXJzZSwgbG9hZENvdXJzZXMgfVxuIiwiaW1wb3J0IHsgbG9hZFN0dWRlbnRzLCBTdHVkZW50LCByZWdpc3RlckFsbFN0dWRlbnRzLCBhZG1pbk1lZGlhdG9yIH0gZnJvbSBcIi4uL21vZGVscy9zdHVkZW50XCJcbmltcG9ydCB7IExpc3RWaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL2xpc3Qtdmlld1wiXG5pbXBvcnQgeyBNb2RhbFZpZXcgYXMgQ291cnNlc01vZGFsVmlldyB9IGZyb20gXCIuLi92aWV3cy9tb2RhbC12aWV3XCJcbmltcG9ydCB7IGxvYWRDb3Vyc2VzIH0gZnJvbSBcIi4uL21vZGVscy9jb3Vyc2VcIlxuaW1wb3J0IHsgUHJvZmlsZVZpZXcgfSBmcm9tIFwiLi4vdmlld3MvcHJvZmlsZS12aWV3XCJcblxuZXhwb3J0IGNsYXNzIFN0dWRlbnRDb250cm9sbGVyIHtcbiAgcGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnRcbiAgc3R1ZGVudHNWaWV3OiBMaXN0VmlldzxTdHVkZW50PlxuICBjb25zdHJ1Y3RvcihwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudCkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLnN0dWRlbnRzVmlldyA9IG5ldyBMaXN0VmlldyhcbiAgICAgIHRoaXMucGFyZW50RWxlbWVudCxcbiAgICAgIGxvYWRTdHVkZW50cygpLFxuICAgICAgXCJTdHVkZW50c1wiLFxuICAgICAgW1wibmFtZVwiLCBcImVtYWlsXCIsIFwiYWdlXCJdLFxuICAgICAgXCJzdHVkZW50XCIsXG4gICAgKVxuICB9XG5cbiAgaGFuZGxlQ2xpY2tTdHVkZW50KCk6IHZvaWQge1xuICAgIHRoaXMuc3R1ZGVudHNWaWV3LmNsaWNrSGFuZGxlcigoaWQ6IG51bWJlcikgPT4ge1xuICAgICAgY29uc3Qgc3R1ZGVudCA9IGxvYWRTdHVkZW50cygpLmZpbmQoc3R1ZGVudCA9PiBzdHVkZW50LmlkID09PSBpZClcbiAgICAgIGNvbnN0IGRhdGEgPSBzdHVkZW50ISBhcyBTdHVkZW50XG4gICAgICBjb25zdCBjb3Vyc2VzID0gbG9hZENvdXJzZXMoKVxuICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWxpc3RcIikgYXMgSFRNTERpdkVsZW1lbnRcbiAgICAgIG5ldyBDb3Vyc2VzTW9kYWxWaWV3PGFueVtdPihtb2RhbCwgY291cnNlcywgZGF0YSwgXCJjb3Vyc2VzXCIsIFtcInRpdGxlXCIsIFwiZHVyYXRpb25cIl0pLnJlbmRlcigpXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZVNob3dQcm9maWxlKCk6IHZvaWQge1xuICAgIC8vIHRoaXMucHJvZmlsZVZpZXcuY2xpY2tIYW5kbGVyKChpZDogbnVtYmVyKSA9PiB7XG4gICAgLy8gICBjb25zdCBzdHVkZW50ID0gbG9hZFN0dWRlbnRzKCkuZmluZChzdHVkZW50ID0+IHN0dWRlbnQuaWQgPT09IGlkKVxuICAgIC8vICAgY29uc3QgZGF0YSA9IHN0dWRlbnQhIGFzIFN0dWRlbnRcbiAgICAvLyAgIGNvbnN0IGNvdXJzZXMgPSBsb2FkQ291cnNlcygpXG4gICAgLy8gICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtbGlzdFwiKSBhcyBIVE1MRGl2RWxlbWVudFxuICAgIC8vICAgY29uc29sZS5sb2coXCJtb2RhbFwiLCBtb2RhbClcbiAgICAvLyB9KVxuICB9XG5cbiAgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0dWRlbnRzVmlldy5pbml0KClcbiAgICB0aGlzLmhhbmRsZUNsaWNrU3R1ZGVudCgpXG4gICAgcmVnaXN0ZXJBbGxTdHVkZW50cygpXG4gICAgdGhpcy5oYW5kbGVTaG93UHJvZmlsZSgpXG4gICAgLy8gY29uc29sZS5sb2coXCJhZG1pbk1lZGlhdG9yXCIsIGFkbWluTWVkaWF0b3IpIC8vIWZvciB0ZXN0aW5nIVxuICB9XG59XG4iLCJpbXBvcnQgeyBBZG1pbiwgbG9hZEFkbWluIH0gZnJvbSBcIi4uL21vZGVscy9hZG1pblwiXG5cbmV4cG9ydCBjbGFzcyBBZG1pblZpZXcge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBhZG1pbjogQWRtaW5cbiAgY29uc3RydWN0b3IocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50XG4gICAgdGhpcy5hZG1pbiA9IGxvYWRBZG1pbigpXG4gIH1cblxuICByZW5kZXIoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJhZG1pblwiLCB0aGlzLmFkbWluLCB0aGlzLnBhcmVudEVsZW1lbnQpXG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJhZG1pbi13cmFwcGVyIHdyYXBwZXItJHt0aGlzLmFkbWluLm5hbWV9XCI+XG4gICAgICAgIDxidXR0b24gaWQ9XCJhZG1pbi1wcm9maWxlLWJ0blwiIGNsYXNzPVwiYnV0dG9uXCI+QWRtaW4gUHJvZmlsZTwvYnV0dG9uPlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJhZG1pbi1jb250ZW50XCI+XG4gICAgICAgICAgPGgzPiBNciBBZG1pbiAke3RoaXMuYWRtaW4ubmFtZX08L2gzPlxuICAgICAgICAgIDxwPiR7dGhpcy5hZG1pbi5zbHVnfTwvcD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgIDwvZGl2PlxuICAgIGBcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbFxuXG4gICAgY29uc3QgYWRtaW5Db250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZG1pbi1jb250ZW50XCIpIGFzIEhUTUxEaXZFbGVtZW50XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZG1pbi1wcm9maWxlLWJ0blwiKT8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGFkbWluQ29udGVudC5jbGFzc0xpc3QudG9nZ2xlKFwic2hvdy1hZG1pbi1jb250ZW50XCIpXG4gICAgfSlcbiAgfVxufVxuIiwiaW1wb3J0IHsgQWRtaW5WaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL2FkbWluLXZpZXdcIlxuXG5leHBvcnQgY2xhc3MgQWRtaW5Db250cm9sbGVyIHtcbiAgcGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnRcbiAgYWRtaW5WaWV3OiBBZG1pblZpZXdcbiAgY29uc3RydWN0b3IocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50XG4gICAgdGhpcy5hZG1pblZpZXcgPSBuZXcgQWRtaW5WaWV3KHRoaXMucGFyZW50RWxlbWVudClcbiAgfVxuXG4gIGluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5hZG1pblZpZXcucmVuZGVyKClcbiAgfVxufVxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL2FwcFwiXG5pbXBvcnQgeyBUZWFjaGVyQ29udHJvbGxlciB9IGZyb20gXCIuL3BhdHRlcm5zL212YzIuMC9jb250cm9sbGVycy90ZWFjaGVyXCJcbmltcG9ydCB7IFN0dWRlbnRDb250cm9sbGVyIH0gZnJvbSBcIi4vcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3N0dWRlbnRcIlxuaW1wb3J0IHsgQWRtaW5Db250cm9sbGVyIH0gZnJvbSBcIi4vcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL2FkbWluXCJcbjsoKCkgPT4ge1xuICBuZXcgQXBwKFxuICAgIG5ldyBUZWFjaGVyQ29udHJvbGxlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlYWNoZXJcIikgYXMgSFRNTERpdkVsZW1lbnQpLFxuICAgIG5ldyBTdHVkZW50Q29udHJvbGxlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0dWRlbnRcIikgYXMgSFRNTERpdkVsZW1lbnQpLFxuICAgIG5ldyBBZG1pbkNvbnRyb2xsZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZG1pblwiKSBhcyBIVE1MRGl2RWxlbWVudCksXG4gICkucmVuZGVyKClcbn0pKClcbiJdLCJzb3VyY2VSb290IjoiIn0=