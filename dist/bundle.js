(()=>{"use strict";var t,n=function(){function t(t,n,e){this.teacher=t,this.students=n,this.admin=e}return t.prototype.render=function(){this.teacher.init(),this.admin.init(),this.students.init()},t}(),e=function(){function t(t,n,e,i,o){this.parentElement=t,this.dataList=n,this.title=e,this.subTitles=i,this.type=o}return t.prototype.clickHandler=function(t){document.querySelectorAll("tr").forEach((function(n){return n.addEventListener("click",(function(){"student"===n.id.split("-")[0]&&t(parseInt(n.dataset.id,10))}))}))},t.prototype.render=function(){var t=this,n='\n    <div class="table-wrapper wrapper-'+this.title+'">\n    <table class="'+this.title+'">\n        <caption>'+this.title+"</caption>\n        <thead>\n          "+this.subTitles.map((function(t){return"<th>"+t+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+this.dataList.map((function(n){var e=n.displayInfo();return'\n                <tr data-id="'+n.id+'" id="'+("student"===t.type?"student-"+n.id:"course"===t.type?"course-"+n.id:"teacher-"+n.id)+'">\n                '+Object.keys(e).map((function(t){return'<td data-info="'+e[t]+'">'+e[t]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    ";this.parentElement.innerHTML=n},t.prototype.renderRawHtml=function(){return'\n    <div class="table-wrapper wrapper-'+this.title+'">\n    <table>\n        <caption>'+this.title+"</caption>\n        <thead>\n          "+this.subTitles.map((function(t){return"<th>"+t+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+this.dataList.map((function(t){var n=t.displayInfo();return'\n                <tr data-id="'+t.id+'">\n                '+Object.keys(n).map((function(t){return"<td>"+n[t]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    "},t.prototype.mount=function(t){t.innerHTML=this.renderRawHtml()},t.prototype.init=function(){this.render()},t}(),i=function(t,n,e,i,o){this.id=t,this.firstName=n,this.lastName=e,this.email=i,this.age=o},o=(t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)},function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=function(t){function n(n,e,i,o,r){var s=t.call(this,n,e,i,o,r)||this;return s.subjects=[],s}return o(n,t),n.prototype.displayInfo=function(){return{name:this.firstName+"-"+this.lastName,email:this.email,age:""+this.age}},Object.defineProperty(n.prototype,"addSubject",{set:function(t){this.subjects.push(t)},enumerable:!1,configurable:!0}),n}(i),s=function(){function t(t){this.parentElement=t,this.teachersView=new e(this.parentElement,[new r(1,"Frank","Smith","frank@io.com",43),new r(2,"Logan","Jonsson","logan@io.com",47),new r(3,"Mia","Greger","mia@io.com",41),new r(4,"Boris","Rooney","frank@io.com",53)],"Teachers",["name","email","age"],"teacher")}return t.prototype.init=function(){this.teachersView.init()},t}(),a=function(){function t(){this.id=99,this.firstName="Alfred",this.slug="I am the boss üí∞!!!",this.isAdmin=!0,this.messageBox=[],this.adminMediator=null}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.receive=function(t,n){var e="Student "+n.firstName+" "+t;return console.log(e),this.messageBox.push(t),e},Object.defineProperty(t.prototype,"messages",{get:function(){if(0===this.messageBox.length)return"message box empty!";for(var t="",n=0,e=this.messageBox;n<e.length;n++)t+=" --- "+e[n]+" ---";return t},enumerable:!1,configurable:!0}),t}(),c=function(){return new a},u=function(){function t(){this.collection={},this.admin=c()}return t.prototype.register=function(t){this.collection[t.firstName]=t,t.adminMediator=this},t.prototype.send=function(t,n,e,i){var o=this;e&&i?(console.log("if"),e.receive(t,n)):(console.log("else"),Object.keys(this.collection).forEach((function(e){o.collection[e]!==n&&o.collection[e].receive(t,n)})))},t}(),l=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),d=function(t){function n(n,e,i,o,r){var s=t.call(this,n,e,i,o,r)||this;return s.adminMediator=null,s}return l(n,t),n.prototype.displayInfo=function(){return{name:this.firstName+"-"+this.lastName,email:this.email,age:""+this.age}},n.prototype.send=function(t,n,e){var i;null===(i=this.adminMediator)||void 0===i||i.send(t,this,n,e)},n.prototype.receive=function(t,n){return t+" - from "+n},n}(i),h=new u,p=function(){return[new d(1,"Frank","Mellberg","frank@io.com",21),new d(2,"Rio","Ferdinand","rio@io.com",25),new d(3,"Nemanja","Vidic","nemanja@io.com",32),new d(4,"Fredrik","ljungberg","fredrik@io.com",32)]},f=function(){function t(t,n,i,o,r){this.parentElement=t,this.list=n,this.data=i,this.title=o,this.subTitles=r,this.listView=new e(this.parentElement,this.list,this.title,this.subTitles,"student"),this.confirmationText="",this.admin=c()}return t.prototype.updateText=function(t){console.log("TEXT",t),this.confirmationText=t},t.prototype.render=function(){var t,n=this,e=document.querySelector(".modal");e.classList.add("show-modal");var i='\n    <div class="modal-container">\n      '+this.listView.renderRawHtml()+"\n      "+this.confirmationText+'\n      <button class="close-modal">\n        ‚ùå\n      </button>\n    </div>\n    ';e.innerHTML=i,null===(t=document.querySelector(".close-modal"))||void 0===t||t.addEventListener("click",(function(){e.classList.remove("show-modal"),e.innerHTML=""})),document.querySelectorAll(".modal tbody tr").forEach((function(t){t.addEventListener("click",(function(t){if("send"in n.data){var e="You have now been registered to the "+t.target.innerText+" Course";n.data.send(e,n.data,n.admin),n.updateText(e),n.updateHtml()}}))}))},t.prototype.updateHtml=function(){this.render()},t}(),m=function(){function t(t,n,e,i){this.id=t,this.title=n,this.description=e,this.duration=i}return t.prototype.displayInfo=function(){return{title:this.title,duration:this.duration}},t}(),y=function(){function t(t){this.parentElement=t,this.studentsView=new e(this.parentElement,p(),"Students",["name","email","age"],"student")}return t.prototype.handleClickStudent=function(){this.studentsView.clickHandler((function(t){var n=p().find((function(n){return n.id===t})),e=[new m(1,"math","math is wonderful","6h"),new m(2,"history","history is good for you","3h"),new m(3,"swedish","without swedish you will face some serious problems","2h"),new m(4,"english","the global language, learn it NOW!!!","5h")],i=document.querySelector(".modal-list");new f(i,e,n,"courses",["title","duration"]).render()}))},t.prototype.handleShowProfile=function(){},t.prototype.init=function(){this.studentsView.init(),this.handleClickStudent(),function(){for(var t=0,n=p();t<n.length;t++){var e=n[t];h.register(e)}h.register(c())}(),this.handleShowProfile(),console.log("adminMediator",h)},t}(),w=function(){function t(t){this.parentElement=t,this.admin=c()}return t.prototype.render=function(){var t,n=this;console.log("admin",this.admin,this.parentElement);var e='\n      <div class="admin-wrapper wrapper-'+this.admin.firstName+'">\n        <button id="admin-profile-btn" class="button">Admin Profile</button>\n\n        <div class="admin-content">\n          <h3> Mr Admin '+this.admin.firstName+"</h3>\n          <p>"+this.admin.slug+"</p>\n        </div>\n\n      </div>\n    ";this.parentElement.innerHTML=e;var i=document.querySelector(".admin-content");null===(t=document.getElementById("admin-profile-btn"))||void 0===t||t.addEventListener("click",(function(){i.classList.toggle("show-admin-content"),console.log(n.admin.messages)}))},t}(),g=function(){function t(t){this.parentElement=t,this.adminView=new w(this.parentElement)}return t.prototype.init=function(){this.adminView.render()},t}();new n(new s(document.getElementById("teacher")),new y(document.getElementById("student")),new g(document.getElementById("admin"))).render()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvYXBwLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212YzIuMC92aWV3cy9saXN0LXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9QZXJzb24udHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy90ZWFjaGVyLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212YzIuMC9jb250cm9sbGVycy90ZWFjaGVyLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212YzIuMC9tb2RlbHMvYWRtaW4udHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9tZWRpYXRvci50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvbW9kZWxzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL3ZpZXdzL21vZGFsLXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9jb3Vyc2UudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL3ZpZXdzL2FkbWluLXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL2FkbWluLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL2luZGV4LnRzIl0sIm5hbWVzIjpbInRlYWNoZXIiLCJzdHVkZW50cyIsImFkbWluIiwidGhpcyIsInJlbmRlciIsImluaXQiLCJwYXJlbnRFbGVtZW50IiwiZGF0YUxpc3QiLCJ0aXRsZSIsInN1YlRpdGxlcyIsInR5cGUiLCJjbGlja0hhbmRsZXIiLCJzdWJzY3JpYmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInRyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImlkIiwic3BsaXQiLCJwYXJzZUludCIsImRhdGFzZXQiLCJodG1sIiwibWFwIiwidCIsImpvaW4iLCJkYXRhIiwiZGlzcGxheUluZm8iLCJPYmplY3QiLCJrZXlzIiwia2V5IiwiaW5uZXJIVE1MIiwicmVuZGVyUmF3SHRtbCIsIm1vdW50IiwiZWxlbWVudCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZW1haWwiLCJhZ2UiLCJzdWJqZWN0cyIsIm5hbWUiLCJzdWJqZWN0IiwicHVzaCIsIlBlcnNvbiIsInRlYWNoZXJzVmlldyIsIkxpc3RWaWV3IiwiVGVhY2hlciIsInNsdWciLCJpc0FkbWluIiwibWVzc2FnZUJveCIsImFkbWluTWVkaWF0b3IiLCJnZXRJbnN0YW5jZSIsIkFkbWluIiwiaW5zdGFuY2UiLCJyZWNlaXZlIiwibWVzc2FnZSIsImZyb20iLCJzdHVkZW50UmVnaXN0cmVkRm9yQ291cnNlTWVzc2FnZSIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJzdHIiLCJsb2FkQWRtaW4iLCJjb2xsZWN0aW9uIiwicmVnaXN0ZXIiLCJodW1hbiIsInNlbmQiLCJ0byIsIkFkbWluTWVkaWF0b3IiLCJsb2FkU3R1ZGVudHMiLCJTdHVkZW50IiwibGlzdCIsImxpc3RWaWV3IiwiY29uZmlybWF0aW9uVGV4dCIsInVwZGF0ZVRleHQiLCJ0ZXh0IiwibW9kYWxXcmFwcGVyIiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImV2ZW50IiwidGFyZ2V0IiwiaW5uZXJUZXh0IiwidXBkYXRlSHRtbCIsImRlc2NyaXB0aW9uIiwiZHVyYXRpb24iLCJzdHVkZW50c1ZpZXciLCJoYW5kbGVDbGlja1N0dWRlbnQiLCJmaW5kIiwic3R1ZGVudCIsImNvdXJzZXMiLCJDb3Vyc2UiLCJtb2RhbCIsImhhbmRsZVNob3dQcm9maWxlIiwicmVnaXN0ZXJBbGxTdHVkZW50cyIsImFkbWluQ29udGVudCIsImdldEVsZW1lbnRCeUlkIiwidG9nZ2xlIiwibWVzc2FnZXMiLCJhZG1pblZpZXciLCJBZG1pblZpZXciLCJBcHAiLCJUZWFjaGVyQ29udHJvbGxlciIsIlN0dWRlbnRDb250cm9sbGVyIiwiQWRtaW5Db250cm9sbGVyIl0sIm1hcHBpbmdzIjoibUJBSUEsSSxFQUFBLGFBSUUsV0FBWUEsRUFBNEJDLEVBQTZCQyxHQUNuRUMsS0FBS0gsUUFBVUEsRUFDZkcsS0FBS0YsU0FBV0EsRUFDaEJFLEtBQUtELE1BQVFBLEVBUWpCLE9BTEUsWUFBQUUsT0FBQSxXQUNFRCxLQUFLSCxRQUFRSyxPQUNiRixLQUFLRCxNQUFNRyxPQUNYRixLQUFLRixTQUFTSSxRQUVsQixFQWZBLEdDREEsYUFNRSxXQUNFQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxHQUVBUCxLQUFLRyxjQUFnQkEsRUFDckJILEtBQUtJLFNBQVdBLEVBQ2hCSixLQUFLSyxNQUFRQSxFQUNiTCxLQUFLTSxVQUFZQSxFQUNqQk4sS0FBS08sS0FBT0EsRUFxRmhCLE9BbEZFLFlBQUFDLGFBQUEsU0FBYUMsR0FDQ0MsU0FBU0MsaUJBQWlCLE1BQ2xDQyxTQUFRLFNBQUFDLEdBQ1YsT0FBQUEsRUFBR0MsaUJBQWlCLFNBQVMsV0FFZCxZQURFRCxFQUFHRSxHQUFHQyxNQUFNLEtBQUksSUFFN0JQLEVBQVdRLFNBQVNKLEVBQUdLLFFBQVFILEdBQUssWUFPcEMsWUFBQWQsT0FBUixzQkFDUWtCLEVBQU8sMkNBQ3VCbkIsS0FBS0ssTUFBSyx5QkFDOUJMLEtBQUtLLE1BQUssd0JBQ1hMLEtBQUtLLE1BQUssMENBRWpCTCxLQUFLTSxVQUFVYyxLQUFJ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QWUsWUFDOUMsSUFBSU8sRUFBa0IzRixTQUFTb0YsZUFBZSxZQUM5QyxJQUFJUSxFQUFnQjVGLFNBQVNvRixlQUFlLFdBQzVDN0YsVSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUZWFjaGVyQ29udHJvbGxlciB9IGZyb20gXCIuL3RlYWNoZXJcIlxuaW1wb3J0IHsgU3R1ZGVudENvbnRyb2xsZXIgfSBmcm9tIFwiLi9zdHVkZW50XCJcbmltcG9ydCB7IEFkbWluQ29udHJvbGxlciB9IGZyb20gXCIuL2FkbWluXCJcblxuZXhwb3J0IGNsYXNzIEFwcCB7XG4gIHRlYWNoZXI6IFRlYWNoZXJDb250cm9sbGVyXG4gIHN0dWRlbnRzOiBTdHVkZW50Q29udHJvbGxlclxuICBhZG1pbjogQWRtaW5Db250cm9sbGVyXG4gIGNvbnN0cnVjdG9yKHRlYWNoZXI6IFRlYWNoZXJDb250cm9sbGVyLCBzdHVkZW50czogU3R1ZGVudENvbnRyb2xsZXIsIGFkbWluOiBBZG1pbkNvbnRyb2xsZXIpIHtcbiAgICB0aGlzLnRlYWNoZXIgPSB0ZWFjaGVyXG4gICAgdGhpcy5zdHVkZW50cyA9IHN0dWRlbnRzXG4gICAgdGhpcy5hZG1pbiA9IGFkbWluXG4gIH1cblxuICByZW5kZXIoKTogdm9pZCB7XG4gICAgdGhpcy50ZWFjaGVyLmluaXQoKVxuICAgIHRoaXMuYWRtaW4uaW5pdCgpXG4gICAgdGhpcy5zdHVkZW50cy5pbml0KClcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ291cnNlIH0gZnJvbSBcIi4uLy4uL212Yy9tb2RlbHMvY291cnNlLW1vZGVsXCJcbmltcG9ydCB7IFRlYWNoZXIgfSBmcm9tIFwiLi4vbW9kZWxzL3RlYWNoZXJcIlxuaW1wb3J0IHsgV2hhdE1vZGVsVHlwZSB9IGZyb20gXCIuLi90eXBlc1wiXG5leHBvcnQgY2xhc3MgTGlzdFZpZXc8VD4ge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBkYXRhTGlzdDogQXJyYXk8VD5cbiAgdGl0bGU6IHN0cmluZ1xuICBzdWJUaXRsZXM6IHN0cmluZ1tdXG4gIHR5cGU6IFdoYXRNb2RlbFR5cGUgLy8gc3R1ZGVudCBvcmUgdGVhY2hlclxuICBjb25zdHJ1Y3RvcihcbiAgICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudCxcbiAgICBkYXRhTGlzdDogQXJyYXk8VD4sXG4gICAgdGl0bGU6IHN0cmluZyxcbiAgICBzdWJUaXRsZXM6IHN0cmluZ1tdLFxuICAgIHR5cGU6IFdoYXRNb2RlbFR5cGUsXG4gICkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLmRhdGFMaXN0ID0gZGF0YUxpc3RcbiAgICB0aGlzLnRpdGxlID0gdGl0bGVcbiAgICB0aGlzLnN1YlRpdGxlcyA9IHN1YlRpdGxlc1xuICAgIHRoaXMudHlwZSA9IHR5cGVcbiAgfVxuXG4gIGNsaWNrSGFuZGxlcihzdWJzY3JpYmVyOiBGdW5jdGlvbikge1xuICAgIGNvbnN0IHRycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0clwiKVxuICAgIHRycy5mb3JFYWNoKHRyID0+XG4gICAgICB0ci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBbdHlwZV0gPSB0ci5pZC5zcGxpdChcIi1cIilcbiAgICAgICAgaWYgKHR5cGUgPT09IFwic3R1ZGVudFwiKSB7XG4gICAgICAgICAgc3Vic2NyaWJlcihwYXJzZUludCh0ci5kYXRhc2V0LmlkISwgMTApKVxuICAgICAgICB9XG4gICAgICAgIC8vIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJ1c2VyXCIsIFN0cmluZyh0ci5kYXRhc2V0LmlkKSlcbiAgICAgIH0pLFxuICAgIClcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyKCk6IHZvaWQge1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cInRhYmxlLXdyYXBwZXIgd3JhcHBlci0ke3RoaXMudGl0bGV9XCI+XG4gICAgPHRhYmxlIGNsYXNzPVwiJHt0aGlzLnRpdGxlfVwiPlxuICAgICAgICA8Y2FwdGlvbj4ke3RoaXMudGl0bGV9PC9jYXB0aW9uPlxuICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgJHt0aGlzLnN1YlRpdGxlcy5tYXAodCA9PiBgPHRoPiR7dH08L3RoPmApLmpvaW4oXCJcIil9XG4gICAgICAgIDwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAkeyh0aGlzLmRhdGFMaXN0IGFzIEFycmF5PFQ+KVxuICAgICAgICAgICAgLm1hcCgoZGF0YTogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlJbmZvID0gZGF0YS5kaXNwbGF5SW5mbygpIGFzIHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgICAgICA8dHIgZGF0YS1pZD1cIiR7ZGF0YS5pZH1cIiBpZD1cIiR7XG4gICAgICAgICAgICAgICAgdGhpcy50eXBlID09PSBcInN0dWRlbnRcIlxuICAgICAgICAgICAgICAgICAgPyBgc3R1ZGVudC0ke2RhdGEuaWR9YFxuICAgICAgICAgICAgICAgICAgOiB0aGlzLnR5cGUgPT09IFwiY291cnNlXCJcbiAgICAgICAgICAgICAgICAgID8gYGNvdXJzZS0ke2RhdGEuaWR9YFxuICAgICAgICAgICAgICAgICAgOiBgdGVhY2hlci0ke2RhdGEuaWR9YFxuICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICAgJHtPYmplY3Qua2V5cyhkaXNwbGF5SW5mbylcbiAgICAgICAgICAgICAgICAgIC5tYXAoa2V5ID0+IGA8dGQgZGF0YS1pbmZvPVwiJHtkaXNwbGF5SW5mb1trZXldfVwiPiR7ZGlzcGxheUluZm9ba2V5XX08L3RkPmApXG4gICAgICAgICAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgIGBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgICAgPC90Ym9keT5cbiAgICAgIDwvdGFibGU+XG4gICAgPC9kaXY+XG4gICAgYFxuICAgIHRoaXMucGFyZW50RWxlbWVudC5pbm5lckhUTUwgPSBodG1sXG4gIH1cblxuICByZW5kZXJSYXdIdG1sKCk6IHN0cmluZyB7XG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwidGFibGUtd3JhcHBlciB3cmFwcGVyLSR7dGhpcy50aXRsZX1cIj5cbiAgICA8dGFibGU+XG4gICAgICAgIDxjYXB0aW9uPiR7dGhpcy50aXRsZX08L2NhcHRpb24+XG4gICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAke3RoaXMuc3ViVGl0bGVzLm1hcCh0ID0+IGA8dGg+JHt0fTwvdGg+YCkuam9pbihcIlwiKX1cbiAgICAgICAgPC90aGVhZD5cbiAgICAgICAgPHRib2R5PlxuICAgICAgICAgICR7KHRoaXMuZGF0YUxpc3QgYXMgQXJyYXk8YW55PilcbiAgICAgICAgICAgIC5tYXAoKGRhdGE6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5SW5mbyA9IGRhdGEuZGlzcGxheUluZm8oKSBhcyB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9XG4gICAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgICAgPHRyIGRhdGEtaWQ9XCIke2RhdGEuaWR9XCI+XG4gICAgICAgICAgICAgICAgJHtPYmplY3Qua2V5cyhkaXNwbGF5SW5mbylcbiAgICAgICAgICAgICAgICAgIC5tYXAoa2V5ID0+IGA8dGQ+JHtkaXNwbGF5SW5mb1trZXldfTwvdGQ+YClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgYFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICA8L3Rib2R5PlxuICAgICAgPC90YWJsZT5cbiAgICA8L2Rpdj5cbiAgICBgXG4gICAgcmV0dXJuIGh0bWxcbiAgfVxuXG4gIG1vdW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlclJhd0h0bWwoKVxuICB9XG5cbiAgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlcigpXG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBQZXJzb24ge1xuICBpZDogbnVtYmVyXG4gIGZpcnN0TmFtZTogc3RyaW5nXG4gIGxhc3ROYW1lOiBzdHJpbmdcbiAgZW1haWw6IHN0cmluZ1xuICBhZ2U6IG51bWJlclxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgYWdlOiBudW1iZXIpIHtcbiAgICB0aGlzLmlkID0gaWRcbiAgICB0aGlzLmZpcnN0TmFtZSA9IGZpcnN0TmFtZVxuICAgIHRoaXMubGFzdE5hbWUgPSBsYXN0TmFtZVxuICAgIHRoaXMuZW1haWwgPSBlbWFpbFxuICAgIHRoaXMuYWdlID0gYWdlXG4gIH1cbn1cbiIsImltcG9ydCB7IFBlcnNvbiB9IGZyb20gXCIuL1BlcnNvblwiXG5pbXBvcnQgeyBEaXNwbGF5SW5mbywgU3ViamVjdCwgVGVhY2hlclN0dWRlbnRDb25zdHJ1Y3QgfSBmcm9tIFwiLi4vdHlwZXNcIlxuaW1wb3J0IHsgbmFub2lkIH0gZnJvbSBcIm5hbm9pZFwiXG5cbmV4cG9ydCBjbGFzcyBUZWFjaGVyIGV4dGVuZHMgUGVyc29uIGltcGxlbWVudHMgVGVhY2hlclN0dWRlbnRDb25zdHJ1Y3Qge1xuICBzdWJqZWN0czogU3ViamVjdFtdXG4gIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIGZpcnN0TmFtZTogc3RyaW5nLCBsYXN0TmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBhZ2U6IG51bWJlcikge1xuICAgIHN1cGVyKGlkLCBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCwgYWdlKVxuICAgIHRoaXMuc3ViamVjdHMgPSBbXVxuICB9XG5cbiAgZGlzcGxheUluZm8oKTogRGlzcGxheUluZm8ge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHt0aGlzLmZpcnN0TmFtZX0tJHt0aGlzLmxhc3ROYW1lfWAsXG4gICAgICBlbWFpbDogdGhpcy5lbWFpbCxcbiAgICAgIGFnZTogYCR7dGhpcy5hZ2V9YCxcbiAgICB9XG4gIH1cblxuICBzZXQgYWRkU3ViamVjdChzdWJqZWN0OiBTdWJqZWN0KSB7XG4gICAgdGhpcy5zdWJqZWN0cy5wdXNoKHN1YmplY3QpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGxvYWRUZWFjaGVycyA9ICgpID0+IFtcbiAgbmV3IFRlYWNoZXIoMSwgXCJGcmFua1wiLCBcIlNtaXRoXCIsIFwiZnJhbmtAaW8uY29tXCIsIDQzKSxcbiAgbmV3IFRlYWNoZXIoMiwgXCJMb2dhblwiLCBcIkpvbnNzb25cIiwgXCJsb2dhbkBpby5jb21cIiwgNDcpLFxuICBuZXcgVGVhY2hlcigzLCBcIk1pYVwiLCBcIkdyZWdlclwiLCBcIm1pYUBpby5jb21cIiwgNDEpLFxuICBuZXcgVGVhY2hlcig0LCBcIkJvcmlzXCIsIFwiUm9vbmV5XCIsIFwiZnJhbmtAaW8uY29tXCIsIDUzKSxcbl1cbiIsImltcG9ydCB7IExpc3RWaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL2xpc3Qtdmlld1wiXG5pbXBvcnQgeyBsb2FkVGVhY2hlcnMsIFRlYWNoZXIgfSBmcm9tIFwiLi4vbW9kZWxzL3RlYWNoZXJcIlxuXG5leHBvcnQgY2xhc3MgVGVhY2hlckNvbnRyb2xsZXIge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICB0ZWFjaGVyc1ZpZXc6IExpc3RWaWV3PFRlYWNoZXI+XG4gIGNvbnN0cnVjdG9yKHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudFxuICAgIHRoaXMudGVhY2hlcnNWaWV3ID0gbmV3IExpc3RWaWV3KFxuICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LFxuICAgICAgbG9hZFRlYWNoZXJzKCksXG4gICAgICBcIlRlYWNoZXJzXCIsXG4gICAgICBbXCJuYW1lXCIsIFwiZW1haWxcIiwgXCJhZ2VcIl0sXG4gICAgICBcInRlYWNoZXJcIixcbiAgICApXG4gIH1cblxuICBpbml0KCk6IHZvaWQge1xuICAgIHRoaXMudGVhY2hlcnNWaWV3LmluaXQoKVxuICB9XG59XG4iLCJpbXBvcnQgeyBBZG1pbk1lZGlhdG9yIH0gZnJvbSBcIi4vbWVkaWF0b3JcIlxuaW1wb3J0IHsgU3R1ZGVudCB9IGZyb20gXCIuL3N0dWRlbnRcIlxuY2xhc3MgQWRtaW4ge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogQWRtaW5cbiAgaWQ6IG51bWJlclxuICBmaXJzdE5hbWU6IHN0cmluZ1xuICBzbHVnOiBzdHJpbmdcbiAgaXNBZG1pbjogYm9vbGVhblxuICBwcml2YXRlIG1lc3NhZ2VCb3g6IHN0cmluZ1tdXG4gIGFkbWluTWVkaWF0b3I6IG51bGwgfCBBZG1pbk1lZGlhdG9yXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaWQgPSA5OVxuICAgIHRoaXMuZmlyc3ROYW1lID0gXCJBbGZyZWRcIlxuICAgIHRoaXMuc2x1ZyA9IFwiSSBhbSB0aGUgYm9zcyDwn5KwISEhXCJcbiAgICB0aGlzLmlzQWRtaW4gPSB0cnVlXG4gICAgdGhpcy5tZXNzYWdlQm94ID0gW11cbiAgICB0aGlzLmFkbWluTWVkaWF0b3IgPSBudWxsXG4gIH1cbiAgc3RhdGljIGdldEluc3RhbmNlKCkge1xuICAgIGlmICghQWRtaW4uaW5zdGFuY2UpIHtcbiAgICAgIEFkbWluLmluc3RhbmNlID0gbmV3IEFkbWluKClcbiAgICB9XG4gICAgcmV0dXJuIEFkbWluLmluc3RhbmNlXG4gIH1cbiAgcmVjZWl2ZShtZXNzYWdlOiBzdHJpbmcsIGZyb206IFN0dWRlbnQpOiBzdHJpbmcge1xuICAgIGNvbnN0IHN0dWRlbnRSZWdpc3RyZWRGb3JDb3Vyc2VNZXNzYWdlID0gYFN0dWRlbnQgJHtmcm9tLmZpcnN0TmFtZX0gJHttZXNzYWdlfWBcbiAgICBjb25zb2xlLmxvZyhzdHVkZW50UmVnaXN0cmVkRm9yQ291cnNlTWVzc2FnZSlcbiAgICB0aGlzLm1lc3NhZ2VCb3gucHVzaChtZXNzYWdlKVxuICAgIHJldHVybiBzdHVkZW50UmVnaXN0cmVkRm9yQ291cnNlTWVzc2FnZVxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VzKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMubWVzc2FnZUJveC5sZW5ndGggPT09IDApIHJldHVybiBcIm1lc3NhZ2UgYm94IGVtcHR5IVwiXG4gICAgbGV0IHN0ciA9IGBgXG4gICAgZm9yIChjb25zdCBtIG9mIHRoaXMubWVzc2FnZUJveCkge1xuICAgICAgc3RyICs9IGAgLS0tICR7bX0gLS0tYFxuICAgIH1cbiAgICByZXR1cm4gc3RyXG4gIH1cbn1cblxuY29uc3QgbG9hZEFkbWluID0gKCkgPT4gbmV3IEFkbWluKClcblxuZXhwb3J0IHsgQWRtaW4sIGxvYWRBZG1pbiB9XG4iLCJpbXBvcnQgeyBBZG1pbiwgbG9hZEFkbWluIH0gZnJvbSBcIi4vYWRtaW5cIlxuaW1wb3J0IHsgU3R1ZGVudCB9IGZyb20gXCIuL3N0dWRlbnRcIlxuXG5jbGFzcyBBZG1pbk1lZGlhdG9yIHtcbiAgY29sbGVjdGlvbjogUmVjb3JkPHN0cmluZywgU3R1ZGVudCB8IEFkbWluPlxuICBhZG1pbjogQWRtaW5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jb2xsZWN0aW9uID0ge31cbiAgICB0aGlzLmFkbWluID0gbG9hZEFkbWluKClcbiAgfVxuICByZWdpc3RlcihodW1hbjogU3R1ZGVudCB8IEFkbWluKSB7XG4gICAgdGhpcy5jb2xsZWN0aW9uW2h1bWFuLmZpcnN0TmFtZV0gPSBodW1hblxuICAgIGh1bWFuLmFkbWluTWVkaWF0b3IgPSB0aGlzXG4gIH1cblxuICBzZW5kKG1lc3NhZ2U6IHN0cmluZywgZnJvbTogU3R1ZGVudCwgdG8/OiBTdHVkZW50LCBhZG1pbj86IEFkbWluKSB7XG4gICAgaWYgKHRvICYmIGFkbWluKSB7XG4gICAgICBjb25zb2xlLmxvZyhcImlmXCIpXG4gICAgICB0by5yZWNlaXZlKG1lc3NhZ2UsIGZyb20pXG4gICAgICAvLyBhZG1pbj8ucmVjZWl2ZShtZXNzYWdlLCBmcm9tKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcImVsc2VcIilcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMuY29sbGVjdGlvbikuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpZiAodGhpcy5jb2xsZWN0aW9uW2tleV0gIT09IGZyb20pIHtcbiAgICAgICAgICB0aGlzLmNvbGxlY3Rpb25ba2V5XS5yZWNlaXZlKG1lc3NhZ2UsIGZyb20pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG5cbi8vIGNsYXNzIFN0dWRlbnRNZWRpYXRvciB7XG4vLyAgIHN0dWRlbnRzOiBSZWNvcmQ8c3RyaW5nLCBTdHVkZW50PlxuLy8gICBjb25zdHJ1Y3RvcigpIHtcbi8vICAgICB0aGlzLnN0dWRlbnRzID0ge31cbi8vICAgfVxuXG4vLyAgIHJlZ2lzdGVyU3R1ZGVudChzdHVkZW50OiBTdHVkZW50KSB7XG4vLyAgICAgdGhpcy5zdHVkZW50c1tzdHVkZW50LmZpcnN0TmFtZV0gPSBzdHVkZW50XG4vLyAgICAgc3R1ZGVudC5hZG1pbk1lZGlhdG9yID0gdGhpc1xuLy8gICB9XG5cbi8vICAgc2VuZChtZXNzYWdlOiBzdHJpbmcsIGZyb206IFN0dWRlbnQsIHRvPzogU3R1ZGVudCkge1xuLy8gICAgIGlmICh0bykge1xuLy8gICAgICAgdG8ucmVjZWl2ZShtZXNzYWdlLCBmcm9tKVxuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICBPYmplY3Qua2V5cyh0aGlzLnN0dWRlbnRzKS5mb3JFYWNoKGtleSA9PiB7XG4vLyAgICAgICAgIGlmICh0aGlzLnN0dWRlbnRzW2tleV0gIT09IGZyb20pIHtcbi8vICAgICAgICAgICB0aGlzLnN0dWRlbnRzW2tleV0ucmVjZWl2ZShtZXNzYWdlLCBmcm9tKVxuLy8gICAgICAgICB9XG4vLyAgICAgICB9KVxuLy8gICAgIH1cbi8vICAgfVxuLy8gfVxuLy8gY2xhc3MgQ291cnNlTWVkaWF0b3Ige1xuLy8gICBjb3Vyc2VzOiBSZWNvcmQ8c3RyaW5nLCBDb3Vyc2U+XG4vLyAgIGNvbnN0cnVjdG9yKCkge1xuLy8gICAgIHRoaXMuY291cnNlcyA9IHt9XG4vLyAgIH1cblxuLy8gICByZWdpc3RlckNvdXJzZShjb3Vyc2U6IENvdXJzZSkge1xuLy8gICAgIHRoaXMuY291cnNlc1tjb3Vyc2UudGl0bGVdID0gY291cnNlXG4vLyAgICAgY291cnNlLmNvdXJzZU1lZGlhdG9yID0gdGhpc1xuLy8gICB9XG5cbi8vICAgc2VuZChtZXNzYWdlOiBzdHJpbmcsIGZyb206IENvdXJzZSwgdG8/OiBDb3Vyc2UpIHtcbi8vICAgICAvL1xuLy8gICB9XG4vLyB9XG5cbmV4cG9ydCB7IEFkbWluTWVkaWF0b3IgfVxuIiwiaW1wb3J0IHsgQWRtaW4sIGxvYWRBZG1pbiB9IGZyb20gXCIuL2FkbWluXCJcbmltcG9ydCB7IEFkbWluTWVkaWF0b3IgfSBmcm9tIFwiLi9tZWRpYXRvclwiXG5pbXBvcnQgeyBQZXJzb24gfSBmcm9tIFwiLi9QZXJzb25cIlxuXG5jbGFzcyBTdHVkZW50IGV4dGVuZHMgUGVyc29uIHtcbiAgYWRtaW5NZWRpYXRvcjogbnVsbCB8IEFkbWluTWVkaWF0b3JcbiAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgZmlyc3ROYW1lOiBzdHJpbmcsIGxhc3ROYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIGFnZTogbnVtYmVyKSB7XG4gICAgc3VwZXIoaWQsIGZpcnN0TmFtZSwgbGFzdE5hbWUsIGVtYWlsLCBhZ2UpXG4gICAgdGhpcy5hZG1pbk1lZGlhdG9yID0gbnVsbFxuICB9XG4gIGRpc3BsYXlJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHt0aGlzLmZpcnN0TmFtZX0tJHt0aGlzLmxhc3ROYW1lfWAsXG4gICAgICBlbWFpbDogdGhpcy5lbWFpbCxcbiAgICAgIGFnZTogYCR7dGhpcy5hZ2V9YCxcbiAgICB9XG4gIH1cbiAgc2VuZChtZXNzYWdlOiBzdHJpbmcsIHRvPzogU3R1ZGVudCwgYWRtaW4/OiBBZG1pbikge1xuICAgIHRoaXMuYWRtaW5NZWRpYXRvcj8uc2VuZChtZXNzYWdlLCB0aGlzLCB0bywgYWRtaW4pXG4gIH1cbiAgcmVjZWl2ZShtZXNzYWdlOiBzdHJpbmcsIGZyb206IFN0dWRlbnQpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHttZXNzYWdlfSAtIGZyb20gJHtmcm9tfWBcbiAgfVxufVxuXG5jb25zdCBhZG1pbk1lZGlhdG9yID0gbmV3IEFkbWluTWVkaWF0b3IoKVxuXG5jb25zdCBsb2FkU3R1ZGVudHMgPSAoKSA9PiBbXG4gIG5ldyBTdHVkZW50KDEsIFwiRnJhbmtcIiwgXCJNZWxsYmVyZ1wiLCBcImZyYW5rQGlvLmNvbVwiLCAyMSksXG4gIG5ldyBTdHVkZW50KDIsIFwiUmlvXCIsIFwiRmVyZGluYW5kXCIsIFwicmlvQGlvLmNvbVwiLCAyNSksXG4gIG5ldyBTdHVkZW50KDMsIFwiTmVtYW5qYVwiLCBcIlZpZGljXCIsIFwibmVtYW5qYUBpby5jb21cIiwgMzIpLFxuICBuZXcgU3R1ZGVudCg0LCBcIkZyZWRyaWtcIiwgXCJsanVuZ2JlcmdcIiwgXCJmcmVkcmlrQGlvLmNvbVwiLCAzMiksXG5dXG5cbmNvbnN0IHJlZ2lzdGVyQWxsU3R1ZGVudHMgPSAoKTogdm9pZCA9PiB7XG4gIGZvciAobGV0IHN0dWRlbnQgb2YgbG9hZFN0dWRlbnRzKCkpIHtcbiAgICBhZG1pbk1lZGlhdG9yLnJlZ2lzdGVyKHN0dWRlbnQpXG4gIH1cbiAgYWRtaW5NZWRpYXRvci5yZWdpc3Rlcihsb2FkQWRtaW4oKSlcbn1cblxuZXhwb3J0IHsgU3R1ZGVudCwgbG9hZFN0dWRlbnRzLCBhZG1pbk1lZGlhdG9yLCByZWdpc3RlckFsbFN0dWRlbnRzIH1cbiIsImltcG9ydCB7IEFkbWluLCBsb2FkQWRtaW4gfSBmcm9tIFwiLi4vbW9kZWxzL2FkbWluXCJcbmltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi4vbW9kZWxzL3N0dWRlbnRcIlxuaW1wb3J0IHsgVGVhY2hlciB9IGZyb20gXCIuLi9tb2RlbHMvdGVhY2hlclwiXG5pbXBvcnQgeyBMaXN0VmlldyB9IGZyb20gXCIuL2xpc3Qtdmlld1wiXG5cbmV4cG9ydCBjbGFzcyBNb2RhbFZpZXc8VD4ge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBsaXN0OiBBcnJheTxhbnk+XG4gIGRhdGE6IFN0dWRlbnQgfCBUZWFjaGVyXG4gIHRpdGxlOiBzdHJpbmdcbiAgbGlzdFZpZXc6IExpc3RWaWV3PFQ+XG4gIHN1YlRpdGxlczogc3RyaW5nW11cbiAgY29uZmlybWF0aW9uVGV4dDogc3RyaW5nXG4gIGFkbWluOiBBZG1pblxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LFxuICAgIGxpc3Q6IGFueSxcbiAgICBkYXRhOiBTdHVkZW50IHwgVGVhY2hlcixcbiAgICB0aXRsZTogc3RyaW5nLFxuICAgIHN1YlRpdGxlczogc3RyaW5nW10sXG4gICkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLmxpc3QgPSBsaXN0XG4gICAgdGhpcy5kYXRhID0gZGF0YVxuICAgIHRoaXMudGl0bGUgPSB0aXRsZVxuICAgIHRoaXMuc3ViVGl0bGVzID0gc3ViVGl0bGVzXG4gICAgdGhpcy5saXN0VmlldyA9IG5ldyBMaXN0VmlldyhcbiAgICAgIHRoaXMucGFyZW50RWxlbWVudCxcbiAgICAgIHRoaXMubGlzdCxcbiAgICAgIHRoaXMudGl0bGUsXG4gICAgICB0aGlzLnN1YlRpdGxlcyxcbiAgICAgIFwic3R1ZGVudFwiLFxuICAgIClcbiAgICB0aGlzLmNvbmZpcm1hdGlvblRleHQgPSBcIlwiXG4gICAgdGhpcy5hZG1pbiA9IGxvYWRBZG1pbigpXG4gIH1cblxuICB1cGRhdGVUZXh0KHRleHQ6IHN0cmluZykge1xuICAgIGNvbnNvbGUubG9nKFwiVEVYVFwiLCB0ZXh0KVxuICAgIHRoaXMuY29uZmlybWF0aW9uVGV4dCA9IHRleHRcbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICBjb25zdCBtb2RhbFdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpIGFzIEhUTUxETGlzdEVsZW1lbnRcbiAgICBtb2RhbFdyYXBwZXIuY2xhc3NMaXN0LmFkZChcInNob3ctbW9kYWxcIilcblxuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRhaW5lclwiPlxuICAgICAgJHt0aGlzLmxpc3RWaWV3LnJlbmRlclJhd0h0bWwoKX1cbiAgICAgICR7dGhpcy5jb25maXJtYXRpb25UZXh0fVxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImNsb3NlLW1vZGFsXCI+XG4gICAgICAgIOKdjFxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gICAgYFxuXG4gICAgbW9kYWxXcmFwcGVyLmlubmVySFRNTCA9IGh0bWxcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlLW1vZGFsXCIpPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgbW9kYWxXcmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LW1vZGFsXCIpXG4gICAgICBtb2RhbFdyYXBwZXIuaW5uZXJIVE1MID0gXCJcIlxuICAgIH0pXG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsIHRib2R5IHRyXCIpLmZvckVhY2goKHRyOiBhbnkpID0+IHtcbiAgICAgIHRyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoXCJzZW5kXCIgaW4gdGhpcy5kYXRhKSB7XG4gICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uVGV4dCA9IGBZb3UgaGF2ZSBub3cgYmVlbiByZWdpc3RlcmVkIHRvIHRoZSAke2V2ZW50LnRhcmdldC5pbm5lclRleHR9IENvdXJzZWBcbiAgICAgICAgICB0aGlzLmRhdGEuc2VuZChjb25maXJtYXRpb25UZXh0LCB0aGlzLmRhdGEsIHRoaXMuYWRtaW4pIC8vIHNlbmRpbmcgZnJvbSB0aGlzIHN0dWRlbnQsIHRvIGl0c2VsZiBhbmQgdG8gYWRtaW5cbiAgICAgICAgICB0aGlzLnVwZGF0ZVRleHQoY29uZmlybWF0aW9uVGV4dClcbiAgICAgICAgICB0aGlzLnVwZGF0ZUh0bWwoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pXG4gIH1cbiAgdXBkYXRlSHRtbCgpIHtcbiAgICB0aGlzLnJlbmRlcigpXG4gIH1cbn1cbiIsImltcG9ydCB7IERpc3BsYXlJbmZvIH0gZnJvbSBcIi4uL3R5cGVzXCJcbmNsYXNzIENvdXJzZSB7XG4gIGlkOiBudW1iZXJcbiAgdGl0bGU6IHN0cmluZ1xuICBkZXNjcmlwdGlvbjogc3RyaW5nXG4gIGR1cmF0aW9uOiBzdHJpbmdcblxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCB0aXRsZTogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nLCBkdXJhdGlvbjogc3RyaW5nKSB7XG4gICAgdGhpcy5pZCA9IGlkXG4gICAgdGhpcy50aXRsZSA9IHRpdGxlXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uXG4gICAgdGhpcy5kdXJhdGlvbiA9IGR1cmF0aW9uXG4gIH1cblxuICBkaXNwbGF5SW5mbygpOiBEaXNwbGF5SW5mbyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLFxuICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb24sXG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGxvYWRDb3Vyc2VzID0gKCk6IENvdXJzZVtdID0+IFtcbiAgbmV3IENvdXJzZSgxLCBcIm1hdGhcIiwgXCJtYXRoIGlzIHdvbmRlcmZ1bFwiLCBcIjZoXCIpLFxuICBuZXcgQ291cnNlKDIsIFwiaGlzdG9yeVwiLCBcImhpc3RvcnkgaXMgZ29vZCBmb3IgeW91XCIsIFwiM2hcIiksXG4gIG5ldyBDb3Vyc2UoMywgXCJzd2VkaXNoXCIsIFwid2l0aG91dCBzd2VkaXNoIHlvdSB3aWxsIGZhY2Ugc29tZSBzZXJpb3VzIHByb2JsZW1zXCIsIFwiMmhcIiksXG4gIG5ldyBDb3Vyc2UoNCwgXCJlbmdsaXNoXCIsIFwidGhlIGdsb2JhbCBsYW5ndWFnZSwgbGVhcm4gaXQgTk9XISEhXCIsIFwiNWhcIiksXG5dXG5cbmV4cG9ydCB7IENvdXJzZSwgbG9hZENvdXJzZXMgfVxuIiwiaW1wb3J0IHsgbG9hZFN0dWRlbnRzLCBTdHVkZW50LCByZWdpc3RlckFsbFN0dWRlbnRzLCBhZG1pbk1lZGlhdG9yIH0gZnJvbSBcIi4uL21vZGVscy9zdHVkZW50XCJcbmltcG9ydCB7IExpc3RWaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL2xpc3Qtdmlld1wiXG5pbXBvcnQgeyBNb2RhbFZpZXcgYXMgQ291cnNlc01vZGFsVmlldyB9IGZyb20gXCIuLi92aWV3cy9tb2RhbC12aWV3XCJcbmltcG9ydCB7IGxvYWRDb3Vyc2VzIH0gZnJvbSBcIi4uL21vZGVscy9jb3Vyc2VcIlxuaW1wb3J0IHsgUHJvZmlsZVZpZXcgfSBmcm9tIFwiLi4vdmlld3MvcHJvZmlsZS12aWV3XCJcblxuZXhwb3J0IGNsYXNzIFN0dWRlbnRDb250cm9sbGVyIHtcbiAgcGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnRcbiAgc3R1ZGVudHNWaWV3OiBMaXN0VmlldzxTdHVkZW50PlxuICBjb25zdHJ1Y3RvcihwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudCkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLnN0dWRlbnRzVmlldyA9IG5ldyBMaXN0VmlldyhcbiAgICAgIHRoaXMucGFyZW50RWxlbWVudCxcbiAgICAgIGxvYWRTdHVkZW50cygpLFxuICAgICAgXCJTdHVkZW50c1wiLFxuICAgICAgW1wibmFtZVwiLCBcImVtYWlsXCIsIFwiYWdlXCJdLFxuICAgICAgXCJzdHVkZW50XCIsXG4gICAgKVxuICB9XG5cbiAgaGFuZGxlQ2xpY2tTdHVkZW50KCk6IHZvaWQge1xuICAgIHRoaXMuc3R1ZGVudHNWaWV3LmNsaWNrSGFuZGxlcigoaWQ6IG51bWJlcikgPT4ge1xuICAgICAgY29uc3Qgc3R1ZGVudCA9IGxvYWRTdHVkZW50cygpLmZpbmQoc3R1ZGVudCA9PiBzdHVkZW50LmlkID09PSBpZClcbiAgICAgIGNvbnN0IGRhdGEgPSBzdHVkZW50ISBhcyBTdHVkZW50XG4gICAgICBjb25zdCBjb3Vyc2VzID0gbG9hZENvdXJzZXMoKVxuICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWxpc3RcIikgYXMgSFRNTERpdkVsZW1lbnRcbiAgICAgIG5ldyBDb3Vyc2VzTW9kYWxWaWV3PGFueVtdPihtb2RhbCwgY291cnNlcywgZGF0YSwgXCJjb3Vyc2VzXCIsIFtcInRpdGxlXCIsIFwiZHVyYXRpb25cIl0pLnJlbmRlcigpXG4gICAgfSlcbiAgfVxuXG4gIGhhbmRsZVNob3dQcm9maWxlKCk6IHZvaWQge1xuICAgIC8vIHRoaXMucHJvZmlsZVZpZXcuY2xpY2tIYW5kbGVyKChpZDogbnVtYmVyKSA9PiB7XG4gICAgLy8gICBjb25zdCBzdHVkZW50ID0gbG9hZFN0dWRlbnRzKCkuZmluZChzdHVkZW50ID0+IHN0dWRlbnQuaWQgPT09IGlkKVxuICAgIC8vICAgY29uc3QgZGF0YSA9IHN0dWRlbnQhIGFzIFN0dWRlbnRcbiAgICAvLyAgIGNvbnN0IGNvdXJzZXMgPSBsb2FkQ291cnNlcygpXG4gICAgLy8gICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtbGlzdFwiKSBhcyBIVE1MRGl2RWxlbWVudFxuICAgIC8vICAgY29uc29sZS5sb2coXCJtb2RhbFwiLCBtb2RhbClcbiAgICAvLyB9KVxuICB9XG5cbiAgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0dWRlbnRzVmlldy5pbml0KClcbiAgICB0aGlzLmhhbmRsZUNsaWNrU3R1ZGVudCgpXG4gICAgcmVnaXN0ZXJBbGxTdHVkZW50cygpXG4gICAgdGhpcy5oYW5kbGVTaG93UHJvZmlsZSgpXG4gICAgY29uc29sZS5sb2coXCJhZG1pbk1lZGlhdG9yXCIsIGFkbWluTWVkaWF0b3IpIC8vIWZvciB0ZXN0aW5nIVxuICB9XG59XG4iLCJpbXBvcnQgeyBBZG1pbiwgbG9hZEFkbWluIH0gZnJvbSBcIi4uL21vZGVscy9hZG1pblwiXG5cbmV4cG9ydCBjbGFzcyBBZG1pblZpZXcge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBhZG1pbjogQWRtaW5cbiAgY29uc3RydWN0b3IocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50XG4gICAgdGhpcy5hZG1pbiA9IGxvYWRBZG1pbigpXG4gIH1cblxuICByZW5kZXIoKTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coXCJhZG1pblwiLCB0aGlzLmFkbWluLCB0aGlzLnBhcmVudEVsZW1lbnQpXG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJhZG1pbi13cmFwcGVyIHdyYXBwZXItJHt0aGlzLmFkbWluLmZpcnN0TmFtZX1cIj5cbiAgICAgICAgPGJ1dHRvbiBpZD1cImFkbWluLXByb2ZpbGUtYnRuXCIgY2xhc3M9XCJidXR0b25cIj5BZG1pbiBQcm9maWxlPC9idXR0b24+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFkbWluLWNvbnRlbnRcIj5cbiAgICAgICAgICA8aDM+IE1yIEFkbWluICR7dGhpcy5hZG1pbi5maXJzdE5hbWV9PC9oMz5cbiAgICAgICAgICA8cD4ke3RoaXMuYWRtaW4uc2x1Z308L3A+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICA8L2Rpdj5cbiAgICBgXG4gICAgdGhpcy5wYXJlbnRFbGVtZW50LmlubmVySFRNTCA9IGh0bWxcblxuICAgIGNvbnN0IGFkbWluQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRtaW4tY29udGVudFwiKSBhcyBIVE1MRGl2RWxlbWVudFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRtaW4tcHJvZmlsZS1idG5cIik/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBhZG1pbkNvbnRlbnQuY2xhc3NMaXN0LnRvZ2dsZShcInNob3ctYWRtaW4tY29udGVudFwiKVxuICAgICAgY29uc29sZS5sb2codGhpcy5hZG1pbi5tZXNzYWdlcylcbiAgICB9KVxuICB9XG59XG4iLCJpbXBvcnQgeyBBZG1pblZpZXcgfSBmcm9tIFwiLi4vdmlld3MvYWRtaW4tdmlld1wiXG5cbmV4cG9ydCBjbGFzcyBBZG1pbkNvbnRyb2xsZXIge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBhZG1pblZpZXc6IEFkbWluVmlld1xuICBjb25zdHJ1Y3RvcihwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudCkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLmFkbWluVmlldyA9IG5ldyBBZG1pblZpZXcodGhpcy5wYXJlbnRFbGVtZW50KVxuICB9XG5cbiAgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmFkbWluVmlldy5yZW5kZXIoKVxuICB9XG59XG4iLCJpbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvYXBwXCJcbmltcG9ydCB7IFRlYWNoZXJDb250cm9sbGVyIH0gZnJvbSBcIi4vcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3RlYWNoZXJcIlxuaW1wb3J0IHsgU3R1ZGVudENvbnRyb2xsZXIgfSBmcm9tIFwiLi9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvc3R1ZGVudFwiXG5pbXBvcnQgeyBBZG1pbkNvbnRyb2xsZXIgfSBmcm9tIFwiLi9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvYWRtaW5cIlxuOygoKSA9PiB7XG4gIG5ldyBBcHAoXG4gICAgbmV3IFRlYWNoZXJDb250cm9sbGVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGVhY2hlclwiKSBhcyBIVE1MRGl2RWxlbWVudCksXG4gICAgbmV3IFN0dWRlbnRDb250cm9sbGVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3R1ZGVudFwiKSBhcyBIVE1MRGl2RWxlbWVudCksXG4gICAgbmV3IEFkbWluQ29udHJvbGxlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkbWluXCIpIGFzIEhUTUxEaXZFbGVtZW50KSxcbiAgKS5yZW5kZXIoKVxufSkoKVxuIl0sInNvdXJjZVJvb3QiOiIifQ==