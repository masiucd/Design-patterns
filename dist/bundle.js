(()=>{"use strict";var t,n=function(){function t(t,n,e){this.teacher=t,this.courses=n,this.students=e}return t.prototype.render=function(){this.teacher.init(),this.courses.init(),this.students.init()},t}(),e=function(){function t(t,n,e,i){this.parentElement=t,this.dataList=n,this.title=e,this.subTitles=i}return t.prototype.clickHandler=function(t){document.querySelectorAll("tr").forEach((function(n){return n.addEventListener("click",(function(){t(parseInt(n.dataset.id,10)),sessionStorage.setItem("user",String(n.dataset.id))}))}))},t.prototype.render=function(){var t='\n    <div class="table-wrapper wrapper-'+this.title+'">\n    <table class="'+this.title+'">\n        <caption>'+this.title+"</caption>\n        <thead>\n          "+this.subTitles.map((function(t){return"<th>"+t+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+this.dataList.map((function(t){var n=t.displayInfo();return'\n                <tr data-id="'+t.id+'">\n                '+Object.keys(n).map((function(t){return"<td>"+n[t]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    ";this.parentElement.innerHTML=t},t.prototype.renderRawHtml=function(){return'\n    <div class="table-wrapper wrapper-'+this.title+'">\n    <table>\n        <caption>'+this.title+"</caption>\n        <thead>\n          "+this.subTitles.map((function(t){return"<th>"+t+"</th>"})).join("")+"\n        </thead>\n        <tbody>\n          "+this.dataList.map((function(t){var n=t.displayInfo();return'\n                <tr data-id="'+t.id+'">\n                '+Object.keys(n).map((function(t){return"<td>"+n[t]+"</td>"})).join("")+"\n                </tr>\n          "})).join("")+"\n        </tbody>\n      </table>\n    </div>\n    "},t.prototype.mount=function(t){t.innerHTML=this.renderRawHtml()},t.prototype.init=function(){this.render()},t}(),i=function(){function t(t,n,e,i){this.id=t,this.title=n,this.description=e,this.duration=i,this.courseMediator=null}return t.prototype.displayInfo=function(){return{title:this.title,duration:this.duration}},t}(),o=function(){return[new i(1,"math","math is wonderful","6h"),new i(2,"history","history is good for you","3h"),new i(3,"swedish","without swedish you will face some serious problems","2h"),new i(4,"english","the global language, learn it NOW!!!","5h")]},r=function(){function t(t){this.parentElement=t,this.coursesView=new e(this.parentElement,o(),"Courses",["title","duration"])}return t.prototype.init=function(){this.coursesView.init()},t}(),s=function(t,n,e,i,o){this.id=t,this.firstName=n,this.lastName=e,this.email=i,this.age=o},a=(t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)},function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),c=function(t){function n(n,e,i,o,r){var s=t.call(this,n,e,i,o,r)||this;return s.subjects=[],s}return a(n,t),n.prototype.displayInfo=function(){return{name:this.firstName+"-"+this.lastName,email:this.email,age:""+this.age}},n}(s),u=function(){function t(t){this.parentElement=t,this.teachersView=new e(this.parentElement,[new c(1,"Frank","Smith","frank@io.com",43),new c(2,"Logan","Jonsson","logan@io.com",47),new c(3,"Mia","Greger","mia@io.com",41),new c(4,"Boris","Rooney","frank@io.com",53)],"Teachers",["name","email","age"])}return t.prototype.init=function(){this.teachersView.init()},t}(),l=function(){function t(){this.students={}}return t.prototype.registerStudent=function(t){this.students[t.firstName]=t,t.studentMediator=this},t.prototype.send=function(t,n,e){},t}(),d=(function(){function t(){this.courses={}}t.prototype.registerStudent=function(t){this.courses[t.title]=t,t.courseMediator=this},t.prototype.send=function(t,n,e){}}(),function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])})(n,e)};return function(n,e){function i(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}()),h=function(t){function n(n,e,i,o,r){var s=t.call(this,n,e,i,o,r)||this;return s.studentMediator=null,s}return d(n,t),n.prototype.displayInfo=function(){return{name:this.firstName+"-"+this.lastName,email:this.email,age:""+this.age}},n}(s);(new l).registerStudent;var p=function(){return[new h(1,"Frank","Mellberg","frank@isObject.com",21),new h(2,"Rio","Ferdinand","rio@isObject.com",25),new h(3,"Nemanja","Vidic","nemanja@isObject.com",32),new h(4,"Fredrik","ljungberg","fredrik@isObject.com",32),new h(5,"Lotta","Schelin","lotta@isObject.com",21),new h(6,"Stina","Olofsson","sina@isObject.com",21)]},f=function(){function t(t,n,i,o,r){this.parentElement=t,this.list=n,this.data=i,this.title=o,this.subTitles=r,this.listView=new e(this.parentElement,this.list,this.title,this.subTitles)}return t.prototype.render=function(){var t,n=this,e=document.querySelector(".modal");e.classList.add("show-modal");var i='\n    <div class="modal-container">\n      '+this.listView.renderRawHtml()+'\n      <button class="close-modal">\n        ‚ùå\n      </button>\n    </div>\n    ';e.innerHTML=i,null===(t=document.querySelector(".close-modal"))||void 0===t||t.addEventListener("click",(function(){e.classList.remove("show-modal")})),console.log(this.listView);var o=document.querySelectorAll(".modal tbody tr").forEach((function(t){console.log(t.dataset.id===String(n.data.id)),console.log("tr.dataset.id",t.dataset.id)}));console.log("trs",o)},t}(),m=function(){function t(t){this.parentElement=t,this.studentsView=new e(this.parentElement,p(),"Students",["name","email","age"])}return t.prototype.handleClickStudent=function(){this.studentsView.clickHandler((function(t){var n=p().find((function(n){return n.id===t})),e=o(),i=document.querySelector(".modal-list");new f(i,e,n,"courses",["title","duration"]).render()}))},t.prototype.init=function(){this.studentsView.init(),this.handleClickStudent()},t}();new n(new u(document.getElementById("teacher")),new r(document.getElementById("course")),new m(document.getElementById("student"))).render()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvYXBwLnRzIiwid2VicGFjazovL3NjaG9vbC1kYXRhLy4vc3JjL3BhdHRlcm5zL212YzIuMC92aWV3cy9saXN0LXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9jb3Vyc2UudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL2NvdXJzZS50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvbW9kZWxzL1BlcnNvbi50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvbW9kZWxzL3RlYWNoZXIudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3RlYWNoZXIudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL21vZGVscy9tZWRpYXRvci50cyIsIndlYnBhY2s6Ly9zY2hvb2wtZGF0YS8uL3NyYy9wYXR0ZXJucy9tdmMyLjAvbW9kZWxzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL3ZpZXdzL21vZGFsLXZpZXcudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvcGF0dGVybnMvbXZjMi4wL2NvbnRyb2xsZXJzL3N0dWRlbnQudHMiLCJ3ZWJwYWNrOi8vc2Nob29sLWRhdGEvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsidGVhY2hlciIsImNvdXJzZXMiLCJzdHVkZW50cyIsInRoaXMiLCJyZW5kZXIiLCJpbml0IiwicGFyZW50RWxlbWVudCIsImRhdGFMaXN0IiwidGl0bGUiLCJzdWJUaXRsZXMiLCJjbGlja0hhbmRsZXIiLCJzdWJzY3JpYmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInRyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhcnNlSW50IiwiZGF0YXNldCIsImlkIiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwiU3RyaW5nIiwiaHRtbCIsIm1hcCIsInQiLCJqb2luIiwiZGF0YSIsImRpc3BsYXlJbmZvIiwiT2JqZWN0Iiwia2V5cyIsImtleSIsImlubmVySFRNTCIsInJlbmRlclJhd0h0bWwiLCJtb3VudCIsImVsZW1lbnQiLCJkZXNjcmlwdGlvbiIsImR1cmF0aW9uIiwiY291cnNlTWVkaWF0b3IiLCJsb2FkQ291cnNlcyIsIkNvdXJzZSIsImNvdXJzZXNWaWV3IiwiTGlzdFZpZXciLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwiYWdlIiwic3ViamVjdHMiLCJuYW1lIiwiUGVyc29uIiwidGVhY2hlcnNWaWV3IiwiVGVhY2hlciIsInJlZ2lzdGVyU3R1ZGVudCIsInN0dWRlbnQiLCJzdHVkZW50TWVkaWF0b3IiLCJzZW5kIiwibWVzc2FnZSIsImZyb20iLCJ0byIsImNvdXJzZSIsIlN0dWRlbnRNZWRpYXRvciIsImxvYWRTdHVkZW50cyIsIlN0dWRlbnQiLCJsaXN0IiwibGlzdFZpZXciLCJtb2RhbFdyYXBwZXIiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiY29uc29sZSIsImxvZyIsInRycyIsInN0dWRlbnRzVmlldyIsImhhbmRsZUNsaWNrU3R1ZGVudCIsImZpbmQiLCJtb2RhbCIsIkFwcCIsIlRlYWNoZXJDb250cm9sbGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJDb3Vyc2VDb250cm9sbGVyIiwiU3R1ZGVudENvbnRyb2xsZXIiXSwibWFwcGluZ3MiOiJtQkFJQSxJLEVBQUEsYUFJRSxXQUFZQSxFQUE0QkMsRUFBMkJDLEdBQ2pFQyxLQUFLSCxRQUFVQSxFQUNmRyxLQUFLRixRQUFVQSxFQUNmRSxLQUFLRCxT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QyxVQUFZVCxFQUNhLFFBQXRDLEVBQUFYLFNBQVNzRCxjQUFjLHVCQUFlLFNBQUVsRCxpQkFBaUIsU0FBUyxXQUNoRWlELEVBQWFFLFVBQVVFLE9BQU8saUJBRWhDQyxRQUFRQyxJQUFJcEUsS0FBSzZELFVBRWpCLElBQU1RLEVBQU01RCxTQUFTQyxpQkFBaUIsbUJBQW1CQyxTQUFRLFNBQUNDLEdBQ2hFdUQsUUFBUUMsSUFBSXhELEVBQUdHLFFBQVFDLEtBQU9HLE9BQU8sRUFBS0ssS0FBS1IsS0FDL0NtRCxRQUFRQyxJQUFJLGdCQUFpQnhELEVBQUdHLFFBQVFDLE9BRTFDbUQsUUFBUUMsSUFBSSxNQUFPQyxJQUl2QixFQWpEQSxHQ0NBLGFBR0UsV0FBWWxFLEdBQ1ZILEtBQUtHLGNBQWdCQSxFQUNyQkgsS0FBS3NFLGFBQWUsSUFBSS9CLEVBQVN2QyxLQUFLRyxjQUFldUQsSUFBZ0IsV0FBWSxDQUMvRSxPQUNBLFFBQ0EsUUFxQk4sT0FqQkUsWUFBQWEsbUJBQUEsV0FDRXZFLEtBQUtzRSxhQUFhL0QsY0FBYSxTQUFDUyxHQUM5QixJQUNNUSxFQURVa0MsSUFBZWMsTUFBSyxTQUFBdEIsR0FBVyxPQUFBQSxFQUFRbEMsS0FBT0EsS0FFeERsQixFQUFVc0MsSUFDVnFDLEVBQVFoRSxTQUFTc0QsY0FBYyxlQUNyQyxJQUFJLEVBQWlDVSxFQUFPM0UsRUFBUzBCLEVBQU0sVUFBVyxDQUNwRSxRQUNBLGFBQ0N2QixhQUlQLFlBQUFDLEtBQUEsV0FDRUYsS0FBS3NFLGFBQWFwRSxPQUNsQkYsS0FBS3VFLHNCQUVULEVBN0JBLEdDS0UsSUFBSUcsRUFDRixJQUFJQyxFQUFrQmxFLFNBQVNtRSxlQUFlLFlBQzlDLElBQUlDLEVBQWlCcEUsU0FBU21FLGVBQWUsV0FDN0MsSUFBSUUsRUFBa0JyRSxTQUFTbUUsZUFBZSxhQUM5QzNFLFUiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGVhY2hlckNvbnRyb2xsZXIgfSBmcm9tIFwiLi90ZWFjaGVyXCJcbmltcG9ydCB7IENvdXJzZUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9jb3Vyc2VcIlxuaW1wb3J0IHsgU3R1ZGVudENvbnRyb2xsZXIgfSBmcm9tIFwiLi9zdHVkZW50XCJcblxuZXhwb3J0IGNsYXNzIEFwcCB7XG4gIHRlYWNoZXI6IFRlYWNoZXJDb250cm9sbGVyXG4gIGNvdXJzZXM6IENvdXJzZUNvbnRyb2xsZXJcbiAgc3R1ZGVudHM6IFN0dWRlbnRDb250cm9sbGVyXG4gIGNvbnN0cnVjdG9yKHRlYWNoZXI6IFRlYWNoZXJDb250cm9sbGVyLCBjb3Vyc2VzOiBDb3Vyc2VDb250cm9sbGVyLCBzdHVkZW50czogU3R1ZGVudENvbnRyb2xsZXIpIHtcbiAgICB0aGlzLnRlYWNoZXIgPSB0ZWFjaGVyXG4gICAgdGhpcy5jb3Vyc2VzID0gY291cnNlc1xuICAgIHRoaXMuc3R1ZGVudHMgPSBzdHVkZW50c1xuICB9XG5cbiAgcmVuZGVyKCk6IHZvaWQge1xuICAgIHRoaXMudGVhY2hlci5pbml0KClcbiAgICB0aGlzLmNvdXJzZXMuaW5pdCgpXG4gICAgdGhpcy5zdHVkZW50cy5pbml0KClcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ291cnNlIH0gZnJvbSBcIi4uLy4uL212Yy9tb2RlbHMvY291cnNlLW1vZGVsXCJcbmltcG9ydCB7IFRlYWNoZXIgfSBmcm9tIFwiLi4vbW9kZWxzL3RlYWNoZXJcIlxuXG5leHBvcnQgY2xhc3MgTGlzdFZpZXc8VD4ge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBkYXRhTGlzdDogQXJyYXk8VD5cbiAgdGl0bGU6IHN0cmluZ1xuICBzdWJUaXRsZXM6IHN0cmluZ1tdXG4gIGNvbnN0cnVjdG9yKFxuICAgIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50LFxuICAgIGRhdGFMaXN0OiBBcnJheTxUPixcbiAgICB0aXRsZTogc3RyaW5nLFxuICAgIHN1YlRpdGxlczogc3RyaW5nW11cbiAgKSB7XG4gICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudFxuICAgIHRoaXMuZGF0YUxpc3QgPSBkYXRhTGlzdFxuICAgIHRoaXMudGl0bGUgPSB0aXRsZVxuICAgIHRoaXMuc3ViVGl0bGVzID0gc3ViVGl0bGVzXG4gIH1cblxuICBjbGlja0hhbmRsZXIoc3Vic2NyaWJlcjogRnVuY3Rpb24pIHtcbiAgICBjb25zdCB0cnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidHJcIilcbiAgICB0cnMuZm9yRWFjaCh0ciA9PlxuICAgICAgdHIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgc3Vic2NyaWJlcihwYXJzZUludCh0ci5kYXRhc2V0LmlkISwgMTApKVxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwidXNlclwiLCBTdHJpbmcodHIuZGF0YXNldC5pZCkpXG4gICAgICB9KVxuICAgIClcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyKCk6IHZvaWQge1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cInRhYmxlLXdyYXBwZXIgd3JhcHBlci0ke3RoaXMudGl0bGV9XCI+XG4gICAgPHRhYmxlIGNsYXNzPVwiJHt0aGlzLnRpdGxlfVwiPlxuICAgICAgICA8Y2FwdGlvbj4ke3RoaXMudGl0bGV9PC9jYXB0aW9uPlxuICAgICAgICA8dGhlYWQ+XG4gICAgICAgICAgJHt0aGlzLnN1YlRpdGxlcy5tYXAodCA9PiBgPHRoPiR7dH08L3RoPmApLmpvaW4oXCJcIil9XG4gICAgICAgIDwvdGhlYWQ+XG4gICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAkeyh0aGlzLmRhdGFMaXN0IGFzIEFycmF5PGFueT4pXG4gICAgICAgICAgICAubWFwKChkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZGlzcGxheUluZm8gPSBkYXRhLmRpc3BsYXlJbmZvKCkgYXMgeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfVxuICAgICAgICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgICAgIDx0ciBkYXRhLWlkPVwiJHtkYXRhLmlkfVwiPlxuICAgICAgICAgICAgICAgICR7T2JqZWN0LmtleXMoZGlzcGxheUluZm8pXG4gICAgICAgICAgICAgICAgICAubWFwKGtleSA9PiBgPHRkPiR7ZGlzcGxheUluZm9ba2V5XX08L3RkPmApXG4gICAgICAgICAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgIGBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIlwiKX1cbiAgICAgICAgPC90Ym9keT5cbiAgICAgIDwvdGFibGU+XG4gICAgPC9kaXY+XG4gICAgYFxuICAgIHRoaXMucGFyZW50RWxlbWVudC5pbm5lckhUTUwgPSBodG1sXG4gIH1cblxuICByZW5kZXJSYXdIdG1sKCk6IHN0cmluZyB7XG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwidGFibGUtd3JhcHBlciB3cmFwcGVyLSR7dGhpcy50aXRsZX1cIj5cbiAgICA8dGFibGU+XG4gICAgICAgIDxjYXB0aW9uPiR7dGhpcy50aXRsZX08L2NhcHRpb24+XG4gICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAke3RoaXMuc3ViVGl0bGVzLm1hcCh0ID0+IGA8dGg+JHt0fTwvdGg+YCkuam9pbihcIlwiKX1cbiAgICAgICAgPC90aGVhZD5cbiAgICAgICAgPHRib2R5PlxuICAgICAgICAgICR7KHRoaXMuZGF0YUxpc3QgYXMgQXJyYXk8YW55PilcbiAgICAgICAgICAgIC5tYXAoKGRhdGE6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5SW5mbyA9IGRhdGEuZGlzcGxheUluZm8oKSBhcyB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9XG4gICAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgICAgPHRyIGRhdGEtaWQ9XCIke2RhdGEuaWR9XCI+XG4gICAgICAgICAgICAgICAgJHtPYmplY3Qua2V5cyhkaXNwbGF5SW5mbylcbiAgICAgICAgICAgICAgICAgIC5tYXAoa2V5ID0+IGA8dGQ+JHtkaXNwbGF5SW5mb1trZXldfTwvdGQ+YClcbiAgICAgICAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgYFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICA8L3Rib2R5PlxuICAgICAgPC90YWJsZT5cbiAgICA8L2Rpdj5cbiAgICBgXG4gICAgcmV0dXJuIGh0bWxcbiAgfVxuXG4gIG1vdW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLnJlbmRlclJhd0h0bWwoKVxuICB9XG5cbiAgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlcigpXG4gIH1cbn1cbiIsImltcG9ydCB7IENvdXJzZU1lZGlhdG9yIH0gZnJvbSBcIi4vbWVkaWF0b3JcIlxuaW1wb3J0IHsgRGlzcGxheUluZm8gfSBmcm9tIFwiLi4vdHlwZXNcIlxuXG5leHBvcnQgY2xhc3MgQ291cnNlIHtcbiAgaWQ6IG51bWJlclxuICB0aXRsZTogc3RyaW5nXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmdcbiAgZHVyYXRpb246IHN0cmluZ1xuICBjb3Vyc2VNZWRpYXRvcjogbnVsbCB8IENvdXJzZU1lZGlhdG9yXG4gIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIGR1cmF0aW9uOiBzdHJpbmcpIHtcbiAgICB0aGlzLmlkID0gaWRcbiAgICB0aGlzLnRpdGxlID0gdGl0bGVcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25cbiAgICB0aGlzLmR1cmF0aW9uID0gZHVyYXRpb25cbiAgICB0aGlzLmNvdXJzZU1lZGlhdG9yID0gbnVsbFxuICB9XG5cbiAgZGlzcGxheUluZm8oKTogRGlzcGxheUluZm8ge1xuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogdGhpcy50aXRsZSxcbiAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgbG9hZENvdXJzZXMgPSAoKTogQ291cnNlW10gPT4gW1xuICBuZXcgQ291cnNlKDEsIFwibWF0aFwiLCBcIm1hdGggaXMgd29uZGVyZnVsXCIsIFwiNmhcIiksXG4gIG5ldyBDb3Vyc2UoMiwgXCJoaXN0b3J5XCIsIFwiaGlzdG9yeSBpcyBnb29kIGZvciB5b3VcIiwgXCIzaFwiKSxcbiAgbmV3IENvdXJzZSgzLCBcInN3ZWRpc2hcIiwgXCJ3aXRob3V0IHN3ZWRpc2ggeW91IHdpbGwgZmFjZSBzb21lIHNlcmlvdXMgcHJvYmxlbXNcIiwgXCIyaFwiKSxcbiAgbmV3IENvdXJzZSg0LCBcImVuZ2xpc2hcIiwgXCJ0aGUgZ2xvYmFsIGxhbmd1YWdlLCBsZWFybiBpdCBOT1chISFcIiwgXCI1aFwiKSxcbl1cbiIsImltcG9ydCB7IExpc3RWaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL2xpc3Qtdmlld1wiXG5pbXBvcnQgeyBDb3Vyc2UsIGxvYWRDb3Vyc2VzIH0gZnJvbSBcIi4uL21vZGVscy9jb3Vyc2VcIlxuXG5leHBvcnQgY2xhc3MgQ291cnNlQ29udHJvbGxlciB7XG4gIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50XG4gIGNvdXJzZXNWaWV3OiBMaXN0VmlldzxDb3Vyc2U+XG4gIGNvbnN0cnVjdG9yKHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudFxuICAgIHRoaXMuY291cnNlc1ZpZXcgPSBuZXcgTGlzdFZpZXcodGhpcy5wYXJlbnRFbGVtZW50LCBsb2FkQ291cnNlcygpLCBcIkNvdXJzZXNcIiwgW1xuICAgICAgXCJ0aXRsZVwiLFxuICAgICAgXCJkdXJhdGlvblwiLFxuICAgIF0pXG4gIH1cblxuICBpbml0KCk6IHZvaWQge1xuICAgIHRoaXMuY291cnNlc1ZpZXcuaW5pdCgpXG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBQZXJzb24ge1xuICBpZDogbnVtYmVyXG4gIGZpcnN0TmFtZTogc3RyaW5nXG4gIGxhc3ROYW1lOiBzdHJpbmdcbiAgZW1haWw6IHN0cmluZ1xuICBhZ2U6IG51bWJlclxuICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBmaXJzdE5hbWU6IHN0cmluZywgbGFzdE5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgYWdlOiBudW1iZXIpIHtcbiAgICB0aGlzLmlkID0gaWRcbiAgICB0aGlzLmZpcnN0TmFtZSA9IGZpcnN0TmFtZVxuICAgIHRoaXMubGFzdE5hbWUgPSBsYXN0TmFtZVxuICAgIHRoaXMuZW1haWwgPSBlbWFpbFxuICAgIHRoaXMuYWdlID0gYWdlXG4gIH1cbn1cbiIsImltcG9ydCB7IFBlcnNvbiB9IGZyb20gXCIuL1BlcnNvblwiXG5pbXBvcnQgeyBTdWJqZWN0LCBUZWFjaGVyU3R1ZGVudENvbnN0cnVjdCB9IGZyb20gXCIuLi90eXBlc1wiXG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tIFwibmFub2lkXCJcblxuZXhwb3J0IGNsYXNzIFRlYWNoZXIgZXh0ZW5kcyBQZXJzb24gaW1wbGVtZW50cyBUZWFjaGVyU3R1ZGVudENvbnN0cnVjdCB7XG4gIHN1YmplY3RzOiBTdWJqZWN0W11cbiAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgZmlyc3ROYW1lOiBzdHJpbmcsIGxhc3ROYW1lOiBzdHJpbmcsIGVtYWlsOiBzdHJpbmcsIGFnZTogbnVtYmVyKSB7XG4gICAgc3VwZXIoaWQsIGZpcnN0TmFtZSwgbGFzdE5hbWUsIGVtYWlsLCBhZ2UpXG4gICAgdGhpcy5zdWJqZWN0cyA9IFtdXG4gIH1cblxuICBkaXNwbGF5SW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogYCR7dGhpcy5maXJzdE5hbWV9LSR7dGhpcy5sYXN0TmFtZX1gLFxuICAgICAgZW1haWw6IHRoaXMuZW1haWwsXG4gICAgICBhZ2U6IGAke3RoaXMuYWdlfWAsXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBsb2FkVGVhY2hlcnMgPSAoKSA9PiBbXG4gIG5ldyBUZWFjaGVyKDEsIFwiRnJhbmtcIiwgXCJTbWl0aFwiLCBcImZyYW5rQGlvLmNvbVwiLCA0MyksXG4gIG5ldyBUZWFjaGVyKDIsIFwiTG9nYW5cIiwgXCJKb25zc29uXCIsIFwibG9nYW5AaW8uY29tXCIsIDQ3KSxcbiAgbmV3IFRlYWNoZXIoMywgXCJNaWFcIiwgXCJHcmVnZXJcIiwgXCJtaWFAaW8uY29tXCIsIDQxKSxcbiAgbmV3IFRlYWNoZXIoNCwgXCJCb3Jpc1wiLCBcIlJvb25leVwiLCBcImZyYW5rQGlvLmNvbVwiLCA1MyksXG5dXG4iLCJpbXBvcnQgeyBMaXN0VmlldyB9IGZyb20gXCIuLi92aWV3cy9saXN0LXZpZXdcIlxuaW1wb3J0IHsgbG9hZFRlYWNoZXJzLCBUZWFjaGVyIH0gZnJvbSBcIi4uL21vZGVscy90ZWFjaGVyXCJcblxuZXhwb3J0IGNsYXNzIFRlYWNoZXJDb250cm9sbGVyIHtcbiAgcGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnRcbiAgdGVhY2hlcnNWaWV3OiBMaXN0VmlldzxUZWFjaGVyPlxuICBjb25zdHJ1Y3RvcihwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudCkge1xuICAgIHRoaXMucGFyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnRcbiAgICB0aGlzLnRlYWNoZXJzVmlldyA9IG5ldyBMaXN0Vmlldyh0aGlzLnBhcmVudEVsZW1lbnQsIGxvYWRUZWFjaGVycygpLCBcIlRlYWNoZXJzXCIsIFtcbiAgICAgIFwibmFtZVwiLFxuICAgICAgXCJlbWFpbFwiLFxuICAgICAgXCJhZ2VcIixcbiAgICBdKVxuICB9XG5cbiAgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnRlYWNoZXJzVmlldy5pbml0KClcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ291cnNlIH0gZnJvbSBcIi4vY291cnNlXCJcbmltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi9zdHVkZW50XCJcblxuY2xhc3MgU3R1ZGVudE1lZGlhdG9yIHtcbiAgc3R1ZGVudHM6IFJlY29yZDxzdHJpbmcsIFN0dWRlbnQ+XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuc3R1ZGVudHMgPSB7fVxuICB9XG5cbiAgcmVnaXN0ZXJTdHVkZW50KHN0dWRlbnQ6IFN0dWRlbnQpIHtcbiAgICB0aGlzLnN0dWRlbnRzW3N0dWRlbnQuZmlyc3ROYW1lXSA9IHN0dWRlbnRcbiAgICBzdHVkZW50LnN0dWRlbnRNZWRpYXRvciA9IHRoaXNcbiAgfVxuXG4gIHNlbmQobWVzc2FnZTogc3RyaW5nLCBmcm9tOiBDb3Vyc2UgfCBTdHVkZW50LCB0bzogQ291cnNlIHwgU3R1ZGVudCkge1xuICAgIC8vXG4gIH1cbn1cbmNsYXNzIENvdXJzZU1lZGlhdG9yIHtcbiAgY291cnNlczogUmVjb3JkPHN0cmluZywgQ291cnNlPlxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvdXJzZXMgPSB7fVxuICB9XG5cbiAgcmVnaXN0ZXJTdHVkZW50KGNvdXJzZTogQ291cnNlKSB7XG4gICAgdGhpcy5jb3Vyc2VzW2NvdXJzZS50aXRsZV0gPSBjb3Vyc2VcbiAgICBjb3Vyc2UuY291cnNlTWVkaWF0b3IgPSB0aGlzXG4gIH1cblxuICBzZW5kKG1lc3NhZ2U6IHN0cmluZywgZnJvbTogQ291cnNlIHwgU3R1ZGVudCwgdG86IENvdXJzZSB8IFN0dWRlbnQpIHtcbiAgICAvL1xuICB9XG59XG5cbmV4cG9ydCB7IFN0dWRlbnRNZWRpYXRvciwgQ291cnNlTWVkaWF0b3IgfVxuIiwiaW1wb3J0IHsgbmFub2lkIH0gZnJvbSBcIm5hbm9pZFwiXG5pbXBvcnQgeyBTdHVkZW50TWVkaWF0b3IgfSBmcm9tIFwiLi9tZWRpYXRvclwiXG5pbXBvcnQgeyBQZXJzb24gfSBmcm9tIFwiLi9QZXJzb25cIlxuXG5jbGFzcyBTdHVkZW50IGV4dGVuZHMgUGVyc29uIHtcbiAgc3R1ZGVudE1lZGlhdG9yOiBudWxsIHwgU3R1ZGVudE1lZGlhdG9yXG4gIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIGZpcnN0TmFtZTogc3RyaW5nLCBsYXN0TmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBhZ2U6IG51bWJlcikge1xuICAgIHN1cGVyKGlkLCBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCwgYWdlKVxuICAgIHRoaXMuc3R1ZGVudE1lZGlhdG9yID0gbnVsbFxuICB9XG4gIGRpc3BsYXlJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBgJHt0aGlzLmZpcnN0TmFtZX0tJHt0aGlzLmxhc3ROYW1lfWAsXG4gICAgICBlbWFpbDogdGhpcy5lbWFpbCxcbiAgICAgIGFnZTogYCR7dGhpcy5hZ2V9YCxcbiAgICB9XG4gIH1cbn1cblxuY29uc3Qgc3R1ZGVudE1lZGlhdG9yID0gbmV3IFN0dWRlbnRNZWRpYXRvcigpXG5zdHVkZW50TWVkaWF0b3IucmVnaXN0ZXJTdHVkZW50XG5cbmNvbnN0IGxvYWRTdHVkZW50cyA9ICgpID0+IFtcbiAgbmV3IFN0dWRlbnQoMSwgXCJGcmFua1wiLCBcIk1lbGxiZXJnXCIsIFwiZnJhbmtAaXNPYmplY3QuY29tXCIsIDIxKSxcbiAgbmV3IFN0dWRlbnQoMiwgXCJSaW9cIiwgXCJGZXJkaW5hbmRcIiwgXCJyaW9AaXNPYmplY3QuY29tXCIsIDI1KSxcbiAgbmV3IFN0dWRlbnQoMywgXCJOZW1hbmphXCIsIFwiVmlkaWNcIiwgXCJuZW1hbmphQGlzT2JqZWN0LmNvbVwiLCAzMiksXG4gIG5ldyBTdHVkZW50KDQsIFwiRnJlZHJpa1wiLCBcImxqdW5nYmVyZ1wiLCBcImZyZWRyaWtAaXNPYmplY3QuY29tXCIsIDMyKSxcbiAgbmV3IFN0dWRlbnQoNSwgXCJMb3R0YVwiLCBcIlNjaGVsaW5cIiwgXCJsb3R0YUBpc09iamVjdC5jb21cIiwgMjEpLFxuICBuZXcgU3R1ZGVudCg2LCBcIlN0aW5hXCIsIFwiT2xvZnNzb25cIiwgXCJzaW5hQGlzT2JqZWN0LmNvbVwiLCAyMSksXG5dXG5cbmV4cG9ydCB7IFN0dWRlbnQsIGxvYWRTdHVkZW50cywgc3R1ZGVudE1lZGlhdG9yIH1cbiIsImltcG9ydCB7IFN0dWRlbnQgfSBmcm9tIFwiLi4vbW9kZWxzL3N0dWRlbnRcIlxuaW1wb3J0IHsgVGVhY2hlciB9IGZyb20gXCIuLi9tb2RlbHMvdGVhY2hlclwiXG5pbXBvcnQgeyBMaXN0VmlldyB9IGZyb20gXCIuL2xpc3Qtdmlld1wiXG5cbmV4cG9ydCBjbGFzcyBNb2RhbFZpZXc8VCwgUz4ge1xuICBwYXJlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudFxuICBsaXN0OiBBcnJheTxhbnk+XG4gIGRhdGE6IFN0dWRlbnQgfCBUZWFjaGVyXG4gIHRpdGxlOiBzdHJpbmdcbiAgbGlzdFZpZXc6IExpc3RWaWV3PFQ+XG4gIHN1YlRpdGxlczogc3RyaW5nW11cbiAgY29uc3RydWN0b3IoXG4gICAgcGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQsXG4gICAgbGlzdDogYW55LFxuICAgIGRhdGE6IFN0dWRlbnQgfCBUZWFjaGVyLFxuICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgc3ViVGl0bGVzOiBzdHJpbmdbXVxuICApIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50XG4gICAgdGhpcy5saXN0ID0gbGlzdFxuICAgIHRoaXMuZGF0YSA9IGRhdGFcbiAgICB0aGlzLnRpdGxlID0gdGl0bGVcbiAgICB0aGlzLnN1YlRpdGxlcyA9IHN1YlRpdGxlc1xuICAgIHRoaXMubGlzdFZpZXcgPSBuZXcgTGlzdFZpZXcodGhpcy5wYXJlbnRFbGVtZW50LCB0aGlzLmxpc3QsIHRoaXMudGl0bGUsIHRoaXMuc3ViVGl0bGVzKVxuICB9XG5cbiAgcmVuZGVyKCk6IHZvaWQge1xuICAgIGNvbnN0IG1vZGFsV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIikgYXMgSFRNTERMaXN0RWxlbWVudFxuICAgIG1vZGFsV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwic2hvdy1tb2RhbFwiKVxuXG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGFpbmVyXCI+XG4gICAgICAke3RoaXMubGlzdFZpZXcucmVuZGVyUmF3SHRtbCgpfVxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImNsb3NlLW1vZGFsXCI+XG4gICAgICAgIOKdjFxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG4gICAgYFxuXG4gICAgbW9kYWxXcmFwcGVyLmlubmVySFRNTCA9IGh0bWxcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNsb3NlLW1vZGFsXCIpPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgbW9kYWxXcmFwcGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93LW1vZGFsXCIpXG4gICAgfSlcbiAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3RWaWV3KVxuICAgIC8vIGNvbnNvbGUubG9nKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIikpXG4gICAgY29uc3QgdHJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbCB0Ym9keSB0clwiKS5mb3JFYWNoKCh0cjogYW55KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyh0ci5kYXRhc2V0LmlkID09PSBTdHJpbmcodGhpcy5kYXRhLmlkKSlcbiAgICAgIGNvbnNvbGUubG9nKFwidHIuZGF0YXNldC5pZFwiLCB0ci5kYXRhc2V0LmlkKVxuICAgIH0pXG4gICAgY29uc29sZS5sb2coXCJ0cnNcIiwgdHJzKVxuICAgIC8vIGNvbnNvbGUubG9nKFwidHJzXCIsIHRycylcbiAgICAvLyBjb25zdCB4cyA9IEFycmF5LmZyb20odHJzKVxuICB9XG59XG4iLCJpbXBvcnQgeyBsb2FkU3R1ZGVudHMsIFN0dWRlbnQgfSBmcm9tIFwiLi4vbW9kZWxzL3N0dWRlbnRcIlxuaW1wb3J0IHsgTGlzdFZpZXcgfSBmcm9tIFwiLi4vdmlld3MvbGlzdC12aWV3XCJcbmltcG9ydCB7IE1vZGFsVmlldyBhcyBDb3Vyc2VzTW9kYWxWaWV3IH0gZnJvbSBcIi4uL3ZpZXdzL21vZGFsLXZpZXdcIlxuaW1wb3J0IHsgbG9hZENvdXJzZXMgfSBmcm9tIFwiLi4vbW9kZWxzL2NvdXJzZVwiXG5cbmV4cG9ydCBjbGFzcyBTdHVkZW50Q29udHJvbGxlciB7XG4gIHBhcmVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50XG4gIHN0dWRlbnRzVmlldzogTGlzdFZpZXc8U3R1ZGVudD5cbiAgY29uc3RydWN0b3IocGFyZW50RWxlbWVudDogSFRNTERpdkVsZW1lbnQpIHtcbiAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50XG4gICAgdGhpcy5zdHVkZW50c1ZpZXcgPSBuZXcgTGlzdFZpZXcodGhpcy5wYXJlbnRFbGVtZW50LCBsb2FkU3R1ZGVudHMoKSwgXCJTdHVkZW50c1wiLCBbXG4gICAgICBcIm5hbWVcIixcbiAgICAgIFwiZW1haWxcIixcbiAgICAgIFwiYWdlXCIsXG4gICAgXSlcbiAgfVxuXG4gIGhhbmRsZUNsaWNrU3R1ZGVudCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0dWRlbnRzVmlldy5jbGlja0hhbmRsZXIoKGlkOiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IHN0dWRlbnQgPSBsb2FkU3R1ZGVudHMoKS5maW5kKHN0dWRlbnQgPT4gc3R1ZGVudC5pZCA9PT0gaWQpXG4gICAgICBjb25zdCBkYXRhID0gc3R1ZGVudCEgYXMgU3R1ZGVudFxuICAgICAgY29uc3QgY291cnNlcyA9IGxvYWRDb3Vyc2VzKClcbiAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1saXN0XCIpIGFzIEhUTUxEaXZFbGVtZW50XG4gICAgICBuZXcgQ291cnNlc01vZGFsVmlldzxhbnlbXSwgU3R1ZGVudD4obW9kYWwsIGNvdXJzZXMsIGRhdGEsIFwiY291cnNlc1wiLCBbXG4gICAgICAgIFwidGl0bGVcIixcbiAgICAgICAgXCJkdXJhdGlvblwiLFxuICAgICAgXSkucmVuZGVyKClcbiAgICB9KVxuICB9XG5cbiAgaW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnN0dWRlbnRzVmlldy5pbml0KClcbiAgICB0aGlzLmhhbmRsZUNsaWNrU3R1ZGVudCgpXG4gIH1cbn1cbiIsImltcG9ydCB7IEFwcCB9IGZyb20gXCIuL3BhdHRlcm5zL212YzIuMC9jb250cm9sbGVycy9hcHBcIlxuaW1wb3J0IHsgQ291cnNlQ29udHJvbGxlciB9IGZyb20gXCIuL3BhdHRlcm5zL212YzIuMC9jb250cm9sbGVycy9jb3Vyc2VcIlxuaW1wb3J0IHsgVGVhY2hlckNvbnRyb2xsZXIgfSBmcm9tIFwiLi9wYXR0ZXJucy9tdmMyLjAvY29udHJvbGxlcnMvdGVhY2hlclwiXG5pbXBvcnQgeyBTdHVkZW50Q29udHJvbGxlciB9IGZyb20gXCIuL3BhdHRlcm5zL212YzIuMC9jb250cm9sbGVycy9zdHVkZW50XCJcbjsoKCkgPT4ge1xuICBjb25zdCBjcmVhdGVFbGVtZW50ID0gKHRhZzogc3RyaW5nLCBjbGFzc05hbWU6IHN0cmluZyk6IEhUTUxFbGVtZW50ID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpXG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSlcbiAgICByZXR1cm4gZWxlbWVudFxuICB9XG4gIG5ldyBBcHAoXG4gICAgbmV3IFRlYWNoZXJDb250cm9sbGVyKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGVhY2hlclwiKSBhcyBIVE1MRGl2RWxlbWVudCksXG4gICAgbmV3IENvdXJzZUNvbnRyb2xsZXIoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb3Vyc2VcIikgYXMgSFRNTERpdkVsZW1lbnQpLFxuICAgIG5ldyBTdHVkZW50Q29udHJvbGxlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0dWRlbnRcIikgYXMgSFRNTERpdkVsZW1lbnQpXG4gICkucmVuZGVyKClcbn0pKClcbiJdLCJzb3VyY2VSb290IjoiIn0=